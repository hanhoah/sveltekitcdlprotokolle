import{s as ce}from"../chunks/supabaseClient.CD4MZNEJ.js";import{d as Ae,c as Fe}from"../chunks/books.BuaZl2ob.js";import{s as Te,e as g,a as C,t as F,N as qe,c as d,b as $,f,g as V,d as T,O as Me,p as Ce,l as u,M as ie,i as p,h as _,j as de,n as h,m as K,o as pe}from"../chunks/scheduler.DXrhz23f.js";import{h as J,u as _e}from"../chunks/await_block.i5jR_Kl1.js";import{e as Q}from"../chunks/each.D6YF6ztN.js";import{S as ze,i as Ne,b as q,d as M,m as z,t as b,a as k,e as N,g as be,c as ke}from"../chunks/index.Bmfu-QDF.js";import{B as Ge}from"../chunks/Badge.D-t_uZOM.js";import{B as ge}from"../chunks/Button.C0UqRlq2.js";import{S as $e}from"../chunks/Spinner.D0BCRiYv.js";import{g as Oe,B as Ue}from"../chunks/book.2zZIqpLe.js";async function Pe(n){try{const{data:t}=await ce.from("books").select("*").eq("id",n).limit(1).single();return{data:t}}catch{return{}}}async function Re(n){try{const{data:t}=await ce.from("booklinks").select("label, link").eq("book_id",n);return t}catch{return{}}}async function Je(n){const{data:t,error:a}=await ce.from("books_hashtags").select("hashtag_id").eq("book_id",n);if(a)throw new Error("Fehler beim Abrufen der Hashtags: "+a.message);return t.map(e=>e.hashtag_id)}async function Ke(n){const{data:t,error:a}=await ce.from("hashtags").select("tag").in("id",n);if(a)throw new Error("Fehler beim Abrufen der Hashtags: "+a.message);return t}async function Qe({params:n}){let t=parseInt(n.bookId),{data:a}=await Pe(t),r=await Je(t),e=await Ae(r);return{data:a,streamed:{links:Re(t),similarBooks:Fe(e),hashtags:Ke(r)}}}const vt=Object.freeze(Object.defineProperty({__proto__:null,load:Qe},Symbol.toStringTag,{value:"Module"}));function Ve(n,t,a){const r=n.slice();return r[6]=t[a],r}function Le(n,t,a){const r=n.slice();return r[10]=t[a],r}function Se(n,t,a){const r=n.slice();return r[14]=t[a],r}function We(n){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function Xe(n){let t,a,r=Q(n[13]),e=[];for(let l=0;l<r.length;l+=1)e[l]=je(Se(n,r,l));const o=l=>k(e[l],1,1,()=>{e[l]=null});return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=K()},l(l){for(let s=0;s<e.length;s+=1)e[s].l(l);t=K()},m(l,s){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(l,s);p(l,t,s),a=!0},p(l,s){if(s&1){r=Q(l[13]);let i;for(i=0;i<r.length;i+=1){const v=Se(l,r,i);e[i]?(e[i].p(v,s),b(e[i],1)):(e[i]=je(v),e[i].c(),b(e[i],1),e[i].m(t.parentNode,t))}for(be(),i=r.length;i<e.length;i+=1)o(i);ke()}},i(l){if(!a){for(let s=0;s<r.length;s+=1)b(e[s]);a=!0}},o(l){e=e.filter(Boolean);for(let s=0;s<e.length;s+=1)k(e[s]);a=!1},d(l){l&&f(t),pe(e,l)}}}function Ye(n){let t=n[14].label+"",a,r;return{c(){a=F(t),r=F(" ðŸ›’")},l(e){a=T(e,t),r=T(e," ðŸ›’")},m(e,o){p(e,a,o),p(e,r,o)},p(e,o){o&1&&t!==(t=e[14].label+"")&&de(a,t)},d(e){e&&(f(a),f(r))}}}function je(n){let t,a,r,e,o;return a=new ge({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Ye]},$$scope:{ctx:n}}}),{c(){t=g("a"),q(a.$$.fragment),r=C(),this.h()},l(l){t=d(l,"A",{href:!0,target:!0});var s=$(t);M(a.$$.fragment,s),r=V(s),s.forEach(f),this.h()},h(){u(t,"href",e=n[14].link),u(t,"target","_blank")},m(l,s){p(l,t,s),z(a,t,null),_(t,r),o=!0},p(l,s){const i={};s&131073&&(i.$$scope={dirty:s,ctx:l}),a.$set(i),(!o||s&1&&e!==(e=l[14].link))&&u(t,"href",e)},i(l){o||(b(a.$$.fragment,l),o=!0)},o(l){k(a.$$.fragment,l),o=!1},d(l){l&&f(t),N(a)}}}function Ze(n){let t,a,r,e;return a=new $e({}),{c(){t=g("div"),q(a.$$.fragment),r=F(`
                Loading Shops ...`),this.h()},l(o){t=d(o,"DIV",{class:!0});var l=$(t);M(a.$$.fragment,l),r=T(l,`
                Loading Shops ...`),l.forEach(f),this.h()},h(){u(t,"class","loading")},m(o,l){p(o,t,l),z(a,t,null),_(t,r),e=!0},p:h,i(o){e||(b(a.$$.fragment,o),e=!0)},o(o){k(a.$$.fragment,o),e=!1},d(o){o&&f(t),N(a)}}}function et(n){let t,a;return{c(){t=g("img"),this.h()},l(r){t=d(r,"IMG",{width:!0,src:!0}),this.h()},h(){u(t,"width","100"),ie(t.src,a="/images/logos/Amazon.de-Logo.svg.png")||u(t,"src",a)},m(r,e){p(r,t,e)},p:h,d(r){r&&f(t)}}}function tt(n){let t,a;return{c(){t=g("img"),this.h()},l(r){t=d(r,"IMG",{width:!0,src:!0}),this.h()},h(){u(t,"width","100"),ie(t.src,a="/images/logos/EBay_logo.png")||u(t,"src",a)},m(r,e){p(r,t,e)},p:h,d(r){r&&f(t)}}}function lt(n){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function at(n){let t,a,r=Q(n[9]),e=[];for(let l=0;l<r.length;l+=1)e[l]=He(Le(n,r,l));const o=l=>k(e[l],1,1,()=>{e[l]=null});return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=K()},l(l){for(let s=0;s<e.length;s+=1)e[s].l(l);t=K()},m(l,s){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(l,s);p(l,t,s),a=!0},p(l,s){if(s&1){r=Q(l[9]);let i;for(i=0;i<r.length;i+=1){const v=Le(l,r,i);e[i]?(e[i].p(v,s),b(e[i],1)):(e[i]=He(v),e[i].c(),b(e[i],1),e[i].m(t.parentNode,t))}for(be(),i=r.length;i<e.length;i+=1)o(i);ke()}},i(l){if(!a){for(let s=0;s<r.length;s+=1)b(e[s]);a=!0}},o(l){e=e.filter(Boolean);for(let s=0;s<e.length;s+=1)k(e[s]);a=!1},d(l){l&&f(t),pe(e,l)}}}function rt(n){let t,a=n[10].tag+"",r;return{c(){t=F("#"),r=F(a)},l(e){t=T(e,"#"),r=T(e,a)},m(e,o){p(e,t,o),p(e,r,o)},p(e,o){o&1&&a!==(a=e[10].tag+"")&&de(r,a)},d(e){e&&(f(t),f(r))}}}function He(n){let t,a;return t=new Ge({props:{class:"mx-3",border:!0,color:"yellow",$$slots:{default:[rt]},$$scope:{ctx:n}}}),{c(){q(t.$$.fragment)},l(r){M(t.$$.fragment,r)},m(r,e){z(t,r,e),a=!0},p(r,e){const o={};e&131073&&(o.$$scope={dirty:e,ctx:r}),t.$set(o)},i(r){a||(b(t.$$.fragment,r),a=!0)},o(r){k(t.$$.fragment,r),a=!1},d(r){N(t,r)}}}function nt(n){let t,a,r,e;return a=new $e({}),{c(){t=g("div"),q(a.$$.fragment),r=F(`
                    Loading hashtags ...`),this.h()},l(o){t=d(o,"DIV",{class:!0});var l=$(t);M(a.$$.fragment,l),r=T(l,`
                    Loading hashtags ...`),l.forEach(f),this.h()},h(){u(t,"class","loading")},m(o,l){p(o,t,l),z(a,t,null),_(t,r),e=!0},p:h,i(o){e||(b(a.$$.fragment,o),e=!0)},o(o){k(a.$$.fragment,o),e=!1},d(o){o&&f(t),N(a)}}}function ot(n){return{c:h,l:h,m:h,p:h,i:h,o:h,d:h}}function st(n){let t,a,r=Q(n[5]),e=[];for(let l=0;l<r.length;l+=1)e[l]=xe(Ve(n,r,l));const o=l=>k(e[l],1,1,()=>{e[l]=null});return{c(){for(let l=0;l<e.length;l+=1)e[l].c();t=K()},l(l){for(let s=0;s<e.length;s+=1)e[s].l(l);t=K()},m(l,s){for(let i=0;i<e.length;i+=1)e[i]&&e[i].m(l,s);p(l,t,s),a=!0},p(l,s){if(s&1){r=Q(l[5]);let i;for(i=0;i<r.length;i+=1){const v=Ve(l,r,i);e[i]?(e[i].p(v,s),b(e[i],1)):(e[i]=xe(v),e[i].c(),b(e[i],1),e[i].m(t.parentNode,t))}for(be(),i=r.length;i<e.length;i+=1)o(i);ke()}},i(l){if(!a){for(let s=0;s<r.length;s+=1)b(e[s]);a=!0}},o(l){e=e.filter(Boolean);for(let s=0;s<e.length;s+=1)k(e[s]);a=!1},d(l){l&&f(t),pe(e,l)}}}function xe(n){let t,a,r;return a=new Ue({props:{book:{id:n[6].id,title:n[6].title,img:n[6].img}}}),{c(){t=g("li"),q(a.$$.fragment),this.h()},l(e){t=d(e,"LI",{class:!0});var o=$(t);M(a.$$.fragment,o),o.forEach(f),this.h()},h(){u(t,"class","my-2")},m(e,o){p(e,t,o),z(a,t,null),r=!0},p(e,o){const l={};o&1&&(l.book={id:e[6].id,title:e[6].title,img:e[6].img}),a.$set(l)},i(e){r||(b(a.$$.fragment,e),r=!0)},o(e){k(a.$$.fragment,e),r=!1},d(e){e&&f(t),N(a)}}}function it(n){let t,a,r,e;return a=new $e({}),{c(){t=g("div"),q(a.$$.fragment),r=F(`
            Loading similar books ...`),this.h()},l(o){t=d(o,"DIV",{class:!0});var l=$(t);M(a.$$.fragment,l),r=T(l,`
            Loading similar books ...`),l.forEach(f),this.h()},h(){u(t,"class","loading")},m(o,l){p(o,t,l),z(a,t,null),_(t,r),e=!0},p:h,i(o){e||(b(a.$$.fragment,o),e=!0)},o(o){k(a.$$.fragment,o),e=!1},d(o){o&&f(t),N(a)}}}function ct(n){let t,a,r,e,o,l,s,i,v,W,fe,y,Y,Z,j,H,ee,ue,x,A,te,le,L,G,ve="StichwÃ¶rter:",he,O,ae,re,S,U,we="Ã„hnliche BÃ¼cher:",me,P,ne,D,w={ctx:n,current:null,token:null,hasCatch:!1,pending:Ze,then:Xe,catch:We,value:13,blocks:[,,,]};J(Y=n[0].streamed.links,w),H=new ge({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[et]},$$scope:{ctx:n}}}),A=new ge({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[tt]},$$scope:{ctx:n}}});let I={ctx:n,current:null,token:null,hasCatch:!1,pending:nt,then:at,catch:lt,value:9,blocks:[,,,]};J(ae=n[0].streamed.hashtags,I);let E={ctx:n,current:null,token:null,hasCatch:!1,pending:it,then:st,catch:ot,value:5,blocks:[,,,]};return J(ne=n[0].streamed.similarBooks,E),{c(){t=g("div"),a=g("img"),e=C(),o=g("div"),l=g("h2"),s=F(n[3]),i=C(),v=g("div"),W=new qe(!1),fe=C(),y=g("div"),w.block.c(),Z=C(),j=g("a"),q(H.$$.fragment),ue=C(),x=g("a"),q(A.$$.fragment),le=C(),L=g("div"),G=g("div"),G.textContent=ve,he=C(),O=g("div"),I.block.c(),re=C(),S=g("div"),U=g("div"),U.textContent=we,me=C(),P=g("ul"),E.block.c(),this.h()},l(m){t=d(m,"DIV",{class:!0});var c=$(t);a=d(c,"IMG",{class:!0,width:!0,alt:!0,src:!0}),c.forEach(f),e=V(m),o=d(m,"DIV",{class:!0});var B=$(o);l=d(B,"H2",{class:!0});var X=$(l);s=T(X,n[3]),X.forEach(f),i=V(B),v=d(B,"DIV",{class:!0});var Ie=$(v);W=Me(Ie,!1),Ie.forEach(f),fe=V(B),y=d(B,"DIV",{class:!0});var R=$(y);w.block.l(R),Z=V(R),j=d(R,"A",{href:!0,target:!0});var Ee=$(j);M(H.$$.fragment,Ee),Ee.forEach(f),ue=V(R),x=d(R,"A",{href:!0,target:!0});var Be=$(x);M(A.$$.fragment,Be),Be.forEach(f),R.forEach(f),B.forEach(f),le=V(m),L=d(m,"DIV",{class:!0});var oe=$(L);G=d(oe,"DIV",{class:!0,"data-svelte-h":!0}),Ce(G)!=="svelte-ooggy2"&&(G.textContent=ve),he=V(oe),O=d(oe,"DIV",{class:!0});var ye=$(O);I.block.l(ye),ye.forEach(f),oe.forEach(f),re=V(m),S=d(m,"DIV",{class:!0});var se=$(S);U=d(se,"DIV",{class:!0,"data-svelte-h":!0}),Ce(U)!=="svelte-nfoxyh"&&(U.textContent=we),me=V(se),P=d(se,"UL",{class:!0});var De=$(P);E.block.l(De),De.forEach(f),se.forEach(f),this.h()},h(){u(a,"class","py-10"),u(a,"width","400"),u(a,"alt",n[3]),ie(a.src,r=n[2])||u(a,"src",r),u(t,"class","w-full flex flex-row bg-gray-100 justify-center"),u(l,"class","bg-yellow-300 p-2"),W.a=null,u(v,"class","p-5"),u(j,"href",ee="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+n[3]),u(j,"target","_blank"),u(x,"href",te="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+n[3]+"&_sacat=0"),u(x,"target","_blank"),u(y,"class","my-5 pb-10 flex flex-col items-center "),u(o,"class","bg-yellow-100"),u(G,"class","p-2 w-full mt-5 bg-teal-300 text-lg font-bold text-center"),u(O,"class","p-5 flex flex-row justify-center "),u(L,"class","bg-teal-100"),u(U,"class","w-full my-5 bg-lime-300 p-3 text-lg font-bold text-center"),u(P,"class","grid grid-cols-2 md:grid-cols-3"),u(S,"class","bg-lime-100")},m(m,c){p(m,t,c),_(t,a),p(m,e,c),p(m,o,c),_(o,l),_(l,s),_(o,i),_(o,v),W.m(n[1],v),_(o,fe),_(o,y),w.block.m(y,w.anchor=null),w.mount=()=>y,w.anchor=Z,_(y,Z),_(y,j),z(H,j,null),_(y,ue),_(y,x),z(A,x,null),p(m,le,c),p(m,L,c),_(L,G),_(L,he),_(L,O),I.block.m(O,I.anchor=null),I.mount=()=>O,I.anchor=null,p(m,re,c),p(m,S,c),_(S,U),_(S,me),_(S,P),E.block.m(P,E.anchor=null),E.mount=()=>P,E.anchor=null,D=!0},p(m,[c]){n=m,(!D||c&8)&&u(a,"alt",n[3]),(!D||c&4&&!ie(a.src,r=n[2]))&&u(a,"src",r),(!D||c&8)&&de(s,n[3]),(!D||c&2)&&W.p(n[1]),w.ctx=n,c&1&&Y!==(Y=n[0].streamed.links)&&J(Y,w)||_e(w,n,c);const B={};c&131072&&(B.$$scope={dirty:c,ctx:n}),H.$set(B),(!D||c&8&&ee!==(ee="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+n[3]))&&u(j,"href",ee);const X={};c&131072&&(X.$$scope={dirty:c,ctx:n}),A.$set(X),(!D||c&8&&te!==(te="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+n[3]+"&_sacat=0"))&&u(x,"href",te),I.ctx=n,c&1&&ae!==(ae=n[0].streamed.hashtags)&&J(ae,I)||_e(I,n,c),E.ctx=n,c&1&&ne!==(ne=n[0].streamed.similarBooks)&&J(ne,E)||_e(E,n,c)},i(m){D||(b(w.block),b(H.$$.fragment,m),b(A.$$.fragment,m),b(I.block),b(E.block),D=!0)},o(m){for(let c=0;c<3;c+=1){const B=w.blocks[c];k(B)}k(H.$$.fragment,m),k(A.$$.fragment,m);for(let c=0;c<3;c+=1){const B=I.blocks[c];k(B)}for(let c=0;c<3;c+=1){const B=E.blocks[c];k(B)}D=!1},d(m){m&&(f(t),f(e),f(o),f(le),f(L),f(re),f(S)),w.block.d(),w.token=null,w=null,N(H),N(A),I.block.d(),I.token=null,I=null,E.block.d(),E.token=null,E=null}}}function ft(n,t,a){let r,e,o,l,{data:s}=t;return n.$$set=i=>{"data"in i&&a(0,s=i.data)},n.$$.update=()=>{n.$$.dirty&1&&a(4,r=s.data),n.$$.dirty&16&&a(3,e=r.title),n.$$.dirty&16&&a(2,o=Oe(r.img[0],r.id,"books")),n.$$.dirty&16&&a(1,l=r.desc)},[s,l,o,e,r]}class wt extends ze{constructor(t){super(),Ne(this,t,ft,ct,Te,{data:0})}}export{wt as component,vt as universal};
