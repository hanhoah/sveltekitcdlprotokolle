import{s as M}from"../chunks/supabaseClient.CCJhsT86.js";import{s as x,e as w,t as q,a as S,o as H,c as I,b as E,d as A,f as h,g as V,m as D,i as k,h as P,j,p as X,H as Y,q as Z,A as ee}from"../chunks/scheduler.CzVGMVSq.js";import{S as te,i as le,t as B,e as re,b as K,c as ae,a as se,m as oe,d as ne,g as ie}from"../chunks/index.anhLQDqu.js";import{e as L}from"../chunks/each.D6YF6ztN.js";import{g as O,P as ce}from"../chunks/shops.ybW16vYJ.js";async function fe(a){console.log("getCategoryNameById: ",a);const{data:e,error:r}=await M.from("categories").select("name").eq("id",a).single();return e==null?void 0:e.name}async function ue(a){const{data:e,error:r}=await M.from("categories").select("description").eq("id",a).single();try{return e&&e.description?e.description:null}catch{return null}}const de="false";async function _e({params:a}){const e=a.catid;console.log("Lade Cat Parameter ...",e);const r=await fe(parseInt(e)),t=await ue(parseInt(e));console.log("desc",t);const{data:l,error:s}=await M.from("productwithpricecategories").select().eq("category_id",e).order("name"),n=l==null?void 0:l.length;return{catid:e,length:n,category:r,description:t,products:l}}const we=Object.freeze(Object.defineProperty({__proto__:null,load:_e,prerender:de},Symbol.toStringTag,{value:"Module"}));function U(a,e,r){const t=a.slice();return t[10]=e[r],t}function F(a,e,r){const t=a.slice();return t[13]=e[r],t}function G(a){let e,r;return{c(){e=w("div"),r=new Y(!1),this.h()},l(t){e=I(t,"DIV",{class:!0});var l=E(e);r=Z(l,!1),l.forEach(h),this.h()},h(){r.a=null,D(e,"class","border-2 p-2 bg-slate-100")},m(t,l){k(t,e,l),r.m(a[4],e)},p(t,l){l&16&&r.p(t[4])},d(t){t&&h(e)}}}function J(a){let e,r,t,l,s=O(a[13].id)+"",n,i,c,p;return i=new ce({props:{product:{id:a[13].id,name:a[13].name,img:a[13].image,price:a[13].price}}}),{c(){e=w("div"),r=w("li"),t=w("div"),l=new Y(!1),n=S(),ae(i.$$.fragment),c=S(),this.h()},l(d){e=I(d,"DIV",{class:!0});var g=E(e);r=I(g,"LI",{class:!0});var v=E(r);t=I(v,"DIV",{class:!0});var y=E(t);l=Z(y,!1),y.forEach(h),n=V(v),se(i.$$.fragment,v),v.forEach(h),c=V(g),g.forEach(h),this.h()},h(){l.a=null,D(t,"class","absolute right-10"),D(r,"class","my-2 relative"),D(e,"class","lazy-load")},m(d,g){k(d,e,g),P(e,r),P(r,t),l.m(s,t),P(r,n),oe(i,r,null),P(e,c),p=!0},p(d,g){(!p||g&4)&&s!==(s=O(d[13].id)+"")&&l.p(s);const v={};g&4&&(v.product={id:d[13].id,name:d[13].name,img:d[13].image,price:d[13].price}),i.$set(v)},i(d){p||(B(i.$$.fragment,d),p=!0)},o(d){K(i.$$.fragment,d),p=!1},d(d){d&&h(e),ne(i)}}}function Q(a){let e,r=L(Array.from({length:a[3]()}).map(W)),t=[];for(let l=0;l<r.length;l+=1)t[l]=R(U(a,r,l));return{c(){e=w("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=I(l,"DIV",{class:!0});var s=E(e);for(let n=0;n<t.length;n+=1)t[n].l(s);s.forEach(h),this.h()},h(){D(e,"class","page-selector svelte-ra8vou")},m(l,s){k(l,e,s);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(l,s){if(s&74){r=L(Array.from({length:l[3]()}).map(W));let n;for(n=0;n<r.length;n+=1){const i=U(l,r,n);t[n]?t[n].p(i,s):(t[n]=R(i),t[n].c(),t[n].m(e,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=r.length}},d(l){l&&h(e),X(t,l)}}}function he(a){let e,r=a[10]+"",t,l,s;function n(){return a[8](a[10])}return{c(){e=w("a"),t=q(r),this.h()},l(i){e=I(i,"A",{class:!0});var c=E(e);t=A(c,r),c.forEach(h),this.h()},h(){D(e,"class","page-number svelte-ra8vou")},m(i,c){k(i,e,c),P(e,t),l||(s=ee(e,"click",n),l=!0)},p(i,c){a=i,c&8&&r!==(r=a[10]+"")&&j(t,r)},d(i){i&&h(e),l=!1,s()}}}function me(a){let e,r=a[10]+"",t;return{c(){e=w("span"),t=q(r),this.h()},l(l){e=I(l,"SPAN",{class:!0});var s=E(e);t=A(s,r),s.forEach(h),this.h()},h(){D(e,"class","page-number current-page svelte-ra8vou")},m(l,s){k(l,e,s),P(e,t)},p(l,s){s&8&&r!==(r=l[10]+"")&&j(t,r)},d(l){l&&h(e)}}}function R(a){let e;function r(s,n){return s[10]==s[1]?me:he}let t=r(a),l=t(a);return{c(){l.c(),e=H()},l(s){l.l(s),e=H()},m(s,n){l.m(s,n),k(s,e,n)},p(s,n){t===(t=r(s))&&l?l.p(s,n):(l.d(1),l=t(s),l&&(l.c(),l.m(e.parentNode,e)))},d(s){s&&h(e),l.d(s)}}}function pe(a){let e,r,t,l,s,n,i,c,p,d,g=a[3]()>1,v,y,m=a[4]&&G(a),N=L(a[2]),_=[];for(let o=0;o<N.length;o+=1)_[o]=J(F(a,N,o));const $=o=>K(_[o],1,1,()=>{_[o]=null});let b=g&&Q(a);return{c(){e=w("div"),r=w("h2"),t=q(a[0]),l=q(" Produkte in der Kategorie "),s=q(a[5]),n=q(" gefunden."),i=S(),m&&m.c(),c=S(),p=w("ul");for(let o=0;o<_.length;o+=1)_[o].c();d=S(),b&&b.c(),v=H(),this.h()},l(o){e=I(o,"DIV",{class:!0});var f=E(e);r=I(f,"H2",{class:!0});var u=E(r);t=A(u,a[0]),l=A(u," Produkte in der Kategorie "),s=A(u,a[5]),n=A(u," gefunden."),u.forEach(h),f.forEach(h),i=V(o),m&&m.l(o),c=V(o),p=I(o,"UL",{class:!0});var C=E(p);for(let T=0;T<_.length;T+=1)_[T].l(C);C.forEach(h),d=V(o),b&&b.l(o),v=H(),this.h()},h(){D(r,"class","text-center my-5 p-2"),D(e,"class","w-full"),D(p,"class","grid grid-cols-2 md:grid-cols-3")},m(o,f){k(o,e,f),P(e,r),P(r,t),P(r,l),P(r,s),P(r,n),k(o,i,f),m&&m.m(o,f),k(o,c,f),k(o,p,f);for(let u=0;u<_.length;u+=1)_[u]&&_[u].m(p,null);k(o,d,f),b&&b.m(o,f),k(o,v,f),y=!0},p(o,[f]){if((!y||f&1)&&j(t,o[0]),(!y||f&32)&&j(s,o[5]),o[4]?m?m.p(o,f):(m=G(o),m.c(),m.m(c.parentNode,c)):m&&(m.d(1),m=null),f&4){N=L(o[2]);let u;for(u=0;u<N.length;u+=1){const C=F(o,N,u);_[u]?(_[u].p(C,f),B(_[u],1)):(_[u]=J(C),_[u].c(),B(_[u],1),_[u].m(p,null))}for(ie(),u=N.length;u<_.length;u+=1)$(u);re()}f&8&&(g=o[3]()>1),g?b?b.p(o,f):(b=Q(o),b.c(),b.m(v.parentNode,v)):b&&(b.d(1),b=null)},i(o){if(!y){for(let f=0;f<N.length;f+=1)B(_[f]);y=!0}},o(o){_=_.filter(Boolean);for(let f=0;f<_.length;f+=1)K(_[f]);y=!1},d(o){o&&(h(e),h(i),h(c),h(p),h(d),h(v)),m&&m.d(o),X(_,o),b&&b.d(o)}}}const z=50,W=(a,e)=>e+1;function ge(a,e,r){let t,l,s,n,i,{data:c}=e;console.log("catid: ",c.catid);function p(){return r(2,t=c.products.slice(0,10)),t}t=p();let d=1;async function g(y){r(1,d=y);const m=(d-1)*z,N=m+z;return r(2,t=await c.products.slice(m,N)),t}t=g(1);const v=y=>g(y);return a.$$set=y=>{"data"in y&&r(7,c=y.data)},a.$$.update=()=>{a.$$.dirty&128&&r(2,t=c.products.slice(0,10)),a.$$.dirty&128&&r(0,l=c.products.length),a.$$.dirty&128&&r(5,s=c.category),a.$$.dirty&128&&r(4,n=c.description),a.$$.dirty&1&&r(3,i=()=>Math.ceil(l/z))},[l,d,t,i,n,s,g,c,v]}class Ie extends te{constructor(e){super(),le(this,e,ge,pe,x,{data:7})}}export{Ie as component,we as universal};
