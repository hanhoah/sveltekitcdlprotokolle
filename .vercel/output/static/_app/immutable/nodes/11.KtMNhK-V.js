import{s as he}from"../chunks/supabaseClient.-wfdu3WJ.js";import{s as Ce,e as h,H as pe,a as y,t as Z,c as p,b as v,q as $e,g as I,f as d,d as x,p as Te,l as n,O as ce,i as b,h as _,j as ve,n as D,m as Ve,o as Ae}from"../chunks/scheduler.DfuChs2G.js";import{h as De,u as qe}from"../chunks/await_block.b95zegdE.js";import{e as ze}from"../chunks/each.D6YF6ztN.js";import{S as Be,i as Le,b as Q,d as W,m as X,t as z,a as C,e as Y,g as He,c as Me}from"../chunks/index.BnyCCVNm.js";import{B as ie}from"../chunks/Button.BWb8FycM.js";import{S as Fe}from"../chunks/Spinner.BMfSgHGW.js";import{g as ue,a as Ge,P as Oe}from"../chunks/shops.Dfb--GkT.js";async function Ue({params:t}){let e=t.productid,r="id, name, image, description, link, products_categories(category_id)",{data:a}=await he.from("products").select(r).eq("id",e).limit(1).single(),l=a.name;console.log("product: ",l,"id: ",e),a.description;async function i(P){let g=P.split(" ");return g=g.slice(0,3),g.join(" ")}let o=await i(l),u=a.products_categories[0].category_id;async function s(P,g){let{data:S}=await he.from("products_categories").select("product_id").eq("category_id",P).range(0,9),T=S.map(F=>F.product_id);return T=T.filter(F=>F!=g),T}async function f(P){let{data:g}=await he.from("products").select().in("id",P);return g}let $=await s(u,e);return{data:a,searchterm:o,streamed:{similarProducts:f($)}}}const nt=Object.freeze(Object.defineProperty({__proto__:null,load:Ue},Symbol.toStringTag,{value:"Module"}));function Se(t,e,r){const a=t.slice();return a[8]=e[r],a}function Re(t){let e,r;return{c(){e=Z(t[5]),r=Z(" ðŸ›’")},l(a){e=x(a,t[5]),r=x(a," ðŸ›’")},m(a,l){b(a,e,l),b(a,r,l)},p(a,l){l&32&&ve(e,a[5])},d(a){a&&(d(e),d(r))}}}function Ne(t){let e,r;return{c(){e=Z(t[5]),r=Z(" ðŸ›’")},l(a){e=x(a,t[5]),r=x(a," ðŸ›’")},m(a,l){b(a,e,l),b(a,r,l)},p(a,l){l&32&&ve(e,a[5])},d(a){a&&(d(e),d(r))}}}function Je(t){let e,r;return{c(){e=h("img"),this.h()},l(a){e=p(a,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){n(e,"alt","amazon logo"),n(e,"width","100"),ce(e.src,r="/images/logos/Amazon.de-Logo.svg.png")||n(e,"src",r)},m(a,l){b(a,e,l)},p:D,d(a){a&&d(e)}}}function Ke(t){let e,r;return{c(){e=h("img"),this.h()},l(a){e=p(a,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){n(e,"alt","ebay logo"),n(e,"width","100"),ce(e.src,r="/images/logos/EBay_logo.png")||n(e,"src",r)},m(a,l){b(a,e,l)},p:D,d(a){a&&d(e)}}}function Qe(t){return{c:D,l:D,m:D,p:D,i:D,o:D,d:D}}function We(t){let e,r,a=ze(t[7]),l=[];for(let o=0;o<a.length;o+=1)l[o]=je(Se(t,a,o));const i=o=>C(l[o],1,1,()=>{l[o]=null});return{c(){for(let o=0;o<l.length;o+=1)l[o].c();e=Ve()},l(o){for(let u=0;u<l.length;u+=1)l[u].l(o);e=Ve()},m(o,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(o,u);b(o,e,u),r=!0},p(o,u){if(u&1){a=ze(o[7]);let s;for(s=0;s<a.length;s+=1){const f=Se(o,a,s);l[s]?(l[s].p(f,u),z(l[s],1)):(l[s]=je(f),l[s].c(),z(l[s],1),l[s].m(e.parentNode,e))}for(He(),s=a.length;s<l.length;s+=1)i(s);Me()}},i(o){if(!r){for(let u=0;u<a.length;u+=1)z(l[u]);r=!0}},o(o){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)C(l[u]);r=!1},d(o){o&&d(e),Ae(l,o)}}}function je(t){let e,r,a=ue(t[8].id)+"",l,i,o,u;return i=new Oe({props:{product:{id:t[8].id,name:t[8].name,img:t[8].image}}}),{c(){e=h("li"),r=new pe(!1),l=y(),Q(i.$$.fragment),o=y(),this.h()},l(s){e=p(s,"LI",{class:!0});var f=v(e);r=$e(f,!1),l=I(f),W(i.$$.fragment,f),o=I(f),f.forEach(d),this.h()},h(){r.a=l,n(e,"class","my-2 relative")},m(s,f){b(s,e,f),r.m(a,e),_(e,l),X(i,e,null),_(e,o),u=!0},p(s,f){(!u||f&1)&&a!==(a=ue(s[8].id)+"")&&r.p(a);const $={};f&1&&($.product={id:s[8].id,name:s[8].name,img:s[8].image}),i.$set($)},i(s){u||(z(i.$$.fragment,s),u=!0)},o(s){C(i.$$.fragment,s),u=!1},d(s){s&&d(e),Y(i)}}}function Xe(t){let e,r,a,l;return r=new Fe({}),{c(){e=h("div"),Q(r.$$.fragment),a=Z(`
                Loading similar Products ...`),this.h()},l(i){e=p(i,"DIV",{class:!0});var o=v(e);W(r.$$.fragment,o),a=x(o,`
                Loading similar Products ...`),o.forEach(d),this.h()},h(){n(e,"class","loading")},m(i,o){b(i,e,o),X(r,e,null),_(e,a),l=!0},p:D,i(i){l||(z(r.$$.fragment,i),l=!0)},o(i){C(r.$$.fragment,i),l=!1},d(i){i&&d(e),Y(r)}}}function Ye(t){let e,r,a=ue(t[4])+"",l,i,o,u,s,f,$,P,g,S,T,F,G,ee,fe,O,V,A,q,de,B,L,le,me,H,M,re,_e,J,se,j,U,be="Ã„hnliche Produkte:",ge,R,oe,k;$=new ie({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Re]},$$scope:{ctx:t}}}),q=new ie({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Ne]},$$scope:{ctx:t}}}),L=new ie({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[Je]},$$scope:{ctx:t}}}),M=new ie({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[Ke]},$$scope:{ctx:t}}});let w={ctx:t,current:null,token:null,hasCatch:!1,pending:Xe,then:We,catch:Qe,value:7,blocks:[,,,]};return De(oe=t[0].streamed.similarProducts,w),{c(){e=h("div"),r=new pe(!1),l=y(),i=h("img"),u=y(),s=h("div"),f=h("a"),Q($.$$.fragment),P=y(),g=h("div"),S=h("h2"),T=Z(t[5]),F=y(),G=h("div"),ee=new pe(!1),fe=y(),O=h("div"),V=h("div"),A=h("a"),Q(q.$$.fragment),de=y(),B=h("a"),Q(L.$$.fragment),me=y(),H=h("a"),Q(M.$$.fragment),_e=y(),J=h("div"),se=y(),j=h("div"),U=h("div"),U.textContent=be,ge=y(),R=h("ul"),w.block.c(),this.h()},l(m){e=p(m,"DIV",{class:!0});var c=v(e);r=$e(c,!1),l=I(c),i=p(c,"IMG",{class:!0,width:!0,alt:!0,src:!0}),c.forEach(d),u=I(m),s=p(m,"DIV",{class:!0});var N=v(s);f=p(N,"A",{href:!0,target:!0});var te=v(f);W($.$$.fragment,te),te.forEach(d),N.forEach(d),P=I(m),g=p(m,"DIV",{class:!0});var E=v(g);S=p(E,"H2",{class:!0});var ae=v(S);T=x(ae,t[5]),ae.forEach(d),F=I(E),G=p(E,"DIV",{id:!0,class:!0});var we=v(G);ee=$e(we,!1),we.forEach(d),fe=I(E),O=p(E,"DIV",{id:!0,class:!0});var ke=v(O);V=p(ke,"DIV",{class:!0});var K=v(V);A=p(K,"A",{href:!0,target:!0});var ye=v(A);W(q.$$.fragment,ye),ye.forEach(d),de=I(K),B=p(K,"A",{href:!0,target:!0});var Ie=v(B);W(L.$$.fragment,Ie),Ie.forEach(d),me=I(K),H=p(K,"A",{href:!0,target:!0});var Ee=v(H);W(M.$$.fragment,Ee),Ee.forEach(d),K.forEach(d),ke.forEach(d),_e=I(E),J=p(E,"DIV",{id:!0,class:!0}),v(J).forEach(d),E.forEach(d),se=I(m),j=p(m,"DIV",{class:!0});var ne=v(j);U=p(ne,"DIV",{class:!0,"data-svelte-h":!0}),Te(U)!=="svelte-g4vgml"&&(U.textContent=be),ge=I(ne),R=p(ne,"UL",{class:!0});var Pe=v(R);w.block.l(Pe),Pe.forEach(d),ne.forEach(d),this.h()},h(){r.a=l,n(i,"class","py-10"),n(i,"width","400"),n(i,"alt",t[5]),ce(i.src,o=t[6])||n(i,"src",o),n(e,"class","w-full flex flex-row bg-gray-100 justify-center relative"),n(f,"href",t[2]),n(f,"target","_blank"),n(s,"class","my-5 pb-10 flex flex-col items-center top-0 sticky z-10"),n(S,"class","bg-yellow-300 p-2"),ee.a=null,n(G,"id","desc"),n(G,"class","p-5"),n(A,"href",t[2]),n(A,"target","_blank"),n(B,"href",le="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+t[1]),n(B,"target","_blank"),n(H,"href",re="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+t[1]+"&_sacat=0"),n(H,"target","_blank"),n(V,"class","my-5 pb-10 flex flex-col items-center space-y-5"),n(O,"id","links"),n(O,"class","w-5/6 m-auto bg-zinc-50 border-zinc-200 border-2 p-5"),n(J,"id","abstand"),n(J,"class","h-5"),n(g,"class","bg-yellow-100"),n(U,"class","w-full my-5 bg-lime-300 p-3 text-lg font-bold text-center"),n(R,"class","grid grid-cols-2 md:grid-cols-3"),n(j,"class","bg-lime-100")},m(m,c){b(m,e,c),r.m(a,e),_(e,l),_(e,i),b(m,u,c),b(m,s,c),_(s,f),X($,f,null),b(m,P,c),b(m,g,c),_(g,S),_(S,T),_(g,F),_(g,G),ee.m(t[3],G),_(g,fe),_(g,O),_(O,V),_(V,A),X(q,A,null),_(V,de),_(V,B),X(L,B,null),_(V,me),_(V,H),X(M,H,null),_(g,_e),_(g,J),b(m,se,c),b(m,j,c),_(j,U),_(j,ge),_(j,R),w.block.m(R,w.anchor=null),w.mount=()=>R,w.anchor=null,k=!0},p(m,[c]){t=m,(!k||c&16)&&a!==(a=ue(t[4])+"")&&r.p(a),(!k||c&32)&&n(i,"alt",t[5]),(!k||c&64&&!ce(i.src,o=t[6]))&&n(i,"src",o);const N={};c&2080&&(N.$$scope={dirty:c,ctx:t}),$.$set(N),(!k||c&4)&&n(f,"href",t[2]),(!k||c&32)&&ve(T,t[5]),(!k||c&8)&&ee.p(t[3]);const te={};c&2080&&(te.$$scope={dirty:c,ctx:t}),q.$set(te),(!k||c&4)&&n(A,"href",t[2]);const E={};c&2048&&(E.$$scope={dirty:c,ctx:t}),L.$set(E),(!k||c&2&&le!==(le="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+t[1]))&&n(B,"href",le);const ae={};c&2048&&(ae.$$scope={dirty:c,ctx:t}),M.$set(ae),(!k||c&2&&re!==(re="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+t[1]+"&_sacat=0"))&&n(H,"href",re),w.ctx=t,c&1&&oe!==(oe=t[0].streamed.similarProducts)&&De(oe,w)||qe(w,t,c)},i(m){k||(z($.$$.fragment,m),z(q.$$.fragment,m),z(L.$$.fragment,m),z(M.$$.fragment,m),z(w.block),k=!0)},o(m){C($.$$.fragment,m),C(q.$$.fragment,m),C(L.$$.fragment,m),C(M.$$.fragment,m);for(let c=0;c<3;c+=1){const N=w.blocks[c];C(N)}k=!1},d(m){m&&(d(e),d(u),d(s),d(P),d(g),d(se),d(j)),Y($),Y(q),Y(L),Y(M),w.block.d(),w.token=null,w=null}}}function Ze(t,e,r){let a,l,i,o,u,s,{data:f}=e;return t.$$set=$=>{"data"in $&&r(0,f=$.data)},t.$$.update=()=>{t.$$.dirty&1&&r(6,a=Ge(f.data.image)),t.$$.dirty&1&&r(5,l=f.data.name),t.$$.dirty&1&&r(4,i=f.data.id),t.$$.dirty&1&&r(3,o=f.data.description),t.$$.dirty&1&&r(2,u=f.data.link),t.$$.dirty&1&&r(1,s=f.searchterm)},[f,s,u,o,i,l,a]}class it extends Be{constructor(e){super(),Le(this,e,Ze,Ye,Ce,{data:0})}}export{it as component,nt as universal};
