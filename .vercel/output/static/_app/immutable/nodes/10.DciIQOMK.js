import{s as $e}from"../chunks/supabaseClient.CD4MZNEJ.js";import{s as ze,e as _,a as E,t as K,N as Ce,c as h,b as $,f as c,g as P,d as Q,O as Te,p as Ae,l as n,M as ue,i as p,h as d,j as be,n as j,m as Ee,o as Be}from"../chunks/scheduler.DXrhz23f.js";import{h as Pe,u as Ge}from"../chunks/await_block.i5jR_Kl1.js";import{e as De}from"../chunks/each.D6YF6ztN.js";import{S as Le,i as Me,b as N,d as R,m as Y,t as k,a as D,e as J,g as qe,c as Fe}from"../chunks/index.Bmfu-QDF.js";import{B as Ve}from"../chunks/Badge.D-t_uZOM.js";import{B as fe}from"../chunks/Button.C0UqRlq2.js";import{S as He}from"../chunks/Spinner.D0BCRiYv.js";import{g as Oe,P as Ue}from"../chunks/product.CMrH7TNJ.js";async function Ne({params:a}){let e=a.productid,t="name, image, description, link, products_categories(category_id)",{data:r}=await $e.from("products").select(t).eq("id",e).limit(1).single(),l=r.name;async function u(V){let I=V.split(" ");return I=I.slice(0,3),I.join(" ")}let s=await u(l),m=r.products_categories[0].category_id;async function i(V,I){let{data:v}=await $e.from("products_categories").select("product_id").eq("category_id",V).range(0,9),z=v.map(B=>B.product_id);return z=z.filter(B=>B!=I),z}async function g(V){let{data:I}=await $e.from("products").select().in("id",V);return I}let A=await i(m,e);return{data:r,searchterm:s,streamed:{similarProducts:g(A)}}}const ut=Object.freeze(Object.defineProperty({__proto__:null,load:Ne},Symbol.toStringTag,{value:"Module"}));function Se(a,e,t){const r=a.slice();return r[7]=e[t],r}function Re(a){let e,t;return{c(){e=K(a[4]),t=K(" ðŸ›’")},l(r){e=Q(r,a[4]),t=Q(r," ðŸ›’")},m(r,l){p(r,e,l),p(r,t,l)},p(r,l){l&16&&be(e,r[4])},d(r){r&&(c(e),c(t))}}}function Ye(a){let e;return{c(){e=K("Green")},l(t){e=Q(t,"Green")},m(t,r){p(t,e,r)},d(t){t&&c(e)}}}function Je(a){let e;return{c(){e=K("Yellow")},l(t){e=Q(t,"Yellow")},m(t,r){p(t,e,r)},d(t){t&&c(e)}}}function Ke(a){let e,t;return{c(){e=K(a[4]),t=K(" ðŸ›’")},l(r){e=Q(r,a[4]),t=Q(r," ðŸ›’")},m(r,l){p(r,e,l),p(r,t,l)},p(r,l){l&16&&be(e,r[4])},d(r){r&&(c(e),c(t))}}}function Qe(a){let e,t;return{c(){e=_("img"),this.h()},l(r){e=h(r,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){n(e,"alt","amazon logo"),n(e,"width","100"),ue(e.src,t="/images/logos/Amazon.de-Logo.svg.png")||n(e,"src",t)},m(r,l){p(r,e,l)},p:j,d(r){r&&c(e)}}}function We(a){let e,t;return{c(){e=_("img"),this.h()},l(r){e=h(r,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){n(e,"alt","ebay logo"),n(e,"width","100"),ue(e.src,t="/images/logos/EBay_logo.png")||n(e,"src",t)},m(r,l){p(r,e,l)},p:j,d(r){r&&c(e)}}}function Xe(a){return{c:j,l:j,m:j,p:j,i:j,o:j,d:j}}function Ze(a){let e,t,r=De(a[6]),l=[];for(let s=0;s<r.length;s+=1)l[s]=je(Se(a,r,s));const u=s=>D(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Ee()},l(s){for(let m=0;m<l.length;m+=1)l[m].l(s);e=Ee()},m(s,m){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,m);p(s,e,m),t=!0},p(s,m){if(m&1){r=De(s[6]);let i;for(i=0;i<r.length;i+=1){const g=Se(s,r,i);l[i]?(l[i].p(g,m),k(l[i],1)):(l[i]=je(g),l[i].c(),k(l[i],1),l[i].m(e.parentNode,e))}for(qe(),i=r.length;i<l.length;i+=1)u(i);Fe()}},i(s){if(!t){for(let m=0;m<r.length;m+=1)k(l[m]);t=!0}},o(s){l=l.filter(Boolean);for(let m=0;m<l.length;m+=1)D(l[m]);t=!1},d(s){s&&c(e),Be(l,s)}}}function je(a){let e,t,r;return t=new Ue({props:{product:{id:a[7].id,name:a[7].name,img:a[7].image}}}),{c(){e=_("li"),N(t.$$.fragment),this.h()},l(l){e=h(l,"LI",{class:!0});var u=$(e);R(t.$$.fragment,u),u.forEach(c),this.h()},h(){n(e,"class","my-2")},m(l,u){p(l,e,u),Y(t,e,null),r=!0},p(l,u){const s={};u&1&&(s.product={id:l[7].id,name:l[7].name,img:l[7].image}),t.$set(s)},i(l){r||(k(t.$$.fragment,l),r=!0)},o(l){D(t.$$.fragment,l),r=!1},d(l){l&&c(e),J(t)}}}function xe(a){let e,t,r,l;return t=new He({}),{c(){e=_("div"),N(t.$$.fragment),r=K(`
                Loading similar Products ...`),this.h()},l(u){e=h(u,"DIV",{class:!0});var s=$(e);R(t.$$.fragment,s),r=Q(s,`
                Loading similar Products ...`),s.forEach(c),this.h()},h(){n(e,"class","loading")},m(u,s){p(u,e,s),Y(t,e,null),d(e,r),l=!0},p:j,i(u){l||(k(t.$$.fragment,u),l=!0)},o(u){D(t.$$.fragment,u),l=!1},d(u){u&&c(e),J(t)}}}function et(a){let e,t,r,l,u,s,m,i,g,A,V,I,v,z,B,G,me,L,de,W,S,M,q,ge,F,H,se,_e,O,U,ne,he,ee,oe,C,X,ve="Ã„hnliche Produkte:",pe,Z,ie,w;m=new fe({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Re]},$$scope:{ctx:a}}}),G=new Ve({props:{large:!0,color:"green",$$slots:{default:[Ye]},$$scope:{ctx:a}}}),L=new Ve({props:{large:!0,color:"yellow",$$slots:{default:[Je]},$$scope:{ctx:a}}}),q=new fe({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Ke]},$$scope:{ctx:a}}}),H=new fe({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[Qe]},$$scope:{ctx:a}}}),U=new fe({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[We]},$$scope:{ctx:a}}});let b={ctx:a,current:null,token:null,hasCatch:!1,pending:xe,then:Ze,catch:Xe,value:6,blocks:[,,,]};return Pe(ie=a[0].streamed.similarProducts,b),{c(){e=_("div"),t=_("img"),l=E(),u=_("div"),s=_("a"),N(m.$$.fragment),i=E(),g=_("div"),A=_("h2"),V=K(a[4]),I=E(),v=_("div"),z=new Ce(!1),B=E(),N(G.$$.fragment),me=E(),N(L.$$.fragment),de=E(),W=_("div"),S=_("div"),M=_("a"),N(q.$$.fragment),ge=E(),F=_("a"),N(H.$$.fragment),_e=E(),O=_("a"),N(U.$$.fragment),he=E(),ee=_("div"),oe=E(),C=_("div"),X=_("div"),X.textContent=ve,pe=E(),Z=_("ul"),b.block.c(),this.h()},l(f){e=h(f,"DIV",{class:!0});var o=$(e);t=h(o,"IMG",{class:!0,width:!0,alt:!0,src:!0}),o.forEach(c),l=P(f),u=h(f,"DIV",{class:!0});var x=$(u);s=h(x,"A",{href:!0,target:!0});var ae=$(s);R(m.$$.fragment,ae),ae.forEach(c),x.forEach(c),i=P(f),g=h(f,"DIV",{class:!0});var y=$(g);A=h(y,"H2",{class:!0});var re=$(A);V=Q(re,a[4]),re.forEach(c),I=P(y),v=h(y,"DIV",{id:!0,class:!0});var T=$(v);z=Te(T,!1),B=P(T),R(G.$$.fragment,T),me=P(T),R(L.$$.fragment,T),T.forEach(c),de=P(y),W=h(y,"DIV",{id:!0,class:!0});var le=$(W);S=h(le,"DIV",{class:!0});var te=$(S);M=h(te,"A",{href:!0,target:!0});var we=$(M);R(q.$$.fragment,we),we.forEach(c),ge=P(te),F=h(te,"A",{href:!0,target:!0});var ke=$(F);R(H.$$.fragment,ke),ke.forEach(c),_e=P(te),O=h(te,"A",{href:!0,target:!0});var Ie=$(O);R(U.$$.fragment,Ie),Ie.forEach(c),te.forEach(c),le.forEach(c),he=P(y),ee=h(y,"DIV",{id:!0,class:!0}),$(ee).forEach(c),y.forEach(c),oe=P(f),C=h(f,"DIV",{class:!0});var ce=$(C);X=h(ce,"DIV",{class:!0,"data-svelte-h":!0}),Ae(X)!=="svelte-g4vgml"&&(X.textContent=ve),pe=P(ce),Z=h(ce,"UL",{class:!0});var ye=$(Z);b.block.l(ye),ye.forEach(c),ce.forEach(c),this.h()},h(){n(t,"class","py-10"),n(t,"width","400"),n(t,"alt",a[4]),ue(t.src,r=a[5])||n(t,"src",r),n(e,"class","w-full flex flex-row bg-gray-100 justify-center"),n(s,"href",a[2]),n(s,"target","_blank"),n(u,"class","my-5 pb-10 flex flex-col items-center top-0 sticky "),n(A,"class","bg-yellow-300 p-2"),z.a=B,n(v,"id","desc"),n(v,"class","p-5"),n(M,"href",a[2]),n(M,"target","_blank"),n(F,"href",se="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+a[1]),n(F,"target","_blank"),n(O,"href",ne="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+a[1]+"&_sacat=0"),n(O,"target","_blank"),n(S,"class","my-5 pb-10 flex flex-col items-center space-y-5"),n(W,"id","links"),n(W,"class","w-5/6 m-auto bg-zinc-50 border-zinc-200 border-2 p-5"),n(ee,"id","abstand"),n(ee,"class","h-5"),n(g,"class","bg-yellow-100"),n(X,"class","w-full my-5 bg-lime-300 p-3 text-lg font-bold text-center"),n(Z,"class","grid grid-cols-2 md:grid-cols-3"),n(C,"class","bg-lime-100")},m(f,o){p(f,e,o),d(e,t),p(f,l,o),p(f,u,o),d(u,s),Y(m,s,null),p(f,i,o),p(f,g,o),d(g,A),d(A,V),d(g,I),d(g,v),z.m(a[3],v),d(v,B),Y(G,v,null),d(v,me),Y(L,v,null),d(g,de),d(g,W),d(W,S),d(S,M),Y(q,M,null),d(S,ge),d(S,F),Y(H,F,null),d(S,_e),d(S,O),Y(U,O,null),d(g,he),d(g,ee),p(f,oe,o),p(f,C,o),d(C,X),d(C,pe),d(C,Z),b.block.m(Z,b.anchor=null),b.mount=()=>Z,b.anchor=null,w=!0},p(f,[o]){a=f,(!w||o&16)&&n(t,"alt",a[4]),(!w||o&32&&!ue(t.src,r=a[5]))&&n(t,"src",r);const x={};o&1040&&(x.$$scope={dirty:o,ctx:a}),m.$set(x),(!w||o&4)&&n(s,"href",a[2]),(!w||o&16)&&be(V,a[4]),(!w||o&8)&&z.p(a[3]);const ae={};o&1024&&(ae.$$scope={dirty:o,ctx:a}),G.$set(ae);const y={};o&1024&&(y.$$scope={dirty:o,ctx:a}),L.$set(y);const re={};o&1040&&(re.$$scope={dirty:o,ctx:a}),q.$set(re),(!w||o&4)&&n(M,"href",a[2]);const T={};o&1024&&(T.$$scope={dirty:o,ctx:a}),H.$set(T),(!w||o&2&&se!==(se="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+a[1]))&&n(F,"href",se);const le={};o&1024&&(le.$$scope={dirty:o,ctx:a}),U.$set(le),(!w||o&2&&ne!==(ne="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+a[1]+"&_sacat=0"))&&n(O,"href",ne),b.ctx=a,o&1&&ie!==(ie=a[0].streamed.similarProducts)&&Pe(ie,b)||Ge(b,a,o)},i(f){w||(k(m.$$.fragment,f),k(G.$$.fragment,f),k(L.$$.fragment,f),k(q.$$.fragment,f),k(H.$$.fragment,f),k(U.$$.fragment,f),k(b.block),w=!0)},o(f){D(m.$$.fragment,f),D(G.$$.fragment,f),D(L.$$.fragment,f),D(q.$$.fragment,f),D(H.$$.fragment,f),D(U.$$.fragment,f);for(let o=0;o<3;o+=1){const x=b.blocks[o];D(x)}w=!1},d(f){f&&(c(e),c(l),c(u),c(i),c(g),c(oe),c(C)),J(m),J(G),J(L),J(q),J(H),J(U),b.block.d(),b.token=null,b=null}}}function tt(a,e,t){let r,l,u,s,m,{data:i}=e;return console.log("***************"),a.$$set=g=>{"data"in g&&t(0,i=g.data)},a.$$.update=()=>{a.$$.dirty&1&&t(5,r=Oe(i.data.image)),a.$$.dirty&1&&t(4,l=i.data.name),a.$$.dirty&1&&t(3,u=i.data.description),a.$$.dirty&1&&t(2,s=i.data.link),a.$$.dirty&1&&t(1,m=i.searchterm)},[i,m,s,u,l,r]}class mt extends Le{constructor(e){super(),Me(this,e,tt,et,ze,{data:0})}}export{mt as component,ut as universal};
