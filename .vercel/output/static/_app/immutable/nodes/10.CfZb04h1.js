import{c as Ie,b as Ce}from"../chunks/books.C4behfhn.js";import{s as ye}from"../chunks/supabaseClient.CCJhsT86.js";import{s as De,e as h,a as H,t as ie,H as je,o as ze,c as _,f,g as L,b as w,d as ce,r as Ae,l as qe,m as c,u as Z,h as d,i as k,j as He,q as ge,n as ae}from"../chunks/scheduler.CzaLFZzx.js";import{S as Le,i as Me,c as x,a as ee,m as te,t as B,e as de,b as M,d as le,g as pe}from"../chunks/index.C2gRMFDs.js";import{e as Y}from"../chunks/each.D6YF6ztN.js";import{B as fe}from"../chunks/Button.rvaLcshS.js";import{g as Te}from"../chunks/getBookImg.B3agDJL6.js";import{B as Ve}from"../chunks/book.BPTvf_Y4.js";import{n as be}from"../chunks/nl2br.vwt-lStt.js";function Se(a){return/^\d+$/.test(a)}async function Fe(a){try{let t="id";Se(a)||(t="slug");const{data:l}=await ye.from("books").select().eq(t,a).limit(1).single();return{data:l}}catch{return{}}}async function Ge(a){try{const{data:t}=await ye.from("booklinks").select("label, link").eq("book_id",a);return t}catch{return{}}}async function Ue({params:a}){let t=a.bookId,{data:l}=await Fe(t),s=l.id;const o=await Ge(s),i=await Ie(s);console.log("cat id ist ",i);let p=await Ce(i,12);return console.log("similarBooks ist ",p),{data:l,links:o,similarBooks:p}}const lt=Object.freeze(Object.defineProperty({__proto__:null,load:Ue},Symbol.toStringTag,{value:"Module"}));function $e(a,t,l){const s=a.slice();return s[0]=t[l],s}function ke(a,t,l){const s=a.slice();return s[9]=t[l],s}function Oe(a){let t=a[9].label+"",l,s;return{c(){l=ie(t),s=ie(" ðŸ›’")},l(o){l=ce(o,t),s=ce(o," ðŸ›’")},m(o,i){k(o,l,i),k(o,s,i)},p:ae,d(o){o&&(f(l),f(s))}}}function ve(a){let t,l,s;return l=new fe({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Oe]},$$scope:{ctx:a}}}),{c(){t=h("a"),x(l.$$.fragment),this.h()},l(o){t=_(o,"A",{href:!0,target:!0});var i=w(t);ee(l.$$.fragment,i),i.forEach(f),this.h()},h(){c(t,"href",a[9].link),c(t,"target","_blank")},m(o,i){k(o,t,i),te(l,t,null),s=!0},p(o,i){const p={};i&4096&&(p.$$scope={dirty:i,ctx:o}),l.$set(p)},i(o){s||(B(l.$$.fragment,o),s=!0)},o(o){M(l.$$.fragment,o),s=!1},d(o){o&&f(t),le(l)}}}function Pe(a){let t,l;return{c(){t=h("img"),this.h()},l(s){t=_(s,"IMG",{width:!0,alt:!0,src:!0}),this.h()},h(){c(t,"width","100"),c(t,"alt","Amazon Logo"),Z(t.src,l="/images/logos/Amazon.de-Logo.svg.png")||c(t,"src",l)},m(s,o){k(s,t,o)},p:ae,d(s){s&&f(t)}}}function Re(a){let t,l;return{c(){t=h("img"),this.h()},l(s){t=_(s,"IMG",{width:!0,alt:!0,src:!0}),this.h()},h(){c(t,"width","100"),c(t,"alt","Ebay Logo"),Z(t.src,l="/images/logos/EBay_logo.png")||c(t,"src",l)},m(s,o){k(s,t,o)},p:ae,d(s){s&&f(t)}}}function we(a){let t,l,s;return l=new Ve({props:{book:{slug:a[0].slug,id:a[0].id,title:a[0].title,img:a[0].img}}}),{c(){t=h("li"),x(l.$$.fragment),this.h()},l(o){t=_(o,"LI",{class:!0});var i=w(t);ee(l.$$.fragment,i),i.forEach(f),this.h()},h(){c(t,"class","my-2")},m(o,i){k(o,t,i),te(l,t,null),s=!0},p:ae,i(o){s||(B(l.$$.fragment,o),s=!0)},o(o){M(l.$$.fragment,o),s=!1},d(o){o&&f(t),le(l)}}}function Je(a){let t,l,s,o,i,p,y,b,I,T,se,O,R,J=be(a[1])+"",oe,v,K,C,D,N,re,j,z,Q,W,A,V,ue="Ã„hnliche BÃ¼cher",ne,S,$;document.title=t=a[3];let F=Y(a[4]),u=[];for(let e=0;e<F.length;e+=1)u[e]=ve(ke(a,F,e));const Be=e=>M(u[e],1,1,()=>{u[e]=null});D=new fe({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[Pe]},$$scope:{ctx:a}}}),z=new fe({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[Re]},$$scope:{ctx:a}}});let G=Y(a[5]),m=[];for(let e=0;e<G.length;e+=1)m[e]=we($e(a,G,e));const Ee=e=>M(m[e],1,1,()=>{m[e]=null});return{c(){l=h("meta"),s=H(),o=h("div"),i=h("img"),y=H(),b=h("div"),I=h("h2"),T=ie(a[3]),se=H(),O=h("div"),R=new je(!1),oe=H(),v=h("div");for(let e=0;e<u.length;e+=1)u[e].c();K=H(),C=h("a"),x(D.$$.fragment),re=H(),j=h("a"),x(z.$$.fragment),W=H(),A=h("div"),V=h("h2"),V.textContent=ue,ne=H(),S=h("ul");for(let e=0;e<m.length;e+=1)m[e].c();this.h()},l(e){const r=ze("svelte-5raxrm",document.head);l=_(r,"META",{name:!0,content:!0}),r.forEach(f),s=L(e),o=_(e,"DIV",{class:!0});var g=w(o);i=_(g,"IMG",{class:!0,width:!0,alt:!0,src:!0}),g.forEach(f),y=L(e),b=_(e,"DIV",{class:!0});var E=w(b);I=_(E,"H2",{class:!0});var n=w(I);T=ce(n,a[3]),n.forEach(f),se=L(E),O=_(E,"DIV",{class:!0});var q=w(O);R=Ae(q,!1),q.forEach(f),oe=L(E),v=_(E,"DIV",{class:!0});var P=w(v);for(let U=0;U<u.length;U+=1)u[U].l(P);K=L(P),C=_(P,"A",{href:!0,target:!0});var me=w(C);ee(D.$$.fragment,me),me.forEach(f),re=L(P),j=_(P,"A",{href:!0,target:!0});var he=w(j);ee(z.$$.fragment,he),he.forEach(f),P.forEach(f),E.forEach(f),W=L(e),A=_(e,"DIV",{});var X=w(A);V=_(X,"H2",{class:!0,"data-svelte-h":!0}),qe(V)!=="svelte-1suzyxr"&&(V.textContent=ue),ne=L(X),S=_(X,"UL",{class:!0});var _e=w(S);for(let U=0;U<m.length;U+=1)m[U].l(_e);_e.forEach(f),X.forEach(f),this.h()},h(){c(l,"name","description"),c(l,"content",a[1]),c(i,"class","py-10"),c(i,"width","400"),c(i,"alt",a[3]),Z(i.src,p=a[2])||c(i,"src",p),c(o,"class","w-full flex flex-row bg-gray-100 justify-center"),c(I,"class","bg-yellow-300 p-2 text-center"),R.a=null,c(O,"class","p-5"),c(C,"href",N="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+a[3]),c(C,"target","_blank"),c(j,"href",Q="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+a[3]+"&_sacat=0"),c(j,"target","_blank"),c(v,"class","my-5 pb-10 flex flex-col items-center "),c(b,"class","bg-yellow-100"),c(V,"class","bg-gray-300 p-2 text-center"),c(S,"class","grid grid-cols-2 md:grid-cols-3")},m(e,r){d(document.head,l),k(e,s,r),k(e,o,r),d(o,i),k(e,y,r),k(e,b,r),d(b,I),d(I,T),d(b,se),d(b,O),R.m(J,O),d(b,oe),d(b,v);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(v,null);d(v,K),d(v,C),te(D,C,null),d(v,re),d(v,j),te(z,j,null),k(e,W,r),k(e,A,r),d(A,V),d(A,ne),d(A,S);for(let g=0;g<m.length;g+=1)m[g]&&m[g].m(S,null);$=!0},p(e,[r]){if((!$||r&8)&&t!==(t=e[3])&&(document.title=t),(!$||r&2)&&c(l,"content",e[1]),(!$||r&8)&&c(i,"alt",e[3]),(!$||r&4&&!Z(i.src,p=e[2]))&&c(i,"src",p),(!$||r&8)&&He(T,e[3]),(!$||r&2)&&J!==(J=be(e[1])+"")&&R.p(J),r&16){F=Y(e[4]);let n;for(n=0;n<F.length;n+=1){const q=ke(e,F,n);u[n]?(u[n].p(q,r),B(u[n],1)):(u[n]=ve(q),u[n].c(),B(u[n],1),u[n].m(v,K))}for(pe(),n=F.length;n<u.length;n+=1)Be(n);de()}const g={};r&4096&&(g.$$scope={dirty:r,ctx:e}),D.$set(g),(!$||r&8&&N!==(N="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+e[3]))&&c(C,"href",N);const E={};if(r&4096&&(E.$$scope={dirty:r,ctx:e}),z.$set(E),(!$||r&8&&Q!==(Q="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+e[3]+"&_sacat=0"))&&c(j,"href",Q),r&32){G=Y(e[5]);let n;for(n=0;n<G.length;n+=1){const q=$e(e,G,n);m[n]?(m[n].p(q,r),B(m[n],1)):(m[n]=we(q),m[n].c(),B(m[n],1),m[n].m(S,null))}for(pe(),n=G.length;n<m.length;n+=1)Ee(n);de()}},i(e){if(!$){for(let r=0;r<F.length;r+=1)B(u[r]);B(D.$$.fragment,e),B(z.$$.fragment,e);for(let r=0;r<G.length;r+=1)B(m[r]);$=!0}},o(e){u=u.filter(Boolean);for(let r=0;r<u.length;r+=1)M(u[r]);M(D.$$.fragment,e),M(z.$$.fragment,e),m=m.filter(Boolean);for(let r=0;r<m.length;r+=1)M(m[r]);$=!1},d(e){e&&(f(s),f(o),f(y),f(b),f(W),f(A)),f(l),ge(u,e),le(D),le(z),ge(m,e)}}}function Ke(a,t,l){let s,o,i,p,{data:y}=t,b=y.links,I=y.similarBooks;return a.$$set=T=>{"data"in T&&l(6,y=T.data)},a.$$.update=()=>{a.$$.dirty&64&&l(0,s=y.data),a.$$.dirty&1&&l(3,o=s.title),a.$$.dirty&1&&l(2,i=Te(s.img[0],s.id,"books")),a.$$.dirty&1&&l(1,p=s.desc)},[s,p,i,o,b,I,y]}class at extends Le{constructor(t){super(),Me(this,t,Ke,Je,De,{data:6})}}export{at as component,lt as universal};
