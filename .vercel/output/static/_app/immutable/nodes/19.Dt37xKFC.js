import{s as be}from"../chunks/supabaseClient.CCJhsT86.js";import{s as Me,e as g,a as y,H as we,t as ee,o as He,c as h,f as c,g as P,b as v,r as ke,d as te,l as Fe,m as o,P as me,h as _,i as $,j as Ee,n as T,p as je,q as Ge}from"../chunks/scheduler.D78XxIca.js";import{h as Ae,u as Ue}from"../chunks/await_block.L093588W.js";import{e as Ce}from"../chunks/each.D6YF6ztN.js";import{S as Oe,i as Re,c as X,a as Y,m as Z,t as j,b as q,d as x,g as Ne,e as Je}from"../chunks/index.VYeZ3G8j.js";import{B as fe}from"../chunks/Button.CrDj8X0S.js";import{S as Ke}from"../chunks/Spinner.BPfDIiws.js";import{g as de,a as Qe,P as We}from"../chunks/product.B8w57Y_i.js";import{r as qe}from"../chunks/helper.ByxkrZMk.js";async function Xe({params:t}){let e=t.productid,r="id, name, image, description, link, products_categories(category_id), slug",{data:a}=await be.from("products").select(r).eq("slug",e).limit(1).single();console.log("data ist ",a);let l=a.name;console.log("product: ",l,"id: ",e),a.description;async function d(b){let w=b.split(" ");return w=w.slice(0,3),w.join(" ")}let s=await d(l),f=a.products_categories[0].category_id;async function n(b,w){let{data:D}=await be.from("products_categories").select("product_id").eq("category_id",b).range(0,9),V=D.map(B=>B.product_id);return V=V.filter(B=>B!=w),V}async function u(b){let{data:w}=await be.from("products").select().in("id",b);return w}let p=await n(f,e);return{data:a,searchterm:s,streamed:{similarProducts:u(p)}}}const gt=Object.freeze(Object.defineProperty({__proto__:null,load:Xe},Symbol.toStringTag,{value:"Module"}));function Be(t,e,r){const a=t.slice();return a[8]=e[r],a}function Ye(t){let e,r;return{c(){e=ee(t[4]),r=ee(" ðŸ›’")},l(a){e=te(a,t[4]),r=te(a," ðŸ›’")},m(a,l){$(a,e,l),$(a,r,l)},p(a,l){l&16&&Ee(e,a[4])},d(a){a&&(c(e),c(r))}}}function Ze(t){let e,r;return{c(){e=ee(t[4]),r=ee(" ðŸ›’")},l(a){e=te(a,t[4]),r=te(a," ðŸ›’")},m(a,l){$(a,e,l),$(a,r,l)},p(a,l){l&16&&Ee(e,a[4])},d(a){a&&(c(e),c(r))}}}function xe(t){let e,r;return{c(){e=g("img"),this.h()},l(a){e=h(a,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){o(e,"alt","amazon logo"),o(e,"width","100"),me(e.src,r="/images/logos/Amazon.de-Logo.svg.png")||o(e,"src",r)},m(a,l){$(a,e,l)},p:T,d(a){a&&c(e)}}}function et(t){let e,r;return{c(){e=g("img"),this.h()},l(a){e=h(a,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){o(e,"alt","ebay logo"),o(e,"width","100"),me(e.src,r="/images/logos/EBay_logo.png")||o(e,"src",r)},m(a,l){$(a,e,l)},p:T,d(a){a&&c(e)}}}function tt(t){return{c:T,l:T,m:T,p:T,i:T,o:T,d:T}}function at(t){let e,r,a=Ce(t[7]),l=[];for(let s=0;s<a.length;s+=1)l[s]=Le(Be(t,a,s));const d=s=>q(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=je()},l(s){for(let f=0;f<l.length;f+=1)l[f].l(s);e=je()},m(s,f){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(s,f);$(s,e,f),r=!0},p(s,f){if(f&1){a=Ce(s[7]);let n;for(n=0;n<a.length;n+=1){const u=Be(s,a,n);l[n]?(l[n].p(u,f),j(l[n],1)):(l[n]=Le(u),l[n].c(),j(l[n],1),l[n].m(e.parentNode,e))}for(Ne(),n=a.length;n<l.length;n+=1)d(n);Je()}},i(s){if(!r){for(let f=0;f<a.length;f+=1)j(l[f]);r=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)q(l[f]);r=!1},d(s){s&&c(e),Ge(l,s)}}}function Le(t){let e,r,a,l=de(t[8].image)+"",d,s,f,n;return s=new We({props:{product:{id:t[8].id,name:t[8].name,img:t[8].image,price:t[8].price}}}),{c(){e=g("li"),r=g("div"),a=new we(!1),d=y(),X(s.$$.fragment),f=y(),this.h()},l(u){e=h(u,"LI",{class:!0});var p=v(e);r=h(p,"DIV",{class:!0});var b=v(r);a=ke(b,!1),b.forEach(c),d=P(p),Y(s.$$.fragment,p),f=P(p),p.forEach(c),this.h()},h(){a.a=null,o(r,"class","absolute right-10"),o(e,"class","my-2 relative ")},m(u,p){$(u,e,p),_(e,r),a.m(l,r),_(e,d),Z(s,e,null),_(e,f),n=!0},p(u,p){(!n||p&1)&&l!==(l=de(u[8].image)+"")&&a.p(l);const b={};p&1&&(b.product={id:u[8].id,name:u[8].name,img:u[8].image,price:u[8].price}),s.$set(b)},i(u){n||(j(s.$$.fragment,u),n=!0)},o(u){q(s.$$.fragment,u),n=!1},d(u){u&&c(e),x(s)}}}function lt(t){let e,r,a,l;return r=new Ke({}),{c(){e=g("div"),X(r.$$.fragment),a=ee(`
                Loading similar Products ...`),this.h()},l(d){e=h(d,"DIV",{class:!0});var s=v(e);Y(r.$$.fragment,s),a=te(s,`
                Loading similar Products ...`),s.forEach(c),this.h()},h(){o(e,"class","loading")},m(d,s){$(d,e,s),Z(r,e,null),_(e,a),l=!0},p:T,i(d){l||(j(r.$$.fragment,d),l=!0)},o(d){q(r.$$.fragment,d),l=!1},d(d){d&&c(e),x(r)}}}function rt(t){let e,r,a,l,d,s,f=de(t[5])+"",n,u,p,b,w,D,V,B,I,K,se,_e,O,ae,ge,R,S,L,M,he,H,F,oe,pe,G,U,ne,ve,Q,ie,A,N,Ie="Ã„hnliche Produkte:",$e,J,ce,k;document.title=e=t[4],V=new fe({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Ye]},$$scope:{ctx:t}}}),M=new fe({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Ze]},$$scope:{ctx:t}}}),F=new fe({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[xe]},$$scope:{ctx:t}}}),U=new fe({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[et]},$$scope:{ctx:t}}});let E={ctx:t,current:null,token:null,hasCatch:!1,pending:lt,then:at,catch:tt,value:7,blocks:[,,,]};return Ae(ce=t[0].streamed.similarProducts,E),{c(){r=g("meta"),l=y(),d=g("div"),s=new we(!1),n=y(),u=g("img"),b=y(),w=g("div"),D=g("a"),X(V.$$.fragment),B=y(),I=g("div"),K=g("h2"),se=ee(t[4]),_e=y(),O=g("div"),ae=new we(!1),ge=y(),R=g("div"),S=g("div"),L=g("a"),X(M.$$.fragment),he=y(),H=g("a"),X(F.$$.fragment),pe=y(),G=g("a"),X(U.$$.fragment),ve=y(),Q=g("div"),ie=y(),A=g("div"),N=g("div"),N.textContent=Ie,$e=y(),J=g("ul"),E.block.c(),this.h()},l(m){const i=He("svelte-wubmel",document.head);r=h(i,"META",{name:!0,content:!0}),i.forEach(c),l=P(m),d=h(m,"DIV",{class:!0});var C=v(d);s=ke(C,!1),n=P(C),u=h(C,"IMG",{class:!0,width:!0,alt:!0,src:!0}),C.forEach(c),b=P(m),w=h(m,"DIV",{class:!0});var le=v(w);D=h(le,"A",{href:!0,target:!0});var re=v(D);Y(V.$$.fragment,re),re.forEach(c),le.forEach(c),B=P(m),I=h(m,"DIV",{class:!0});var z=v(I);K=h(z,"H2",{class:!0});var ye=v(K);se=te(ye,t[4]),ye.forEach(c),_e=P(z),O=h(z,"DIV",{id:!0,class:!0});var Pe=v(O);ae=ke(Pe,!1),Pe.forEach(c),ge=P(z),R=h(z,"DIV",{id:!0,class:!0});var Ve=v(R);S=h(Ve,"DIV",{class:!0});var W=v(S);L=h(W,"A",{href:!0,target:!0});var De=v(L);Y(M.$$.fragment,De),De.forEach(c),he=P(W),H=h(W,"A",{href:!0,target:!0});var ze=v(H);Y(F.$$.fragment,ze),ze.forEach(c),pe=P(W),G=h(W,"A",{href:!0,target:!0});var Se=v(G);Y(U.$$.fragment,Se),Se.forEach(c),W.forEach(c),Ve.forEach(c),ve=P(z),Q=h(z,"DIV",{id:!0,class:!0}),v(Q).forEach(c),z.forEach(c),ie=P(m),A=h(m,"DIV",{class:!0});var ue=v(A);N=h(ue,"DIV",{class:!0,"data-svelte-h":!0}),Fe(N)!=="svelte-g4vgml"&&(N.textContent=Ie),$e=P(ue),J=h(ue,"UL",{class:!0});var Te=v(J);E.block.l(Te),Te.forEach(c),ue.forEach(c),this.h()},h(){o(r,"name","description"),o(r,"content",a=qe(t[3])),s.a=n,o(u,"class","py-10"),o(u,"width","400"),o(u,"alt",t[4]),me(u.src,p=t[5])||o(u,"src",p),o(d,"class","w-full flex flex-row bg-gray-100 justify-center relative"),o(D,"href",t[2]),o(D,"target","_blank"),o(w,"class","my-5 pb-10 flex flex-col items-center top-0 sticky z-10"),o(K,"class","bg-yellow-300 p-2"),ae.a=null,o(O,"id","desc"),o(O,"class","p-5"),o(L,"href",t[2]),o(L,"target","_blank"),o(H,"href",oe="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+t[1]),o(H,"target","_blank"),o(G,"href",ne="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+t[1]+"&_sacat=0"),o(G,"target","_blank"),o(S,"class","my-5 pb-10 flex flex-col items-center space-y-5"),o(R,"id","links"),o(R,"class","w-5/6 m-auto bg-zinc-50 border-zinc-200 border-2 p-5"),o(Q,"id","abstand"),o(Q,"class","h-5"),o(I,"class","bg-yellow-100"),o(N,"class","w-full my-5 bg-lime-300 p-3 text-lg font-bold text-center"),o(J,"class","grid grid-cols-2 md:grid-cols-3 px-5 pb-20"),o(A,"class","bg-lime-100 h-full ")},m(m,i){_(document.head,r),$(m,l,i),$(m,d,i),s.m(f,d),_(d,n),_(d,u),$(m,b,i),$(m,w,i),_(w,D),Z(V,D,null),$(m,B,i),$(m,I,i),_(I,K),_(K,se),_(I,_e),_(I,O),ae.m(t[3],O),_(I,ge),_(I,R),_(R,S),_(S,L),Z(M,L,null),_(S,he),_(S,H),Z(F,H,null),_(S,pe),_(S,G),Z(U,G,null),_(I,ve),_(I,Q),$(m,ie,i),$(m,A,i),_(A,N),_(A,$e),_(A,J),E.block.m(J,E.anchor=null),E.mount=()=>J,E.anchor=null,k=!0},p(m,[i]){t=m,(!k||i&16)&&e!==(e=t[4])&&(document.title=e),(!k||i&8&&a!==(a=qe(t[3])))&&o(r,"content",a),(!k||i&32)&&f!==(f=de(t[5])+"")&&s.p(f),(!k||i&16)&&o(u,"alt",t[4]),(!k||i&32&&!me(u.src,p=t[5]))&&o(u,"src",p);const C={};i&2064&&(C.$$scope={dirty:i,ctx:t}),V.$set(C),(!k||i&4)&&o(D,"href",t[2]),(!k||i&16)&&Ee(se,t[4]),(!k||i&8)&&ae.p(t[3]);const le={};i&2064&&(le.$$scope={dirty:i,ctx:t}),M.$set(le),(!k||i&4)&&o(L,"href",t[2]);const re={};i&2048&&(re.$$scope={dirty:i,ctx:t}),F.$set(re),(!k||i&2&&oe!==(oe="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+t[1]))&&o(H,"href",oe);const z={};i&2048&&(z.$$scope={dirty:i,ctx:t}),U.$set(z),(!k||i&2&&ne!==(ne="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+t[1]+"&_sacat=0"))&&o(G,"href",ne),E.ctx=t,i&1&&ce!==(ce=t[0].streamed.similarProducts)&&Ae(ce,E)||Ue(E,t,i)},i(m){k||(j(V.$$.fragment,m),j(M.$$.fragment,m),j(F.$$.fragment,m),j(U.$$.fragment,m),j(E.block),k=!0)},o(m){q(V.$$.fragment,m),q(M.$$.fragment,m),q(F.$$.fragment,m),q(U.$$.fragment,m);for(let i=0;i<3;i+=1){const C=E.blocks[i];q(C)}k=!1},d(m){m&&(c(l),c(d),c(b),c(w),c(B),c(I),c(ie),c(A)),c(r),x(V),x(M),x(F),x(U),E.block.d(),E.token=null,E=null}}}function st(t,e,r){let a,l,d,s,f,{data:n}=e;return t.$$set=u=>{"data"in u&&r(0,n=u.data)},t.$$.update=()=>{t.$$.dirty&1&&r(5,a=Qe(n.data.image)),t.$$.dirty&1&&r(4,l=n.data.name),t.$$.dirty&1&&n.data.id,t.$$.dirty&1&&r(3,d=n.data.description),t.$$.dirty&1&&r(2,s=n.data.link),t.$$.dirty&1&&r(1,f=n.searchterm)},[n,f,s,d,l,a]}class ht extends Oe{constructor(e){super(),Re(this,e,st,rt,Me,{data:0})}}export{ht as component,gt as universal};
