import{s as M}from"../chunks/supabaseClient.-wfdu3WJ.js";import{s as x,e as w,t as A,a as S,m as V,c as I,b as E,d as C,f as h,g as B,l as N,i as v,h as k,j,o as X,H as Y,q as Z,A as ee}from"../chunks/scheduler.DfuChs2G.js";import{S as te,i as le,t as H,c as re,a as K,b as ae,d as ne,m as se,e as oe,g as ie}from"../chunks/index.BnyCCVNm.js";import{e as L}from"../chunks/each.D6YF6ztN.js";import{g as O,P as ce}from"../chunks/shops.Dfb--GkT.js";async function fe(a){console.log("getCategoryNameById: ",a);const{data:e,error:r}=await M.from("categories").select("name").eq("id",a).single();return e==null?void 0:e.name}async function ue(a){const{data:e,error:r}=await M.from("categories").select("description").eq("id",a).single();try{return e&&e.description?e.description:null}catch{return null}}const de="false";async function _e({params:a}){const e=a.catid;console.log("Lade Cat Parameter ...",e);const r=await fe(parseInt(e)),t=await ue(parseInt(e));console.log("desc",t);const{data:l,error:s}=await M.from("productswithcategory").select().eq("category_id",e).order("name"),n=l==null?void 0:l.length;return{catid:e,length:n,category:r,description:t,products:l}}const we=Object.freeze(Object.defineProperty({__proto__:null,load:_e,prerender:de},Symbol.toStringTag,{value:"Module"}));function U(a,e,r){const t=a.slice();return t[10]=e[r],t}function F(a,e,r){const t=a.slice();return t[13]=e[r],t}function G(a){let e,r;return{c(){e=w("div"),r=new Y(!1),this.h()},l(t){e=I(t,"DIV",{class:!0});var l=E(e);r=Z(l,!1),l.forEach(h),this.h()},h(){r.a=null,N(e,"class","border-2 p-2 bg-slate-100")},m(t,l){v(t,e,l),r.m(a[4],e)},p(t,l){l&16&&r.p(t[4])},d(t){t&&h(e)}}}function J(a){let e,r,t,l=O(a[13].id)+"",s,n,_,i;return n=new ce({props:{product:{id:a[13].id,name:a[13].name,img:a[13].image}}}),{c(){e=w("div"),r=w("li"),t=new Y(!1),s=S(),ae(n.$$.fragment),_=S(),this.h()},l(u){e=I(u,"DIV",{class:!0});var g=E(e);r=I(g,"LI",{class:!0});var y=E(r);t=Z(y,!1),s=B(y),ne(n.$$.fragment,y),y.forEach(h),_=B(g),g.forEach(h),this.h()},h(){t.a=s,N(r,"class","my-2 relative"),N(e,"class","lazy-load")},m(u,g){v(u,e,g),k(e,r),t.m(l,r),k(r,s),se(n,r,null),k(e,_),i=!0},p(u,g){(!i||g&4)&&l!==(l=O(u[13].id)+"")&&t.p(l);const y={};g&4&&(y.product={id:u[13].id,name:u[13].name,img:u[13].image}),n.$set(y)},i(u){i||(H(n.$$.fragment,u),i=!0)},o(u){K(n.$$.fragment,u),i=!1},d(u){u&&h(e),oe(n)}}}function Q(a){let e,r=L(Array.from({length:a[3]()}).map(W)),t=[];for(let l=0;l<r.length;l+=1)t[l]=R(U(a,r,l));return{c(){e=w("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=I(l,"DIV",{class:!0});var s=E(e);for(let n=0;n<t.length;n+=1)t[n].l(s);s.forEach(h),this.h()},h(){N(e,"class","page-selector svelte-71d3gi")},m(l,s){v(l,e,s);for(let n=0;n<t.length;n+=1)t[n]&&t[n].m(e,null)},p(l,s){if(s&74){r=L(Array.from({length:l[3]()}).map(W));let n;for(n=0;n<r.length;n+=1){const _=U(l,r,n);t[n]?t[n].p(_,s):(t[n]=R(_),t[n].c(),t[n].m(e,null))}for(;n<t.length;n+=1)t[n].d(1);t.length=r.length}},d(l){l&&h(e),X(t,l)}}}function he(a){let e,r=a[10]+"",t,l,s;function n(){return a[8](a[10])}return{c(){e=w("a"),t=A(r),this.h()},l(_){e=I(_,"A",{class:!0});var i=E(e);t=C(i,r),i.forEach(h),this.h()},h(){N(e,"class","page-number svelte-71d3gi")},m(_,i){v(_,e,i),k(e,t),l||(s=ee(e,"click",n),l=!0)},p(_,i){a=_,i&8&&r!==(r=a[10]+"")&&j(t,r)},d(_){_&&h(e),l=!1,s()}}}function me(a){let e,r=a[10]+"",t;return{c(){e=w("span"),t=A(r),this.h()},l(l){e=I(l,"SPAN",{class:!0});var s=E(e);t=C(s,r),s.forEach(h),this.h()},h(){N(e,"class","page-number current-page svelte-71d3gi")},m(l,s){v(l,e,s),k(e,t)},p(l,s){s&8&&r!==(r=l[10]+"")&&j(t,r)},d(l){l&&h(e)}}}function R(a){let e;function r(s,n){return s[10]==s[1]?me:he}let t=r(a),l=t(a);return{c(){l.c(),e=V()},l(s){l.l(s),e=V()},m(s,n){l.m(s,n),v(s,e,n)},p(s,n){t===(t=r(s))&&l?l.p(s,n):(l.d(1),l=t(s),l&&(l.c(),l.m(e.parentNode,e)))},d(s){s&&h(e),l.d(s)}}}function ge(a){let e,r,t,l,s,n,_,i,u,g,y=a[3]()>1,q,b,m=a[4]&&G(a),P=L(a[2]),d=[];for(let o=0;o<P.length;o+=1)d[o]=J(F(a,P,o));const $=o=>K(d[o],1,1,()=>{d[o]=null});let p=y&&Q(a);return{c(){e=w("div"),r=w("h2"),t=A(a[0]),l=A(" Produkte in der Kategorie "),s=A(a[5]),n=A(" gefunden."),_=S(),m&&m.c(),i=S(),u=w("ul");for(let o=0;o<d.length;o+=1)d[o].c();g=S(),p&&p.c(),q=V(),this.h()},l(o){e=I(o,"DIV",{class:!0});var c=E(e);r=I(c,"H2",{class:!0});var f=E(r);t=C(f,a[0]),l=C(f," Produkte in der Kategorie "),s=C(f,a[5]),n=C(f," gefunden."),f.forEach(h),c.forEach(h),_=B(o),m&&m.l(o),i=B(o),u=I(o,"UL",{class:!0});var D=E(u);for(let T=0;T<d.length;T+=1)d[T].l(D);D.forEach(h),g=B(o),p&&p.l(o),q=V(),this.h()},h(){N(r,"class","text-center my-5 p-2"),N(e,"class","w-full"),N(u,"class","grid grid-cols-2 md:grid-cols-3")},m(o,c){v(o,e,c),k(e,r),k(r,t),k(r,l),k(r,s),k(r,n),v(o,_,c),m&&m.m(o,c),v(o,i,c),v(o,u,c);for(let f=0;f<d.length;f+=1)d[f]&&d[f].m(u,null);v(o,g,c),p&&p.m(o,c),v(o,q,c),b=!0},p(o,[c]){if((!b||c&1)&&j(t,o[0]),(!b||c&32)&&j(s,o[5]),o[4]?m?m.p(o,c):(m=G(o),m.c(),m.m(i.parentNode,i)):m&&(m.d(1),m=null),c&4){P=L(o[2]);let f;for(f=0;f<P.length;f+=1){const D=F(o,P,f);d[f]?(d[f].p(D,c),H(d[f],1)):(d[f]=J(D),d[f].c(),H(d[f],1),d[f].m(u,null))}for(ie(),f=P.length;f<d.length;f+=1)$(f);re()}c&8&&(y=o[3]()>1),y?p?p.p(o,c):(p=Q(o),p.c(),p.m(q.parentNode,q)):p&&(p.d(1),p=null)},i(o){if(!b){for(let c=0;c<P.length;c+=1)H(d[c]);b=!0}},o(o){d=d.filter(Boolean);for(let c=0;c<d.length;c+=1)K(d[c]);b=!1},d(o){o&&(h(e),h(_),h(i),h(u),h(g),h(q)),m&&m.d(o),X(d,o),p&&p.d(o)}}}const z=50,W=(a,e)=>e+1;function pe(a,e,r){let t,l,s,n,_,{data:i}=e;console.log("catid: ",i.catid);function u(){return r(2,t=i.products.slice(0,10)),t}t=u();let g=1;async function y(b){r(1,g=b);const m=(g-1)*z,P=m+z;return r(2,t=await i.products.slice(m,P)),t}t=y(1);const q=b=>y(b);return a.$$set=b=>{"data"in b&&r(7,i=b.data)},a.$$.update=()=>{a.$$.dirty&128&&r(2,t=i.products.slice(0,10)),a.$$.dirty&128&&r(0,l=i.products.length),a.$$.dirty&128&&r(5,s=i.category),a.$$.dirty&128&&r(4,n=i.description),a.$$.dirty&1&&r(3,_=()=>Math.ceil(l/z))},[l,g,t,_,n,s,y,i,q]}class Ie extends te{constructor(e){super(),le(this,e,pe,ge,x,{data:7})}}export{Ie as component,we as universal};
