import{s as he}from"../chunks/supabaseClient.CCJhsT86.js";import{s as je,e as p,H as pe,a as I,t as Z,c as $,b as v,r as $e,g as E,f as u,d as x,l as Ce,m as i,T as ce,i as w,h as g,j as ve,n as D,p as Ve,q as Ae}from"../chunks/scheduler.DeroNCAe.js";import{h as De,u as qe}from"../chunks/await_block.aeA-sEYK.js";import{e as ze}from"../chunks/each.D6YF6ztN.js";import{S as Be,i as Le,c as Q,a as W,m as X,t as z,b as j,d as Y,g as He,e as Me}from"../chunks/index.B-He30dL.js";import{B as ne}from"../chunks/Button.BY3CSdr8.js";import{S as Fe}from"../chunks/Spinner.CGR2q5cp.js";import{g as ue,a as Ge,P as Ue}from"../chunks/shops.CftjmkxP.js";async function Oe({params:t}){let e=t.productid,r="id, name, image, description, link, products_categories(category_id)",{data:a}=await he.from("products").select(r).eq("id",e).limit(1).single(),l=a.name;console.log("product: ",l,"id: ",e),a.description;async function f(b){let h=b.split(" ");return h=h.slice(0,3),h.join(" ")}let s=await f(l),d=a.products_categories[0].category_id;async function o(b,h){let{data:S}=await he.from("products_categories").select("product_id").eq("category_id",b).range(0,9),C=S.map(F=>F.product_id);return C=C.filter(F=>F!=h),C}async function n(b){let{data:h}=await he.from("products").select().in("id",b);return h}let _=await o(d,e);return{data:a,searchterm:s,streamed:{similarProducts:n(_)}}}const ot=Object.freeze(Object.defineProperty({__proto__:null,load:Oe},Symbol.toStringTag,{value:"Module"}));function Se(t,e,r){const a=t.slice();return a[8]=e[r],a}function Re(t){let e,r;return{c(){e=Z(t[5]),r=Z(" ðŸ›’")},l(a){e=x(a,t[5]),r=x(a," ðŸ›’")},m(a,l){w(a,e,l),w(a,r,l)},p(a,l){l&32&&ve(e,a[5])},d(a){a&&(u(e),u(r))}}}function Ne(t){let e,r;return{c(){e=Z(t[5]),r=Z(" ðŸ›’")},l(a){e=x(a,t[5]),r=x(a," ðŸ›’")},m(a,l){w(a,e,l),w(a,r,l)},p(a,l){l&32&&ve(e,a[5])},d(a){a&&(u(e),u(r))}}}function Je(t){let e,r;return{c(){e=p("img"),this.h()},l(a){e=$(a,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){i(e,"alt","amazon logo"),i(e,"width","100"),ce(e.src,r="/images/logos/Amazon.de-Logo.svg.png")||i(e,"src",r)},m(a,l){w(a,e,l)},p:D,d(a){a&&u(e)}}}function Ke(t){let e,r;return{c(){e=p("img"),this.h()},l(a){e=$(a,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){i(e,"alt","ebay logo"),i(e,"width","100"),ce(e.src,r="/images/logos/EBay_logo.png")||i(e,"src",r)},m(a,l){w(a,e,l)},p:D,d(a){a&&u(e)}}}function Qe(t){return{c:D,l:D,m:D,p:D,i:D,o:D,d:D}}function We(t){let e,r,a=ze(t[7]),l=[];for(let s=0;s<a.length;s+=1)l[s]=Te(Se(t,a,s));const f=s=>j(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Ve()},l(s){for(let d=0;d<l.length;d+=1)l[d].l(s);e=Ve()},m(s,d){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(s,d);w(s,e,d),r=!0},p(s,d){if(d&1){a=ze(s[7]);let o;for(o=0;o<a.length;o+=1){const n=Se(s,a,o);l[o]?(l[o].p(n,d),z(l[o],1)):(l[o]=Te(n),l[o].c(),z(l[o],1),l[o].m(e.parentNode,e))}for(He(),o=a.length;o<l.length;o+=1)f(o);Me()}},i(s){if(!r){for(let d=0;d<a.length;d+=1)z(l[d]);r=!0}},o(s){l=l.filter(Boolean);for(let d=0;d<l.length;d+=1)j(l[d]);r=!1},d(s){s&&u(e),Ae(l,s)}}}function Te(t){let e,r,a,l=ue(t[8].id)+"",f,s,d,o;return s=new Ue({props:{product:{id:t[8].id,name:t[8].name,img:t[8].image,price:t[8].price}}}),{c(){e=p("li"),r=p("div"),a=new pe(!1),f=I(),Q(s.$$.fragment),d=I(),this.h()},l(n){e=$(n,"LI",{class:!0});var _=v(e);r=$(_,"DIV",{class:!0});var b=v(r);a=$e(b,!1),b.forEach(u),f=E(_),W(s.$$.fragment,_),d=E(_),_.forEach(u),this.h()},h(){a.a=null,i(r,"class","absolute right-10"),i(e,"class","my-2 relative ")},m(n,_){w(n,e,_),g(e,r),a.m(l,r),g(e,f),X(s,e,null),g(e,d),o=!0},p(n,_){(!o||_&1)&&l!==(l=ue(n[8].id)+"")&&a.p(l);const b={};_&1&&(b.product={id:n[8].id,name:n[8].name,img:n[8].image,price:n[8].price}),s.$set(b)},i(n){o||(z(s.$$.fragment,n),o=!0)},o(n){j(s.$$.fragment,n),o=!1},d(n){n&&u(e),Y(s)}}}function Xe(t){let e,r,a,l;return r=new Fe({}),{c(){e=p("div"),Q(r.$$.fragment),a=Z(`
                Loading similar Products ...`),this.h()},l(f){e=$(f,"DIV",{class:!0});var s=v(e);W(r.$$.fragment,s),a=x(s,`
                Loading similar Products ...`),s.forEach(u),this.h()},h(){i(e,"class","loading")},m(f,s){w(f,e,s),X(r,e,null),g(e,a),l=!0},p:D,i(f){l||(z(r.$$.fragment,f),l=!0)},o(f){j(r.$$.fragment,f),l=!1},d(f){f&&u(e),Y(r)}}}function Ye(t){let e,r,a=ue(t[4])+"",l,f,s,d,o,n,_,b,h,S,C,F,G,ee,fe,U,V,A,q,de,B,L,le,me,H,M,re,_e,J,se,T,O,be="Ã„hnliche Produkte:",ge,R,ie,y;_=new ne({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Re]},$$scope:{ctx:t}}}),q=new ne({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Ne]},$$scope:{ctx:t}}}),L=new ne({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[Je]},$$scope:{ctx:t}}}),M=new ne({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[Ke]},$$scope:{ctx:t}}});let k={ctx:t,current:null,token:null,hasCatch:!1,pending:Xe,then:We,catch:Qe,value:7,blocks:[,,,]};return De(ie=t[0].streamed.similarProducts,k),{c(){e=p("div"),r=new pe(!1),l=I(),f=p("img"),d=I(),o=p("div"),n=p("a"),Q(_.$$.fragment),b=I(),h=p("div"),S=p("h2"),C=Z(t[5]),F=I(),G=p("div"),ee=new pe(!1),fe=I(),U=p("div"),V=p("div"),A=p("a"),Q(q.$$.fragment),de=I(),B=p("a"),Q(L.$$.fragment),me=I(),H=p("a"),Q(M.$$.fragment),_e=I(),J=p("div"),se=I(),T=p("div"),O=p("div"),O.textContent=be,ge=I(),R=p("ul"),k.block.c(),this.h()},l(m){e=$(m,"DIV",{class:!0});var c=v(e);r=$e(c,!1),l=E(c),f=$(c,"IMG",{class:!0,width:!0,alt:!0,src:!0}),c.forEach(u),d=E(m),o=$(m,"DIV",{class:!0});var N=v(o);n=$(N,"A",{href:!0,target:!0});var te=v(n);W(_.$$.fragment,te),te.forEach(u),N.forEach(u),b=E(m),h=$(m,"DIV",{class:!0});var P=v(h);S=$(P,"H2",{class:!0});var ae=v(S);C=x(ae,t[5]),ae.forEach(u),F=E(P),G=$(P,"DIV",{id:!0,class:!0});var we=v(G);ee=$e(we,!1),we.forEach(u),fe=E(P),U=$(P,"DIV",{id:!0,class:!0});var ke=v(U);V=$(ke,"DIV",{class:!0});var K=v(V);A=$(K,"A",{href:!0,target:!0});var ye=v(A);W(q.$$.fragment,ye),ye.forEach(u),de=E(K),B=$(K,"A",{href:!0,target:!0});var Ie=v(B);W(L.$$.fragment,Ie),Ie.forEach(u),me=E(K),H=$(K,"A",{href:!0,target:!0});var Ee=v(H);W(M.$$.fragment,Ee),Ee.forEach(u),K.forEach(u),ke.forEach(u),_e=E(P),J=$(P,"DIV",{id:!0,class:!0}),v(J).forEach(u),P.forEach(u),se=E(m),T=$(m,"DIV",{class:!0});var oe=v(T);O=$(oe,"DIV",{class:!0,"data-svelte-h":!0}),Ce(O)!=="svelte-g4vgml"&&(O.textContent=be),ge=E(oe),R=$(oe,"UL",{class:!0});var Pe=v(R);k.block.l(Pe),Pe.forEach(u),oe.forEach(u),this.h()},h(){r.a=l,i(f,"class","py-10"),i(f,"width","400"),i(f,"alt",t[5]),ce(f.src,s=t[6])||i(f,"src",s),i(e,"class","w-full flex flex-row bg-gray-100 justify-center relative"),i(n,"href",t[2]),i(n,"target","_blank"),i(o,"class","my-5 pb-10 flex flex-col items-center top-0 sticky z-10"),i(S,"class","bg-yellow-300 p-2"),ee.a=null,i(G,"id","desc"),i(G,"class","p-5"),i(A,"href",t[2]),i(A,"target","_blank"),i(B,"href",le="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+t[1]),i(B,"target","_blank"),i(H,"href",re="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+t[1]+"&_sacat=0"),i(H,"target","_blank"),i(V,"class","my-5 pb-10 flex flex-col items-center space-y-5"),i(U,"id","links"),i(U,"class","w-5/6 m-auto bg-zinc-50 border-zinc-200 border-2 p-5"),i(J,"id","abstand"),i(J,"class","h-5"),i(h,"class","bg-yellow-100"),i(O,"class","w-full my-5 bg-lime-300 p-3 text-lg font-bold text-center"),i(R,"class","grid grid-cols-2 md:grid-cols-3 px-5 pb-20"),i(T,"class","bg-lime-100 h-full ")},m(m,c){w(m,e,c),r.m(a,e),g(e,l),g(e,f),w(m,d,c),w(m,o,c),g(o,n),X(_,n,null),w(m,b,c),w(m,h,c),g(h,S),g(S,C),g(h,F),g(h,G),ee.m(t[3],G),g(h,fe),g(h,U),g(U,V),g(V,A),X(q,A,null),g(V,de),g(V,B),X(L,B,null),g(V,me),g(V,H),X(M,H,null),g(h,_e),g(h,J),w(m,se,c),w(m,T,c),g(T,O),g(T,ge),g(T,R),k.block.m(R,k.anchor=null),k.mount=()=>R,k.anchor=null,y=!0},p(m,[c]){t=m,(!y||c&16)&&a!==(a=ue(t[4])+"")&&r.p(a),(!y||c&32)&&i(f,"alt",t[5]),(!y||c&64&&!ce(f.src,s=t[6]))&&i(f,"src",s);const N={};c&2080&&(N.$$scope={dirty:c,ctx:t}),_.$set(N),(!y||c&4)&&i(n,"href",t[2]),(!y||c&32)&&ve(C,t[5]),(!y||c&8)&&ee.p(t[3]);const te={};c&2080&&(te.$$scope={dirty:c,ctx:t}),q.$set(te),(!y||c&4)&&i(A,"href",t[2]);const P={};c&2048&&(P.$$scope={dirty:c,ctx:t}),L.$set(P),(!y||c&2&&le!==(le="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+t[1]))&&i(B,"href",le);const ae={};c&2048&&(ae.$$scope={dirty:c,ctx:t}),M.$set(ae),(!y||c&2&&re!==(re="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+t[1]+"&_sacat=0"))&&i(H,"href",re),k.ctx=t,c&1&&ie!==(ie=t[0].streamed.similarProducts)&&De(ie,k)||qe(k,t,c)},i(m){y||(z(_.$$.fragment,m),z(q.$$.fragment,m),z(L.$$.fragment,m),z(M.$$.fragment,m),z(k.block),y=!0)},o(m){j(_.$$.fragment,m),j(q.$$.fragment,m),j(L.$$.fragment,m),j(M.$$.fragment,m);for(let c=0;c<3;c+=1){const N=k.blocks[c];j(N)}y=!1},d(m){m&&(u(e),u(d),u(o),u(b),u(h),u(se),u(T)),Y(_),Y(q),Y(L),Y(M),k.block.d(),k.token=null,k=null}}}function Ze(t,e,r){let a,l,f,s,d,o,{data:n}=e;return t.$$set=_=>{"data"in _&&r(0,n=_.data)},t.$$.update=()=>{t.$$.dirty&1&&r(6,a=Ge(n.data.image)),t.$$.dirty&1&&r(5,l=n.data.name),t.$$.dirty&1&&r(4,f=n.data.id),t.$$.dirty&1&&r(3,s=n.data.description),t.$$.dirty&1&&r(2,d=n.data.link),t.$$.dirty&1&&r(1,o=n.searchterm)},[n,o,d,s,f,l,a]}class nt extends Be{constructor(e){super(),Le(this,e,Ze,Ye,je,{data:0})}}export{nt as component,ot as universal};
