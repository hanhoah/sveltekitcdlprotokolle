import{s as V}from"../chunks/supabaseClient.CCJhsT86.js";import{s as q,e as w,c as v,b as O,f as p,m as g,i as $,a as k,g as I,l as z,h as b,Q as P,E as T,J as A,t as B,d as D}from"../chunks/scheduler.D78XxIca.js";import{S as F,i as H,t as U,b as E,c as x,a as C,m as R,d as j}from"../chunks/index.VYeZ3G8j.js";import{R as J}from"../chunks/control.CYgJF_JY.js";import{B as N}from"../chunks/Button.CrDj8X0S.js";async function Q(){console.log("start get session");const{data:o,error:e}=await V.auth.getSession();return e?(console.log("error getSession"),!1):(console.log("session from getSessioin is ",o.session),o.session)}async function W({session:o}){const e=await Q();return console.log("server session: ",e),e}const ie=Object.freeze(Object.defineProperty({__proto__:null,load:W},Symbol.toStringTag,{value:"Module"}));function G(o,e){throw new J(o,e.toString())}new TextEncoder;function K(o){let e,t;return e=new N({props:{class:"w-28 m-auto",$$slots:{default:[Y]},$$scope:{ctx:o}}}),e.$on("click",o[5]),{c(){x(e.$$.fragment)},l(n){C(e.$$.fragment,n)},m(n,s){R(e,n,s),t=!0},p(n,s){const u={};s&1024&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){t||(U(e.$$.fragment,n),t=!0)},o(n){E(e.$$.fragment,n),t=!1},d(n){j(e,n)}}}function X(o){let e,t,n,s,u,r,m,a,c,S="No Account? Please Sign Up",y,f,d,_,L;return r=new N({props:{color:"green",$$slots:{default:[Z]},$$scope:{ctx:o}}}),r.$on("click",o[4]),f=new N({props:{color:"green",class:"w-28",$$slots:{default:[ee]},$$scope:{ctx:o}}}),f.$on("click",o[3]),{c(){e=w("form"),t=w("input"),n=k(),s=w("input"),u=k(),x(r.$$.fragment),m=k(),a=w("div"),c=w("h2"),c.textContent=S,y=k(),x(f.$$.fragment),this.h()},l(l){e=v(l,"FORM",{class:!0});var i=O(e);t=v(i,"INPUT",{class:!0,placeholder:!0,name:!0}),n=I(i),s=v(i,"INPUT",{class:!0,type:!0,placeholder:!0,name:!0}),u=I(i),C(r.$$.fragment,i),i.forEach(p),m=I(l),a=v(l,"DIV",{class:!0});var h=O(a);c=v(h,"H2",{"data-svelte-h":!0}),z(c)!=="svelte-1vi77h7"&&(c.textContent=S),y=I(h),C(f.$$.fragment,h),h.forEach(p),this.h()},h(){g(t,"class","h-10 bg-white border-2 border-gray-300 w-full text-center"),g(t,"placeholder","Email"),g(t,"name","email"),g(s,"class","h-10 w-full border-2 border-gray-300 text-center"),g(s,"type","password"),g(s,"placeholder","Password"),g(s,"name","password"),g(e,"class","bg-white flex flex-col w-60 items-center m-auto mt-10 p-5 rounded-xl space-y-5"),g(a,"class","m-auto")},m(l,i){$(l,e,i),b(e,t),P(t,o[0]),b(e,n),b(e,s),P(s,o[1]),b(e,u),R(r,e,null),$(l,m,i),$(l,a,i),b(a,c),b(a,y),R(f,a,null),d=!0,_||(L=[T(t,"input",o[7]),T(s,"input",o[8]),T(e,"submit",o[3])],_=!0)},p(l,i){i&1&&t.value!==l[0]&&P(t,l[0]),i&2&&s.value!==l[1]&&P(s,l[1]);const h={};i&1024&&(h.$$scope={dirty:i,ctx:l}),r.$set(h);const M={};i&1024&&(M.$$scope={dirty:i,ctx:l}),f.$set(M)},i(l){d||(U(r.$$.fragment,l),U(f.$$.fragment,l),d=!0)},o(l){E(r.$$.fragment,l),E(f.$$.fragment,l),d=!1},d(l){l&&(p(e),p(m),p(a)),j(r),j(f),_=!1,A(L)}}}function Y(o){let e;return{c(){e=B("Sign out")},l(t){e=D(t,"Sign out")},m(t,n){$(t,e,n)},d(t){t&&p(e)}}}function Z(o){let e;return{c(){e=B("Log In")},l(t){e=D(t,"Log In")},m(t,n){$(t,e,n)},d(t){t&&p(e)}}}function ee(o){let e;return{c(){e=B("Sign Up")},l(t){e=D(t,"Sign Up")},m(t,n){$(t,e,n)},d(t){t&&p(e)}}}function te(o){let e,t,n,s;const u=[X,K],r=[];function m(a,c){return a[2]?1:0}return t=m(o),n=r[t]=u[t](o),{c(){e=w("div"),n.c(),this.h()},l(a){e=v(a,"DIV",{id:!0,class:!0});var c=O(e);n.l(c),c.forEach(p),this.h()},h(){g(e,"id","page"),g(e,"class","bg-gray-100 h-96 justify-center flex flex-col")},m(a,c){$(a,e,c),r[t].m(e,null),s=!0},p(a,[c]){n.p(a,c)},i(a){s||(U(n),s=!0)},o(a){E(n),s=!1},d(a){a&&p(e),r[t].d()}}}function ne(o,e,t){let{data:n}=e,{supabase:s}=n,u,r,m=n.session;console.log("client session: ",m);const a=async()=>{await s.auth.signUp({email:u,password:r,options:{emailRedirectTo:`${location.origin}/auth/callback`}})},c=async()=>{console.log("logging you in");const{data:d,error:_}=await s.auth.signInWithPassword({email:u,password:r});if(_)return console.log("There was an error logging you in. "),!1;console.log("logged in"),await G(303,"/admin")},S=async()=>{console.log("logging you out");const{data:d,error:_}=await s.auth.signOut();console.log("logging out data ist ",d),console.log("error ",_),console.log("logged out")};function y(){u=this.value,t(0,u)}function f(){r=this.value,t(1,r)}return o.$$set=d=>{"data"in d&&t(6,n=d.data)},o.$$.update=()=>{o.$$.dirty&64&&({supabase:s}=n)},[u,r,m,a,c,S,n,y,f]}class ce extends F{constructor(e){super(),H(this,e,ne,te,q,{data:6})}}export{ce as component,ie as universal};
