import{s as M}from"../chunks/supabaseClient.CD4MZNEJ.js";import{s as Z,e as w,t as A,a as B,m as j,c as I,b as E,d as D,f as h,g as C,l as N,i as b,h as k,j as H,o as X,H as $,q as x,A as ee}from"../chunks/scheduler.DBuKuVba.js";import{S as te,i as le,t as V,c as re,a as L,b as ae,d as oe,m as ne,e as se,g as ie}from"../chunks/index.CsvtYcO8.js";import{e as T}from"../chunks/each.D6YF6ztN.js";import{g as O,P as ce}from"../chunks/shops.UQ8kZvPW.js";async function fe(a){console.log("getCategoryNameById: ",a);const{data:e,error:r}=await M.from("categories").select("name").eq("id",a).single();return e==null?void 0:e.name}async function ue(a){const{data:e,error:r}=await M.from("categories").select("description").eq("id",a).single();try{return e&&e.description?e.description:null}catch{return null}}async function de({params:a}){const e=a.catid,r=await fe(parseInt(e)),t=await ue(parseInt(e));console.log("desc",t);const{data:l,error:n}=await M.from("productswithcategory").select().eq("category_id",e).order("name"),o=l==null?void 0:l.length;return{catid:e,length:o,category:r,description:t,products:l}}const Pe=Object.freeze(Object.defineProperty({__proto__:null,load:de},Symbol.toStringTag,{value:"Module"}));function U(a,e,r){const t=a.slice();return t[10]=e[r],t}function F(a,e,r){const t=a.slice();return t[13]=e[r],t}function G(a){let e,r;return{c(){e=w("div"),r=A(a[4]),this.h()},l(t){e=I(t,"DIV",{class:!0});var l=E(e);r=D(l,a[4]),l.forEach(h),this.h()},h(){N(e,"class","border-2 p-2 bg-slate-100")},m(t,l){b(t,e,l),k(e,r)},p(t,l){l&16&&H(r,t[4])},d(t){t&&h(e)}}}function J(a){let e,r,t,l=O(a[13].id)+"",n,o,_,i;return o=new ce({props:{product:{id:a[13].id,name:a[13].name,img:a[13].image}}}),{c(){e=w("div"),r=w("li"),t=new $(!1),n=B(),ae(o.$$.fragment),_=B(),this.h()},l(u){e=I(u,"DIV",{class:!0});var g=E(e);r=I(g,"LI",{class:!0});var y=E(r);t=x(y,!1),n=C(y),oe(o.$$.fragment,y),y.forEach(h),_=C(g),g.forEach(h),this.h()},h(){t.a=n,N(r,"class","my-2 relative"),N(e,"class","lazy-load")},m(u,g){b(u,e,g),k(e,r),t.m(l,r),k(r,n),ne(o,r,null),k(e,_),i=!0},p(u,g){(!i||g&4)&&l!==(l=O(u[13].id)+"")&&t.p(l);const y={};g&4&&(y.product={id:u[13].id,name:u[13].name,img:u[13].image}),o.$set(y)},i(u){i||(V(o.$$.fragment,u),i=!0)},o(u){L(o.$$.fragment,u),i=!1},d(u){u&&h(e),se(o)}}}function Q(a){let e,r=T(Array.from({length:a[3]()}).map(W)),t=[];for(let l=0;l<r.length;l+=1)t[l]=R(U(a,r,l));return{c(){e=w("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=I(l,"DIV",{class:!0});var n=E(e);for(let o=0;o<t.length;o+=1)t[o].l(n);n.forEach(h),this.h()},h(){N(e,"class","page-selector svelte-ra8vou")},m(l,n){b(l,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(l,n){if(n&74){r=T(Array.from({length:l[3]()}).map(W));let o;for(o=0;o<r.length;o+=1){const _=U(l,r,o);t[o]?t[o].p(_,n):(t[o]=R(_),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=r.length}},d(l){l&&h(e),X(t,l)}}}function _e(a){let e,r=a[10]+"",t,l,n;function o(){return a[8](a[10])}return{c(){e=w("a"),t=A(r),this.h()},l(_){e=I(_,"A",{class:!0});var i=E(e);t=D(i,r),i.forEach(h),this.h()},h(){N(e,"class","page-number svelte-ra8vou")},m(_,i){b(_,e,i),k(e,t),l||(n=ee(e,"click",o),l=!0)},p(_,i){a=_,i&8&&r!==(r=a[10]+"")&&H(t,r)},d(_){_&&h(e),l=!1,n()}}}function he(a){let e,r=a[10]+"",t;return{c(){e=w("span"),t=A(r),this.h()},l(l){e=I(l,"SPAN",{class:!0});var n=E(e);t=D(n,r),n.forEach(h),this.h()},h(){N(e,"class","page-number current-page svelte-ra8vou")},m(l,n){b(l,e,n),k(e,t)},p(l,n){n&8&&r!==(r=l[10]+"")&&H(t,r)},d(l){l&&h(e)}}}function R(a){let e;function r(n,o){return n[10]==n[1]?he:_e}let t=r(a),l=t(a);return{c(){l.c(),e=j()},l(n){l.l(n),e=j()},m(n,o){l.m(n,o),b(n,e,o)},p(n,o){t===(t=r(n))&&l?l.p(n,o):(l.d(1),l=t(n),l&&(l.c(),l.m(e.parentNode,e)))},d(n){n&&h(e),l.d(n)}}}function me(a){let e,r,t,l,n,o,_,i,u,g,y=a[3]()>1,q,v,m=a[4]&&G(a),P=T(a[2]),d=[];for(let s=0;s<P.length;s+=1)d[s]=J(F(a,P,s));const Y=s=>L(d[s],1,1,()=>{d[s]=null});let p=y&&Q(a);return{c(){e=w("div"),r=w("h2"),t=A(a[0]),l=A(" Produkte in der Kategorie "),n=A(a[5]),o=A(" gefunden."),_=B(),m&&m.c(),i=B(),u=w("ul");for(let s=0;s<d.length;s+=1)d[s].c();g=B(),p&&p.c(),q=j(),this.h()},l(s){e=I(s,"DIV",{class:!0});var c=E(e);r=I(c,"H2",{class:!0});var f=E(r);t=D(f,a[0]),l=D(f," Produkte in der Kategorie "),n=D(f,a[5]),o=D(f," gefunden."),f.forEach(h),c.forEach(h),_=C(s),m&&m.l(s),i=C(s),u=I(s,"UL",{class:!0});var S=E(u);for(let z=0;z<d.length;z+=1)d[z].l(S);S.forEach(h),g=C(s),p&&p.l(s),q=j(),this.h()},h(){N(r,"class","text-center my-5 p-2"),N(e,"class","w-full"),N(u,"class","grid grid-cols-2 md:grid-cols-3")},m(s,c){b(s,e,c),k(e,r),k(r,t),k(r,l),k(r,n),k(r,o),b(s,_,c),m&&m.m(s,c),b(s,i,c),b(s,u,c);for(let f=0;f<d.length;f+=1)d[f]&&d[f].m(u,null);b(s,g,c),p&&p.m(s,c),b(s,q,c),v=!0},p(s,[c]){if((!v||c&1)&&H(t,s[0]),(!v||c&32)&&H(n,s[5]),s[4]?m?m.p(s,c):(m=G(s),m.c(),m.m(i.parentNode,i)):m&&(m.d(1),m=null),c&4){P=T(s[2]);let f;for(f=0;f<P.length;f+=1){const S=F(s,P,f);d[f]?(d[f].p(S,c),V(d[f],1)):(d[f]=J(S),d[f].c(),V(d[f],1),d[f].m(u,null))}for(ie(),f=P.length;f<d.length;f+=1)Y(f);re()}c&8&&(y=s[3]()>1),y?p?p.p(s,c):(p=Q(s),p.c(),p.m(q.parentNode,q)):p&&(p.d(1),p=null)},i(s){if(!v){for(let c=0;c<P.length;c+=1)V(d[c]);v=!0}},o(s){d=d.filter(Boolean);for(let c=0;c<d.length;c+=1)L(d[c]);v=!1},d(s){s&&(h(e),h(_),h(i),h(u),h(g),h(q)),m&&m.d(s),X(d,s),p&&p.d(s)}}}const K=50,W=(a,e)=>e+1;function ge(a,e,r){let t,l,n,o,_,{data:i}=e;console.log("catid: ",i.catid);function u(){return r(2,t=i.products.slice(0,10)),t}t=u();let g=1;async function y(v){r(1,g=v);const m=(g-1)*K,P=m+K;return r(2,t=await i.products.slice(m,P)),t}t=y(1);const q=v=>y(v);return a.$$set=v=>{"data"in v&&r(7,i=v.data)},a.$$.update=()=>{a.$$.dirty&128&&r(2,t=i.products.slice(0,10)),a.$$.dirty&128&&r(0,l=i.products.length),a.$$.dirty&128&&r(5,n=i.category),a.$$.dirty&128&&r(4,o=i.description),a.$$.dirty&1&&r(3,_=()=>Math.ceil(l/K))},[l,g,t,_,o,n,y,i,q]}class we extends te{constructor(e){super(),le(this,e,ge,me,Z,{data:7})}}export{we as component,Pe as universal};
