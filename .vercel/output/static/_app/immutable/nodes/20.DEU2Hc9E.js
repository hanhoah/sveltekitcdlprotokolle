import{s as be}from"../chunks/supabaseClient.CCJhsT86.js";import{s as Me,e as _,a as y,H as we,t as ee,o as He,c as h,f as u,g as P,b as v,r as ke,d as te,l as Fe,m as o,u as me,h as g,i as $,j as Ee,n as T,p as je,q as Ge}from"../chunks/scheduler.CzaLFZzx.js";import{h as Ae,u as Ue}from"../chunks/await_block.DdT5Fn5c.js";import{e as Ce}from"../chunks/each.D6YF6ztN.js";import{S as Oe,i as Re,c as X,a as Y,m as Z,t as j,b as q,d as x,g as Ne,e as Je}from"../chunks/index.C2gRMFDs.js";import{B as fe}from"../chunks/Button.rvaLcshS.js";import{S as Ke}from"../chunks/Spinner.6YvIMwKj.js";import{g as de,a as Qe,P as We}from"../chunks/product.VcUCZJUb.js";import{r as qe}from"../chunks/helper.ByxkrZMk.js";async function Xe({params:e}){let t=e.productid,r="id, name, image, description, link, products_categories(category_id), slug",{data:a}=await be.from("products").select(r).eq("slug",t).limit(1).single();console.log("data ist ",a);let l=a.name;console.log("product: ",l,"id: ",t),a.description;async function d(b){let w=b.split(" ");return w=w.slice(0,3),w.join(" ")}let s=await d(l),f=a.products_categories[0].category_id;async function n(b,w){let{data:D}=await be.from("products_categories").select("product_id").eq("category_id",b).range(0,9),V=D.map(B=>B.product_id);return V=V.filter(B=>B!=w),V}async function c(b){let{data:w}=await be.from("products").select().in("id",b);return w}let p=await n(f,t);return{data:a,searchterm:s,streamed:{similarProducts:c(p)}}}const _t=Object.freeze(Object.defineProperty({__proto__:null,load:Xe},Symbol.toStringTag,{value:"Module"}));function Be(e,t,r){const a=e.slice();return a[8]=t[r],a}function Ye(e){let t,r;return{c(){t=ee(e[4]),r=ee(" ðŸ›’")},l(a){t=te(a,e[4]),r=te(a," ðŸ›’")},m(a,l){$(a,t,l),$(a,r,l)},p(a,l){l&16&&Ee(t,a[4])},d(a){a&&(u(t),u(r))}}}function Ze(e){let t,r;return{c(){t=ee(e[4]),r=ee(" ðŸ›’")},l(a){t=te(a,e[4]),r=te(a," ðŸ›’")},m(a,l){$(a,t,l),$(a,r,l)},p(a,l){l&16&&Ee(t,a[4])},d(a){a&&(u(t),u(r))}}}function xe(e){let t,r;return{c(){t=_("img"),this.h()},l(a){t=h(a,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){o(t,"alt","amazon logo"),o(t,"width","100"),me(t.src,r="/images/logos/Amazon.de-Logo.svg.png")||o(t,"src",r)},m(a,l){$(a,t,l)},p:T,d(a){a&&u(t)}}}function et(e){let t,r;return{c(){t=_("img"),this.h()},l(a){t=h(a,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){o(t,"alt","ebay logo"),o(t,"width","100"),me(t.src,r="/images/logos/EBay_logo.png")||o(t,"src",r)},m(a,l){$(a,t,l)},p:T,d(a){a&&u(t)}}}function tt(e){return{c:T,l:T,m:T,p:T,i:T,o:T,d:T}}function at(e){let t,r,a=Ce(e[7]),l=[];for(let s=0;s<a.length;s+=1)l[s]=Le(Be(e,a,s));const d=s=>q(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=je()},l(s){for(let f=0;f<l.length;f+=1)l[f].l(s);t=je()},m(s,f){for(let n=0;n<l.length;n+=1)l[n]&&l[n].m(s,f);$(s,t,f),r=!0},p(s,f){if(f&1){a=Ce(s[7]);let n;for(n=0;n<a.length;n+=1){const c=Be(s,a,n);l[n]?(l[n].p(c,f),j(l[n],1)):(l[n]=Le(c),l[n].c(),j(l[n],1),l[n].m(t.parentNode,t))}for(Ne(),n=a.length;n<l.length;n+=1)d(n);Je()}},i(s){if(!r){for(let f=0;f<a.length;f+=1)j(l[f]);r=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)q(l[f]);r=!1},d(s){s&&u(t),Ge(l,s)}}}function Le(e){let t,r,a,l=de(e[8].image)+"",d,s,f,n;return s=new We({props:{product:{id:e[8].id,name:e[8].name,img:e[8].image,price:e[8].price,slug:e[8].slug}}}),{c(){t=_("li"),r=_("div"),a=new we(!1),d=y(),X(s.$$.fragment),f=y(),this.h()},l(c){t=h(c,"LI",{class:!0});var p=v(t);r=h(p,"DIV",{class:!0});var b=v(r);a=ke(b,!1),b.forEach(u),d=P(p),Y(s.$$.fragment,p),f=P(p),p.forEach(u),this.h()},h(){a.a=null,o(r,"class","absolute right-10"),o(t,"class","my-2 relative ")},m(c,p){$(c,t,p),g(t,r),a.m(l,r),g(t,d),Z(s,t,null),g(t,f),n=!0},p(c,p){(!n||p&1)&&l!==(l=de(c[8].image)+"")&&a.p(l);const b={};p&1&&(b.product={id:c[8].id,name:c[8].name,img:c[8].image,price:c[8].price,slug:c[8].slug}),s.$set(b)},i(c){n||(j(s.$$.fragment,c),n=!0)},o(c){q(s.$$.fragment,c),n=!1},d(c){c&&u(t),x(s)}}}function lt(e){let t,r,a,l;return r=new Ke({}),{c(){t=_("div"),X(r.$$.fragment),a=ee(`
                Loading similar Products ...`),this.h()},l(d){t=h(d,"DIV",{class:!0});var s=v(t);Y(r.$$.fragment,s),a=te(s,`
                Loading similar Products ...`),s.forEach(u),this.h()},h(){o(t,"class","loading")},m(d,s){$(d,t,s),Z(r,t,null),g(t,a),l=!0},p:T,i(d){l||(j(r.$$.fragment,d),l=!0)},o(d){q(r.$$.fragment,d),l=!1},d(d){d&&u(t),x(r)}}}function rt(e){let t,r,a,l,d,s,f=de(e[5])+"",n,c,p,b,w,D,V,B,I,K,se,ge,O,ae,_e,R,S,L,M,he,H,F,oe,pe,G,U,ne,ve,Q,ie,A,N,Ie="Ã„hnliche Produkte:",$e,J,ce,k;document.title=t=e[4],V=new fe({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Ye]},$$scope:{ctx:e}}}),M=new fe({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Ze]},$$scope:{ctx:e}}}),F=new fe({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[xe]},$$scope:{ctx:e}}}),U=new fe({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[et]},$$scope:{ctx:e}}});let E={ctx:e,current:null,token:null,hasCatch:!1,pending:lt,then:at,catch:tt,value:7,blocks:[,,,]};return Ae(ce=e[0].streamed.similarProducts,E),{c(){r=_("meta"),l=y(),d=_("div"),s=new we(!1),n=y(),c=_("img"),b=y(),w=_("div"),D=_("a"),X(V.$$.fragment),B=y(),I=_("div"),K=_("h2"),se=ee(e[4]),ge=y(),O=_("div"),ae=new we(!1),_e=y(),R=_("div"),S=_("div"),L=_("a"),X(M.$$.fragment),he=y(),H=_("a"),X(F.$$.fragment),pe=y(),G=_("a"),X(U.$$.fragment),ve=y(),Q=_("div"),ie=y(),A=_("div"),N=_("div"),N.textContent=Ie,$e=y(),J=_("ul"),E.block.c(),this.h()},l(m){const i=He("svelte-wubmel",document.head);r=h(i,"META",{name:!0,content:!0}),i.forEach(u),l=P(m),d=h(m,"DIV",{class:!0});var C=v(d);s=ke(C,!1),n=P(C),c=h(C,"IMG",{class:!0,width:!0,alt:!0,src:!0}),C.forEach(u),b=P(m),w=h(m,"DIV",{class:!0});var le=v(w);D=h(le,"A",{href:!0,target:!0});var re=v(D);Y(V.$$.fragment,re),re.forEach(u),le.forEach(u),B=P(m),I=h(m,"DIV",{class:!0});var z=v(I);K=h(z,"H2",{class:!0});var ye=v(K);se=te(ye,e[4]),ye.forEach(u),ge=P(z),O=h(z,"DIV",{id:!0,class:!0});var Pe=v(O);ae=ke(Pe,!1),Pe.forEach(u),_e=P(z),R=h(z,"DIV",{id:!0,class:!0});var Ve=v(R);S=h(Ve,"DIV",{class:!0});var W=v(S);L=h(W,"A",{href:!0,target:!0});var De=v(L);Y(M.$$.fragment,De),De.forEach(u),he=P(W),H=h(W,"A",{href:!0,target:!0});var ze=v(H);Y(F.$$.fragment,ze),ze.forEach(u),pe=P(W),G=h(W,"A",{href:!0,target:!0});var Se=v(G);Y(U.$$.fragment,Se),Se.forEach(u),W.forEach(u),Ve.forEach(u),ve=P(z),Q=h(z,"DIV",{id:!0,class:!0}),v(Q).forEach(u),z.forEach(u),ie=P(m),A=h(m,"DIV",{class:!0});var ue=v(A);N=h(ue,"DIV",{class:!0,"data-svelte-h":!0}),Fe(N)!=="svelte-g4vgml"&&(N.textContent=Ie),$e=P(ue),J=h(ue,"UL",{class:!0});var Te=v(J);E.block.l(Te),Te.forEach(u),ue.forEach(u),this.h()},h(){o(r,"name","description"),o(r,"content",a=qe(e[3])),s.a=n,o(c,"class","py-10"),o(c,"width","400"),o(c,"alt",e[4]),me(c.src,p=e[5])||o(c,"src",p),o(d,"class","w-full flex flex-row bg-gray-100 justify-center relative"),o(D,"href",e[2]),o(D,"target","_blank"),o(w,"class","my-5 pb-10 flex flex-col items-center top-0 sticky z-10"),o(K,"class","bg-yellow-300 p-2"),ae.a=null,o(O,"id","desc"),o(O,"class","p-5"),o(L,"href",e[2]),o(L,"target","_blank"),o(H,"href",oe="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+e[1]),o(H,"target","_blank"),o(G,"href",ne="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+e[1]+"&_sacat=0"),o(G,"target","_blank"),o(S,"class","my-5 pb-10 flex flex-col items-center space-y-5"),o(R,"id","links"),o(R,"class","w-5/6 m-auto bg-zinc-50 border-zinc-200 border-2 p-5"),o(Q,"id","abstand"),o(Q,"class","h-5"),o(I,"class","bg-yellow-100"),o(N,"class","w-full my-5 bg-lime-300 p-3 text-lg font-bold text-center"),o(J,"class","grid grid-cols-2 md:grid-cols-3 px-5 pb-20"),o(A,"class","bg-lime-100 h-full ")},m(m,i){g(document.head,r),$(m,l,i),$(m,d,i),s.m(f,d),g(d,n),g(d,c),$(m,b,i),$(m,w,i),g(w,D),Z(V,D,null),$(m,B,i),$(m,I,i),g(I,K),g(K,se),g(I,ge),g(I,O),ae.m(e[3],O),g(I,_e),g(I,R),g(R,S),g(S,L),Z(M,L,null),g(S,he),g(S,H),Z(F,H,null),g(S,pe),g(S,G),Z(U,G,null),g(I,ve),g(I,Q),$(m,ie,i),$(m,A,i),g(A,N),g(A,$e),g(A,J),E.block.m(J,E.anchor=null),E.mount=()=>J,E.anchor=null,k=!0},p(m,[i]){e=m,(!k||i&16)&&t!==(t=e[4])&&(document.title=t),(!k||i&8&&a!==(a=qe(e[3])))&&o(r,"content",a),(!k||i&32)&&f!==(f=de(e[5])+"")&&s.p(f),(!k||i&16)&&o(c,"alt",e[4]),(!k||i&32&&!me(c.src,p=e[5]))&&o(c,"src",p);const C={};i&2064&&(C.$$scope={dirty:i,ctx:e}),V.$set(C),(!k||i&4)&&o(D,"href",e[2]),(!k||i&16)&&Ee(se,e[4]),(!k||i&8)&&ae.p(e[3]);const le={};i&2064&&(le.$$scope={dirty:i,ctx:e}),M.$set(le),(!k||i&4)&&o(L,"href",e[2]);const re={};i&2048&&(re.$$scope={dirty:i,ctx:e}),F.$set(re),(!k||i&2&&oe!==(oe="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+e[1]))&&o(H,"href",oe);const z={};i&2048&&(z.$$scope={dirty:i,ctx:e}),U.$set(z),(!k||i&2&&ne!==(ne="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+e[1]+"&_sacat=0"))&&o(G,"href",ne),E.ctx=e,i&1&&ce!==(ce=e[0].streamed.similarProducts)&&Ae(ce,E)||Ue(E,e,i)},i(m){k||(j(V.$$.fragment,m),j(M.$$.fragment,m),j(F.$$.fragment,m),j(U.$$.fragment,m),j(E.block),k=!0)},o(m){q(V.$$.fragment,m),q(M.$$.fragment,m),q(F.$$.fragment,m),q(U.$$.fragment,m);for(let i=0;i<3;i+=1){const C=E.blocks[i];q(C)}k=!1},d(m){m&&(u(l),u(d),u(b),u(w),u(B),u(I),u(ie),u(A)),u(r),x(V),x(M),x(F),x(U),E.block.d(),E.token=null,E=null}}}function st(e,t,r){let a,l,d,s,f,{data:n}=t;return e.$$set=c=>{"data"in c&&r(0,n=c.data)},e.$$.update=()=>{e.$$.dirty&1&&r(5,a=Qe(n.data.image)),e.$$.dirty&1&&r(4,l=n.data.name),e.$$.dirty&1&&n.data.id,e.$$.dirty&1&&r(3,d=n.data.description),e.$$.dirty&1&&r(2,s=n.data.link),e.$$.dirty&1&&r(1,f=n.searchterm)},[n,f,s,d,l,a]}class ht extends Oe{constructor(t){super(),Re(this,t,st,rt,Me,{data:0})}}export{ht as component,_t as universal};
