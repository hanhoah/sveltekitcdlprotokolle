import{s as M}from"../chunks/supabaseClient.CD4MZNEJ.js";import{s as Y,e as w,t as A,a as B,m as V,c as I,b as E,d as D,f as _,g as C,l as q,i as v,h as b,j as K,o as W,H as Z,q as $,A as x,n as ee}from"../chunks/scheduler.DBuKuVba.js";import{S as te,i as le,t as H,c as re,a as L,b as ae,d as oe,m as ne,e as se,g as ie}from"../chunks/index.CsvtYcO8.js";import{e as j}from"../chunks/each.D6YF6ztN.js";import{g as O,P as ce}from"../chunks/shops.XWkl3EzL.js";async function fe(a){console.log("getCategoryNameById: ",a);const{data:e,error:r}=await M.from("categories").select("name").eq("id",a).single();return e==null?void 0:e.name}async function ue(a){const{data:e,error:r}=await M.from("categories").select("description").eq("id",a).single();try{return e&&e.description?e.description:null}catch{return null}}async function de({params:a}){const e=a.catid,r=await fe(parseInt(e)),t=await ue(parseInt(e));console.log("desc",t);const{data:l,error:n}=await M.from("productswithcategory").select().eq("category_id",e).order("name"),o=l==null?void 0:l.length;return{catid:e,length:o,category:r,description:t,products:l}}const we=Object.freeze(Object.defineProperty({__proto__:null,load:de},Symbol.toStringTag,{value:"Module"}));function U(a,e,r){const t=a.slice();return t[10]=e[r],t}function F(a,e,r){const t=a.slice();return t[13]=e[r],t}function G(a){let e,r;return{c(){e=w("div"),r=A(a[3]),this.h()},l(t){e=I(t,"DIV",{class:!0});var l=E(e);r=D(l,a[3]),l.forEach(_),this.h()},h(){q(e,"class","border-2 p-2 bg-slate-100")},m(t,l){v(t,e,l),b(e,r)},p(t,l){l&8&&K(r,t[3])},d(t){t&&_(e)}}}function J(a){let e,r,t,l=O(a[13].id)+"",n,o,i,h;return o=new ce({props:{product:{id:a[13].id,name:a[13].name,img:a[13].image}}}),{c(){e=w("div"),r=w("li"),t=new Z(!1),n=B(),ae(o.$$.fragment),i=B(),this.h()},l(c){e=I(c,"DIV",{class:!0});var g=E(e);r=I(g,"LI",{class:!0});var p=E(r);t=$(p,!1),n=C(p),oe(o.$$.fragment,p),p.forEach(_),i=C(g),g.forEach(_),this.h()},h(){t.a=n,q(r,"class","my-2 relative"),q(e,"class","lazy-load")},m(c,g){v(c,e,g),b(e,r),t.m(l,r),b(r,n),ne(o,r,null),b(e,i),h=!0},p(c,g){(!h||g&2)&&l!==(l=O(c[13].id)+"")&&t.p(l);const p={};g&2&&(p.product={id:c[13].id,name:c[13].name,img:c[13].image}),o.$set(p)},i(c){h||(H(o.$$.fragment,c),h=!0)},o(c){L(o.$$.fragment,c),h=!1},d(c){c&&_(e),se(o)}}}function _e(a){let e,r=j(Array.from({length:a[5]()}).map(R)),t=[];for(let l=0;l<r.length;l+=1)t[l]=Q(U(a,r,l));return{c(){e=w("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=I(l,"DIV",{class:!0});var n=E(e);for(let o=0;o<t.length;o+=1)t[o].l(n);n.forEach(_),this.h()},h(){q(e,"class","page-selector svelte-ra8vou")},m(l,n){v(l,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(l,n){if(n&97){r=j(Array.from({length:l[5]()}).map(R));let o;for(o=0;o<r.length;o+=1){const i=U(l,r,o);t[o]?t[o].p(i,n):(t[o]=Q(i),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=r.length}},d(l){l&&_(e),W(t,l)}}}function he(a){let e,r=a[10]+"",t,l,n;function o(){return a[8](a[10])}return{c(){e=w("a"),t=A(r),this.h()},l(i){e=I(i,"A",{class:!0});var h=E(e);t=D(h,r),h.forEach(_),this.h()},h(){q(e,"class","page-number svelte-ra8vou")},m(i,h){v(i,e,h),b(e,t),l||(n=x(e,"click",o),l=!0)},p(i,h){a=i},d(i){i&&_(e),l=!1,n()}}}function me(a){let e,r=a[10]+"",t;return{c(){e=w("span"),t=A(r),this.h()},l(l){e=I(l,"SPAN",{class:!0});var n=E(e);t=D(n,r),n.forEach(_),this.h()},h(){q(e,"class","page-number current-page svelte-ra8vou")},m(l,n){v(l,e,n),b(e,t)},p:ee,d(l){l&&_(e)}}}function Q(a){let e;function r(n,o){return n[10]==n[0]?me:he}let t=r(a),l=t(a);return{c(){l.c(),e=V()},l(n){l.l(n),e=V()},m(n,o){l.m(n,o),v(n,e,o)},p(n,o){t===(t=r(n))&&l?l.p(n,o):(l.d(1),l=t(n),l&&(l.c(),l.m(e.parentNode,e)))},d(n){n&&_(e),l.d(n)}}}function ge(a){let e,r,t,l,n,o,i,h,c,g,p=a[5]()>1,N,y,m=a[3]&&G(a),k=j(a[1]),d=[];for(let s=0;s<k.length;s+=1)d[s]=J(F(a,k,s));const X=s=>L(d[s],1,1,()=>{d[s]=null});let P=p&&_e(a);return{c(){e=w("div"),r=w("h2"),t=A(a[2]),l=A(" Produkte in der Kategorie "),n=A(a[4]),o=A(" gefunden."),i=B(),m&&m.c(),h=B(),c=w("ul");for(let s=0;s<d.length;s+=1)d[s].c();g=B(),P&&P.c(),N=V(),this.h()},l(s){e=I(s,"DIV",{class:!0});var f=E(e);r=I(f,"H2",{class:!0});var u=E(r);t=D(u,a[2]),l=D(u," Produkte in der Kategorie "),n=D(u,a[4]),o=D(u," gefunden."),u.forEach(_),f.forEach(_),i=C(s),m&&m.l(s),h=C(s),c=I(s,"UL",{class:!0});var S=E(c);for(let T=0;T<d.length;T+=1)d[T].l(S);S.forEach(_),g=C(s),P&&P.l(s),N=V(),this.h()},h(){q(r,"class","text-center my-5"),q(e,"class","w-full"),q(c,"class","grid grid-cols-2 md:grid-cols-3")},m(s,f){v(s,e,f),b(e,r),b(r,t),b(r,l),b(r,n),b(r,o),v(s,i,f),m&&m.m(s,f),v(s,h,f),v(s,c,f);for(let u=0;u<d.length;u+=1)d[u]&&d[u].m(c,null);v(s,g,f),P&&P.m(s,f),v(s,N,f),y=!0},p(s,[f]){if((!y||f&4)&&K(t,s[2]),(!y||f&16)&&K(n,s[4]),s[3]?m?m.p(s,f):(m=G(s),m.c(),m.m(h.parentNode,h)):m&&(m.d(1),m=null),f&2){k=j(s[1]);let u;for(u=0;u<k.length;u+=1){const S=F(s,k,u);d[u]?(d[u].p(S,f),H(d[u],1)):(d[u]=J(S),d[u].c(),H(d[u],1),d[u].m(c,null))}for(ie(),u=k.length;u<d.length;u+=1)X(u);re()}p&&P.p(s,f)},i(s){if(!y){for(let f=0;f<k.length;f+=1)H(d[f]);y=!0}},o(s){d=d.filter(Boolean);for(let f=0;f<d.length;f+=1)L(d[f]);y=!1},d(s){s&&(_(e),_(i),_(h),_(c),_(g),_(N)),m&&m.d(s),W(d,s),P&&P.d(s)}}}const z=50,R=(a,e)=>e+1;function pe(a,e,r){let t,l,n,o,{data:i}=e;console.log("catid: ",i.catid);function h(){return r(1,t=i.products.slice(0,10)),t}t=h();let c=1;const g=()=>Math.ceil(l/z);async function p(y){r(0,c=y);const m=(c-1)*z,k=m+z;return r(1,t=await i.products.slice(m,k)),t}t=p(1);const N=y=>p(y);return a.$$set=y=>{"data"in y&&r(7,i=y.data)},a.$$.update=()=>{a.$$.dirty&128&&r(1,t=i.products.slice(0,10)),a.$$.dirty&128&&r(2,l=i.products.length),a.$$.dirty&128&&r(4,n=i.category),a.$$.dirty&128&&r(3,o=i.description)},[c,t,l,o,n,g,p,i,N]}class Ie extends te{constructor(e){super(),le(this,e,pe,ge,Y,{data:7})}}export{Ie as component,we as universal};
