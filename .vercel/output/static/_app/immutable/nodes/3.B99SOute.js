import{s as W}from"../chunks/supabaseClient.CItD8zm_.js";import{s as x,e as $,a as H,c as y,b as w,p as X,g as P,f as _,l as C,i as I,h as g,n as K,o as J,Q as Y,t as D,d as E,j as z,y as Z,B as ee,C as te,D as ae}from"../chunks/scheduler.DfuChs2G.js";import{S as R,i as U,b as le,d as ne,m as se,t as M,a as N,e as oe}from"../chunks/index.BnyCCVNm.js";import{e as S}from"../chunks/each.D6YF6ztN.js";import{g as re}from"../chunks/getHashtags.BLyjUpLK.js";let B=null;async function ie(){if(!B){console.log("getting Categories from supabase");const{data:s}=await W.from("productcategories").select("*").order("name");return console.log("speichere Katgorien im Cache um zukünftige Anfragen zu beschleunigen"),B=s,s}return console.log("Getting Categories from Cache"),B}console.log("Produkt Layout wird initialisiert...");async function ce(){const{count:s}=await W.from("products").select("*",{count:"exact",head:!0}),e=await ie();return{count:s,categories:e}}const ye=Object.freeze(Object.defineProperty({__proto__:null,load:ce},Symbol.toStringTag,{value:"Module"}));function q(s,e,t){const l=s.slice();return l[2]=e[t].tag,l[3]=e[t].anzahl,l[4]=e[t].hashtag_id,l}function F(s){let e,t,l=s[2]+"",u,f,o=s[3]+"",n,a,c,i;return{c(){e=$("a"),t=$("div"),u=D(l),f=D(" ("),n=D(o),a=D(")"),c=H(),this.h()},l(d){e=y(d,"A",{href:!0});var m=w(e);t=y(m,"DIV",{class:!0});var v=w(t);u=E(v,l),f=E(v," ("),n=E(v,o),a=E(v,")"),v.forEach(_),c=P(m),m.forEach(_),this.h()},h(){C(t,"class","border-2 mt-1 md:p-1 md:m-1 bg-red-50 border-red-300"),C(e,"href",i="/produkte/hashtag/"+s[4])},m(d,m){I(d,e,m),g(e,t),g(t,u),g(t,f),g(t,n),g(t,a),g(e,c)},p(d,m){m&1&&l!==(l=d[2]+"")&&z(u,l),m&1&&o!==(o=d[3]+"")&&z(n,o),m&1&&i!==(i="/produkte/hashtag/"+d[4])&&C(e,"href",i)},d(d){d&&_(e)}}}function ue(s){let e,t,l="Nicht das passende Produkt gefunden? Wähle einen der folgenden beliebten Hashtags:",u,f,o=S(s[0]),n=[];for(let a=0;a<o.length;a+=1)n[a]=F(q(s,o,a));return{c(){e=$("div"),t=$("h2"),t.textContent=l,u=H(),f=$("div");for(let a=0;a<n.length;a+=1)n[a].c();this.h()},l(a){e=y(a,"DIV",{class:!0});var c=w(e);t=y(c,"H2",{"data-svelte-h":!0}),X(t)!=="svelte-1dglh44"&&(t.textContent=l),u=P(c),f=y(c,"DIV",{class:!0});var i=w(f);for(let d=0;d<n.length;d+=1)n[d].l(i);i.forEach(_),c.forEach(_),this.h()},h(){C(f,"class","col columns-3 md:columns-6 text-xs"),C(e,"class","bg-red-200 mt-10 p-3")},m(a,c){I(a,e,c),g(e,t),g(e,u),g(e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(f,null)},p(a,[c]){if(c&1){o=S(a[0]);let i;for(i=0;i<o.length;i+=1){const d=q(a,o,i);n[i]?n[i].p(d,c):(n[i]=F(d),n[i].c(),n[i].m(f,null))}for(;i<n.length;i+=1)n[i].d(1);n.length=o.length}},i:K,o:K,d(a){a&&_(e),J(n,a)}}}function fe(s,e,t){let l=[];async function u(){try{t(0,l=await re(3))}catch(f){console.error("Fehler beim Laden der Top-Hashtags:",f.message)}}return Y(u),[l]}class he extends R{constructor(e){super(),U(this,e,fe,ue,x,{})}}function G(s,e,t){const l=s.slice();return l[3]=e[t],l}function de(s){let e=s[3].name+"",t;return{c(){t=D(e)},l(l){t=E(l,e)},m(l,u){I(l,t,u)},p(l,u){u&1&&e!==(e=l[3].name+"")&&z(t,e)},d(l){l&&_(t)}}}function _e(s){let e;return{c(){e=D("Öle")},l(t){e=E(t,"Öle")},m(t,l){I(t,e,l)},p:K,d(t){t&&_(e)}}}function Q(s){let e,t,l,u;function f(a,c){return a[3].name==="Oele"?_e:de}let o=f(s),n=o(s);return{c(){e=$("a"),t=$("div"),n.c(),l=H(),this.h()},l(a){e=y(a,"A",{href:!0});var c=w(e);t=y(c,"DIV",{class:!0});var i=w(t);n.l(i),i.forEach(_),l=P(c),c.forEach(_),this.h()},h(){C(t,"class","w-full p-1 text-xs bg-green-100 hover:bg-yellow-300"),C(e,"href",u="/produkte/cat/"+s[3].category_id)},m(a,c){I(a,e,c),g(e,t),n.m(t,null),g(e,l)},p(a,c){o===(o=f(a))&&n?n.p(a,c):(n.d(1),n=o(a),n&&(n.c(),n.m(t,null))),c&1&&u!==(u="/produkte/cat/"+a[3].category_id)&&C(e,"href",u)},d(a){a&&_(e),n.d()}}}function ge(s){let e,t=s[0].count+"",l,u,f,o,n,a,c,i,d,m,v,V=S(s[0].categories),p=[];for(let r=0;r<V.length;r+=1)p[r]=Q(G(s,V,r));const A=s[2].default,b=Z(A,s,s[1],null);return m=new he({}),{c(){e=$("div"),l=D(t),u=D(" Produkte in der Datenbank gefunden. Bitte wählen Sie eine Kategorie aus um Ihr Produkt schneller zu finden."),f=H(),o=$("div"),n=$("div"),a=$("nav"),c=$("div");for(let r=0;r<p.length;r+=1)p[r].c();i=H(),b&&b.c(),d=H(),le(m.$$.fragment),this.h()},l(r){e=y(r,"DIV",{class:!0});var k=w(e);l=E(k,t),u=E(k," Produkte in der Datenbank gefunden. Bitte wählen Sie eine Kategorie aus um Ihr Produkt schneller zu finden."),k.forEach(_),f=P(r),o=y(r,"DIV",{class:!0});var h=w(o);n=y(h,"DIV",{});var T=w(n);a=y(T,"NAV",{});var L=w(a);c=y(L,"DIV",{class:!0});var O=w(c);for(let j=0;j<p.length;j+=1)p[j].l(O);O.forEach(_),L.forEach(_),T.forEach(_),i=P(h),b&&b.l(h),d=P(h),ne(m.$$.fragment,h),h.forEach(_),this.h()},h(){C(e,"class","w-full p-3 text-xs bg-yellow-200 hover:bg-lime-300"),C(c,"class","grid grid-cols-4 md:grid-cols-6 m-5 gap-3 "),C(o,"class","mb-5")},m(r,k){I(r,e,k),g(e,l),g(e,u),I(r,f,k),I(r,o,k),g(o,n),g(n,a),g(a,c);for(let h=0;h<p.length;h+=1)p[h]&&p[h].m(c,null);g(o,i),b&&b.m(o,null),g(o,d),se(m,o,null),v=!0},p(r,[k]){if((!v||k&1)&&t!==(t=r[0].count+"")&&z(l,t),k&1){V=S(r[0].categories);let h;for(h=0;h<V.length;h+=1){const T=G(r,V,h);p[h]?p[h].p(T,k):(p[h]=Q(T),p[h].c(),p[h].m(c,null))}for(;h<p.length;h+=1)p[h].d(1);p.length=V.length}b&&b.p&&(!v||k&2)&&ee(b,A,r,r[1],v?ae(A,r[1],k,null):te(r[1]),null)},i(r){v||(M(b,r),M(m.$$.fragment,r),v=!0)},o(r){N(b,r),N(m.$$.fragment,r),v=!1},d(r){r&&(_(e),_(f),_(o)),J(p,r),b&&b.d(r),oe(m)}}}function me(s,e,t){let{$$slots:l={},$$scope:u}=e,{data:f}=e;return s.$$set=o=>{"data"in o&&t(0,f=o.data),"$$scope"in o&&t(1,u=o.$$scope)},[f,u,l]}class we extends R{constructor(e){super(),U(this,e,me,ge,x,{data:0})}}export{we as component,ye as universal};
