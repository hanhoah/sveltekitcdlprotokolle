import{s as C}from"../chunks/supabaseClient.CD4MZNEJ.js";import{s as O,e as k,t as I,a as z,c as y,b as $,d as P,f as m,g as D,l as w,i as _,h as v,j as H,n as p,m as E,o as M}from"../chunks/scheduler.MvcK4Jfn.js";import{h as F,u as T}from"../chunks/await_block.DbglkfJ3.js";import{e as L}from"../chunks/each.D6YF6ztN.js";import{S as U,i as V,t as g,a as b,g as G,c as J,b as A,d as B,m as N,e as K}from"../chunks/index.kA7WmQLO.js";import{P as Q}from"../chunks/product.PPEkn7lc.js";import{S as R}from"../chunks/Spinner.BHdm9wUT.js";async function W(r){console.log("getProductIdsFromCatid, ",r);let t=[];const{data:a,error:o}=await C.from("products_categories").select("product_id").eq("category_id",r);return o?console.log("Fehler beim Abrufen der ProductIds(catId)"):t=[...new Set(a.map(e=>e.product_id))],t}function X(){return[{id:5,name:"Ayurveda"},{id:6,name:"Aphrodisiaka"}]}async function Y(r){console.log("funktion call getCategoryNameById");const{data:t}=await C.from("categories").select("name").eq("id",r);return console.log("data ",t),t[0].name}async function Z(r){const{data:t,error:a}=await C.from("products").select().in("id",r);return a?null:t}async function x({params:r}){const t=r.catid,a=await W(parseInt(t)),o=await Y(parseInt(t)),e=X();return{data:{catid:t,catname:o,productcategories:e},streamed:{products:Z(a)}}}const me=Object.freeze(Object.defineProperty({__proto__:null,load:x},Symbol.toStringTag,{value:"Module"}));function j(r,t,a){const o=r.slice();return o[3]=t[a],o}function ee(r){return{c:p,l:p,m:p,p,i:p,o:p,d:p}}function te(r){let t,a,o=L(r[2]),e=[];for(let n=0;n<o.length;n+=1)e[n]=q(j(r,o,n));const s=n=>b(e[n],1,1,()=>{e[n]=null});return{c(){for(let n=0;n<e.length;n+=1)e[n].c();t=E()},l(n){for(let c=0;c<e.length;c+=1)e[c].l(n);t=E()},m(n,c){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(n,c);_(n,t,c),a=!0},p(n,c){if(c&1){o=L(n[2]);let l;for(l=0;l<o.length;l+=1){const f=j(n,o,l);e[l]?(e[l].p(f,c),g(e[l],1)):(e[l]=q(f),e[l].c(),g(e[l],1),e[l].m(t.parentNode,t))}for(G(),l=o.length;l<e.length;l+=1)s(l);J()}},i(n){if(!a){for(let c=0;c<o.length;c+=1)g(e[c]);a=!0}},o(n){e=e.filter(Boolean);for(let c=0;c<e.length;c+=1)b(e[c]);a=!1},d(n){n&&m(t),M(e,n)}}}function q(r){let t,a,o;return a=new Q({props:{product:{id:r[3].id,name:r[3].name,img:r[3].image}}}),{c(){t=k("li"),A(a.$$.fragment),this.h()},l(e){t=y(e,"LI",{class:!0});var s=$(t);B(a.$$.fragment,s),s.forEach(m),this.h()},h(){w(t,"class","my-2")},m(e,s){_(e,t,s),N(a,t,null),o=!0},p(e,s){const n={};s&1&&(n.product={id:e[3].id,name:e[3].name,img:e[3].image}),a.$set(n)},i(e){o||(g(a.$$.fragment,e),o=!0)},o(e){b(a.$$.fragment,e),o=!1},d(e){e&&m(t),K(a)}}}function ae(r){let t,a,o;return t=new R({}),{c(){A(t.$$.fragment),a=I(`
          Lade Produkte ...`)},l(e){B(t.$$.fragment,e),a=P(e,`
          Lade Produkte ...`)},m(e,s){N(t,e,s),_(e,a,s),o=!0},p,i(e){o||(g(t.$$.fragment,e),o=!0)},o(e){b(t.$$.fragment,e),o=!1},d(e){e&&m(a),K(t,e)}}}function re(r){let t,a,o,e=r[0].data.catname+"",s,n,c,l,f,i={ctx:r,current:null,token:null,hasCatch:!1,pending:ae,then:te,catch:ee,value:2,blocks:[,,,]};return F(l=r[0].streamed.products,i),{c(){t=k("div"),a=k("h2"),o=I("Produkte der Kategorie  "),s=I(e),n=z(),c=k("ul"),i.block.c(),this.h()},l(d){t=y(d,"DIV",{class:!0});var u=$(t);a=y(u,"H2",{});var h=$(a);o=P(h,"Produkte der Kategorie  "),s=P(h,e),h.forEach(m),u.forEach(m),n=D(d),c=y(d,"UL",{class:!0});var S=$(c);i.block.l(S),S.forEach(m),this.h()},h(){w(t,"class","px-2 m-2 border-2 "),w(c,"class","grid grid-cols-2 md:grid-cols-3")},m(d,u){_(d,t,u),v(t,a),v(a,o),v(a,s),_(d,n,u),_(d,c,u),i.block.m(c,i.anchor=null),i.mount=()=>c,i.anchor=null,f=!0},p(d,[u]){r=d,(!f||u&1)&&e!==(e=r[0].data.catname+"")&&H(s,e),i.ctx=r,u&1&&l!==(l=r[0].streamed.products)&&F(l,i)||T(i,r,u)},i(d){f||(g(i.block),f=!0)},o(d){for(let u=0;u<3;u+=1){const h=i.blocks[u];b(h)}f=!1},d(d){d&&(m(t),m(n),m(c)),i.block.d(),i.token=null,i=null}}}function oe(r,t,a){let{data:o}=t;return r.$$set=e=>{"data"in e&&a(0,o=e.data)},r.$$.update=()=>{r.$$.dirty&1&&o.data.catid},[o]}class fe extends U{constructor(t){super(),V(this,t,oe,re,O,{data:0})}}export{fe as component,me as universal};
