import{s as $e}from"../chunks/supabaseClient.CCJhsT86.js";import{s as Be,e as h,a as y,H as be,t as x,o as Le,c as g,f as c,g as P,b,r as we,d as ee,l as Me,m as n,T as fe,h as _,i as w,j as ke,n as S,p as Te,q as He}from"../chunks/scheduler.DeroNCAe.js";import{h as je,u as Fe}from"../chunks/await_block.aeA-sEYK.js";import{e as Ae}from"../chunks/each.D6YF6ztN.js";import{S as Ge,i as Ue,c as W,a as X,m as Y,t as T,b as C,d as Z,g as Oe,e as Re}from"../chunks/index.B-He30dL.js";import{B as ue}from"../chunks/Button.BY3CSdr8.js";import{S as Ne}from"../chunks/Spinner.CGR2q5cp.js";import{g as de,a as Je,P as Ke}from"../chunks/shops.DZNgK7Si.js";async function Qe({params:t}){let e=t.productid,r="id, name, image, description, link, products_categories(category_id)",{data:a}=await $e.from("products").select(r).eq("id",e).limit(1).single(),l=a.name;console.log("product: ",l,"id: ",e),a.description;async function m(v){let k=v.split(" ");return k=k.slice(0,3),k.join(" ")}let s=await m(l),f=a.products_categories[0].category_id;async function o(v,k){let{data:V}=await $e.from("products_categories").select("product_id").eq("category_id",v).range(0,9),q=V.map($=>$.product_id);return q=q.filter($=>$!=k),q}async function u(v){let{data:k}=await $e.from("products").select().in("id",v);return k}let p=await o(f,e);return{data:a,searchterm:s,streamed:{similarProducts:u(p)}}}const dt=Object.freeze(Object.defineProperty({__proto__:null,load:Qe},Symbol.toStringTag,{value:"Module"}));function Ce(t,e,r){const a=t.slice();return a[8]=e[r],a}function We(t){let e,r;return{c(){e=x(t[5]),r=x(" ðŸ›’")},l(a){e=ee(a,t[5]),r=ee(a," ðŸ›’")},m(a,l){w(a,e,l),w(a,r,l)},p(a,l){l&32&&ke(e,a[5])},d(a){a&&(c(e),c(r))}}}function Xe(t){let e,r;return{c(){e=x(t[5]),r=x(" ðŸ›’")},l(a){e=ee(a,t[5]),r=ee(a," ðŸ›’")},m(a,l){w(a,e,l),w(a,r,l)},p(a,l){l&32&&ke(e,a[5])},d(a){a&&(c(e),c(r))}}}function Ye(t){let e,r;return{c(){e=h("img"),this.h()},l(a){e=g(a,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){n(e,"alt","amazon logo"),n(e,"width","100"),fe(e.src,r="/images/logos/Amazon.de-Logo.svg.png")||n(e,"src",r)},m(a,l){w(a,e,l)},p:S,d(a){a&&c(e)}}}function Ze(t){let e,r;return{c(){e=h("img"),this.h()},l(a){e=g(a,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){n(e,"alt","ebay logo"),n(e,"width","100"),fe(e.src,r="/images/logos/EBay_logo.png")||n(e,"src",r)},m(a,l){w(a,e,l)},p:S,d(a){a&&c(e)}}}function xe(t){return{c:S,l:S,m:S,p:S,i:S,o:S,d:S}}function et(t){let e,r,a=Ae(t[7]),l=[];for(let s=0;s<a.length;s+=1)l[s]=qe(Ce(t,a,s));const m=s=>C(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Te()},l(s){for(let f=0;f<l.length;f+=1)l[f].l(s);e=Te()},m(s,f){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(s,f);w(s,e,f),r=!0},p(s,f){if(f&1){a=Ae(s[7]);let o;for(o=0;o<a.length;o+=1){const u=Ce(s,a,o);l[o]?(l[o].p(u,f),T(l[o],1)):(l[o]=qe(u),l[o].c(),T(l[o],1),l[o].m(e.parentNode,e))}for(Oe(),o=a.length;o<l.length;o+=1)m(o);Re()}},i(s){if(!r){for(let f=0;f<a.length;f+=1)T(l[f]);r=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)C(l[f]);r=!1},d(s){s&&c(e),He(l,s)}}}function qe(t){let e,r,a,l=de(t[8].id)+"",m,s,f,o;return s=new Ke({props:{product:{id:t[8].id,name:t[8].name,img:t[8].image,price:t[8].price}}}),{c(){e=h("li"),r=h("div"),a=new be(!1),m=y(),W(s.$$.fragment),f=y(),this.h()},l(u){e=g(u,"LI",{class:!0});var p=b(e);r=g(p,"DIV",{class:!0});var v=b(r);a=we(v,!1),v.forEach(c),m=P(p),X(s.$$.fragment,p),f=P(p),p.forEach(c),this.h()},h(){a.a=null,n(r,"class","absolute right-10"),n(e,"class","my-2 relative ")},m(u,p){w(u,e,p),_(e,r),a.m(l,r),_(e,m),Y(s,e,null),_(e,f),o=!0},p(u,p){(!o||p&1)&&l!==(l=de(u[8].id)+"")&&a.p(l);const v={};p&1&&(v.product={id:u[8].id,name:u[8].name,img:u[8].image,price:u[8].price}),s.$set(v)},i(u){o||(T(s.$$.fragment,u),o=!0)},o(u){C(s.$$.fragment,u),o=!1},d(u){u&&c(e),Z(s)}}}function tt(t){let e,r,a,l;return r=new Ne({}),{c(){e=h("div"),W(r.$$.fragment),a=x(`
                Loading similar Products ...`),this.h()},l(m){e=g(m,"DIV",{class:!0});var s=b(e);X(r.$$.fragment,s),a=ee(s,`
                Loading similar Products ...`),s.forEach(c),this.h()},h(){n(e,"class","loading")},m(m,s){w(m,e,s),Y(r,e,null),_(e,a),l=!0},p:S,i(m){l||(T(r.$$.fragment,m),l=!0)},o(m){C(r.$$.fragment,m),l=!1},d(m){m&&c(e),Z(r)}}}function at(t){let e,r,a,l,m,s=de(t[4])+"",f,o,u,p,v,k,V,q,$,J,re,me,U,te,_e,O,z,B,L,he,M,H,se,ge,F,G,ne,pe,K,oe,j,R,Ee="Ã„hnliche Produkte:",ve,N,ie,E;document.title=e=t[5],V=new ue({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[We]},$$scope:{ctx:t}}}),L=new ue({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Xe]},$$scope:{ctx:t}}}),H=new ue({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[Ye]},$$scope:{ctx:t}}}),G=new ue({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[Ze]},$$scope:{ctx:t}}});let I={ctx:t,current:null,token:null,hasCatch:!1,pending:tt,then:et,catch:xe,value:7,blocks:[,,,]};return je(ie=t[0].streamed.similarProducts,I),{c(){r=h("meta"),a=y(),l=h("div"),m=new be(!1),f=y(),o=h("img"),p=y(),v=h("div"),k=h("a"),W(V.$$.fragment),q=y(),$=h("div"),J=h("h2"),re=x(t[5]),me=y(),U=h("div"),te=new be(!1),_e=y(),O=h("div"),z=h("div"),B=h("a"),W(L.$$.fragment),he=y(),M=h("a"),W(H.$$.fragment),ge=y(),F=h("a"),W(G.$$.fragment),pe=y(),K=h("div"),oe=y(),j=h("div"),R=h("div"),R.textContent=Ee,ve=y(),N=h("ul"),I.block.c(),this.h()},l(d){const i=Le("svelte-17ay1gl",document.head);r=g(i,"META",{name:!0,content:!0}),i.forEach(c),a=P(d),l=g(d,"DIV",{class:!0});var A=b(l);m=we(A,!1),f=P(A),o=g(A,"IMG",{class:!0,width:!0,alt:!0,src:!0}),A.forEach(c),p=P(d),v=g(d,"DIV",{class:!0});var ae=b(v);k=g(ae,"A",{href:!0,target:!0});var le=b(k);X(V.$$.fragment,le),le.forEach(c),ae.forEach(c),q=P(d),$=g(d,"DIV",{class:!0});var D=b($);J=g(D,"H2",{class:!0});var Ie=b(J);re=ee(Ie,t[5]),Ie.forEach(c),me=P(D),U=g(D,"DIV",{id:!0,class:!0});var ye=b(U);te=we(ye,!1),ye.forEach(c),_e=P(D),O=g(D,"DIV",{id:!0,class:!0});var Pe=b(O);z=g(Pe,"DIV",{class:!0});var Q=b(z);B=g(Q,"A",{href:!0,target:!0});var Ve=b(B);X(L.$$.fragment,Ve),Ve.forEach(c),he=P(Q),M=g(Q,"A",{href:!0,target:!0});var De=b(M);X(H.$$.fragment,De),De.forEach(c),ge=P(Q),F=g(Q,"A",{href:!0,target:!0});var ze=b(F);X(G.$$.fragment,ze),ze.forEach(c),Q.forEach(c),Pe.forEach(c),pe=P(D),K=g(D,"DIV",{id:!0,class:!0}),b(K).forEach(c),D.forEach(c),oe=P(d),j=g(d,"DIV",{class:!0});var ce=b(j);R=g(ce,"DIV",{class:!0,"data-svelte-h":!0}),Me(R)!=="svelte-g4vgml"&&(R.textContent=Ee),ve=P(ce),N=g(ce,"UL",{class:!0});var Se=b(N);I.block.l(Se),Se.forEach(c),ce.forEach(c),this.h()},h(){n(r,"name","description"),n(r,"content",t[3]),m.a=f,n(o,"class","py-10"),n(o,"width","400"),n(o,"alt",t[5]),fe(o.src,u=t[6])||n(o,"src",u),n(l,"class","w-full flex flex-row bg-gray-100 justify-center relative"),n(k,"href",t[2]),n(k,"target","_blank"),n(v,"class","my-5 pb-10 flex flex-col items-center top-0 sticky z-10"),n(J,"class","bg-yellow-300 p-2"),te.a=null,n(U,"id","desc"),n(U,"class","p-5"),n(B,"href",t[2]),n(B,"target","_blank"),n(M,"href",se="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+t[1]),n(M,"target","_blank"),n(F,"href",ne="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+t[1]+"&_sacat=0"),n(F,"target","_blank"),n(z,"class","my-5 pb-10 flex flex-col items-center space-y-5"),n(O,"id","links"),n(O,"class","w-5/6 m-auto bg-zinc-50 border-zinc-200 border-2 p-5"),n(K,"id","abstand"),n(K,"class","h-5"),n($,"class","bg-yellow-100"),n(R,"class","w-full my-5 bg-lime-300 p-3 text-lg font-bold text-center"),n(N,"class","grid grid-cols-2 md:grid-cols-3 px-5 pb-20"),n(j,"class","bg-lime-100 h-full ")},m(d,i){_(document.head,r),w(d,a,i),w(d,l,i),m.m(s,l),_(l,f),_(l,o),w(d,p,i),w(d,v,i),_(v,k),Y(V,k,null),w(d,q,i),w(d,$,i),_($,J),_(J,re),_($,me),_($,U),te.m(t[3],U),_($,_e),_($,O),_(O,z),_(z,B),Y(L,B,null),_(z,he),_(z,M),Y(H,M,null),_(z,ge),_(z,F),Y(G,F,null),_($,pe),_($,K),w(d,oe,i),w(d,j,i),_(j,R),_(j,ve),_(j,N),I.block.m(N,I.anchor=null),I.mount=()=>N,I.anchor=null,E=!0},p(d,[i]){t=d,(!E||i&32)&&e!==(e=t[5])&&(document.title=e),(!E||i&8)&&n(r,"content",t[3]),(!E||i&16)&&s!==(s=de(t[4])+"")&&m.p(s),(!E||i&32)&&n(o,"alt",t[5]),(!E||i&64&&!fe(o.src,u=t[6]))&&n(o,"src",u);const A={};i&2080&&(A.$$scope={dirty:i,ctx:t}),V.$set(A),(!E||i&4)&&n(k,"href",t[2]),(!E||i&32)&&ke(re,t[5]),(!E||i&8)&&te.p(t[3]);const ae={};i&2080&&(ae.$$scope={dirty:i,ctx:t}),L.$set(ae),(!E||i&4)&&n(B,"href",t[2]);const le={};i&2048&&(le.$$scope={dirty:i,ctx:t}),H.$set(le),(!E||i&2&&se!==(se="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+t[1]))&&n(M,"href",se);const D={};i&2048&&(D.$$scope={dirty:i,ctx:t}),G.$set(D),(!E||i&2&&ne!==(ne="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+t[1]+"&_sacat=0"))&&n(F,"href",ne),I.ctx=t,i&1&&ie!==(ie=t[0].streamed.similarProducts)&&je(ie,I)||Fe(I,t,i)},i(d){E||(T(V.$$.fragment,d),T(L.$$.fragment,d),T(H.$$.fragment,d),T(G.$$.fragment,d),T(I.block),E=!0)},o(d){C(V.$$.fragment,d),C(L.$$.fragment,d),C(H.$$.fragment,d),C(G.$$.fragment,d);for(let i=0;i<3;i+=1){const A=I.blocks[i];C(A)}E=!1},d(d){d&&(c(a),c(l),c(p),c(v),c(q),c($),c(oe),c(j)),c(r),Z(V),Z(L),Z(H),Z(G),I.block.d(),I.token=null,I=null}}}function lt(t,e,r){let a,l,m,s,f,o,{data:u}=e;return t.$$set=p=>{"data"in p&&r(0,u=p.data)},t.$$.update=()=>{t.$$.dirty&1&&r(6,a=Je(u.data.image)),t.$$.dirty&1&&r(5,l=u.data.name),t.$$.dirty&1&&r(4,m=u.data.id),t.$$.dirty&1&&r(3,s=u.data.description),t.$$.dirty&1&&r(2,f=u.data.link),t.$$.dirty&1&&r(1,o=u.searchterm)},[u,o,f,s,m,l,a]}class mt extends Ge{constructor(e){super(),Ue(this,e,lt,at,Be,{data:0})}}export{mt as component,dt as universal};
