import{s as he}from"../chunks/supabaseClient.CD4MZNEJ.js";import{s as Ce,e as h,H as pe,a as y,t as Z,c as p,b,q as $e,g as I,f as d,d as x,p as Te,l as i,O as ce,i as v,h as _,j as be,n as V,m as De,o as Ae}from"../chunks/scheduler.DBuKuVba.js";import{h as Ve,u as qe}from"../chunks/await_block.CtqnqUU4.js";import{e as ze}from"../chunks/each.D6YF6ztN.js";import{S as Be,i as Le,b as Q,d as W,m as X,t as z,a as C,e as Y,g as He,c as Me}from"../chunks/index.CsvtYcO8.js";import{B as oe}from"../chunks/Button.DKXMUUqO.js";import{S as Fe}from"../chunks/Spinner.BpP10mi9.js";import{g as ue,a as Ge,P as Oe}from"../chunks/shops.BgBrHpI7.js";async function Ue({params:t}){let e=t.productid,r="id, name, image, description, link, products_categories(category_id)",{data:a}=await he.from("products").select(r).eq("id",e).limit(1).single(),l=a.name;async function o(P){let g=P.split(" ");return g=g.slice(0,3),g.join(" ")}let n=await o(l),u=a.products_categories[0].category_id;async function s(P,g){let{data:S}=await he.from("products_categories").select("product_id").eq("category_id",P).range(0,9),T=S.map(F=>F.product_id);return T=T.filter(F=>F!=g),T}async function f(P){let{data:g}=await he.from("products").select().in("id",P);return g}let $=await s(u,e);return{data:a,searchterm:n,streamed:{similarProducts:f($)}}}const it=Object.freeze(Object.defineProperty({__proto__:null,load:Ue},Symbol.toStringTag,{value:"Module"}));function Se(t,e,r){const a=t.slice();return a[8]=e[r],a}function Re(t){let e,r;return{c(){e=Z(t[5]),r=Z(" ðŸ›’")},l(a){e=x(a,t[5]),r=x(a," ðŸ›’")},m(a,l){v(a,e,l),v(a,r,l)},p(a,l){l&32&&be(e,a[5])},d(a){a&&(d(e),d(r))}}}function Ne(t){let e,r;return{c(){e=Z(t[5]),r=Z(" ðŸ›’")},l(a){e=x(a,t[5]),r=x(a," ðŸ›’")},m(a,l){v(a,e,l),v(a,r,l)},p(a,l){l&32&&be(e,a[5])},d(a){a&&(d(e),d(r))}}}function Je(t){let e,r;return{c(){e=h("img"),this.h()},l(a){e=p(a,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){i(e,"alt","amazon logo"),i(e,"width","100"),ce(e.src,r="/images/logos/Amazon.de-Logo.svg.png")||i(e,"src",r)},m(a,l){v(a,e,l)},p:V,d(a){a&&d(e)}}}function Ke(t){let e,r;return{c(){e=h("img"),this.h()},l(a){e=p(a,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){i(e,"alt","ebay logo"),i(e,"width","100"),ce(e.src,r="/images/logos/EBay_logo.png")||i(e,"src",r)},m(a,l){v(a,e,l)},p:V,d(a){a&&d(e)}}}function Qe(t){return{c:V,l:V,m:V,p:V,i:V,o:V,d:V}}function We(t){let e,r,a=ze(t[7]),l=[];for(let n=0;n<a.length;n+=1)l[n]=je(Se(t,a,n));const o=n=>C(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();e=De()},l(n){for(let u=0;u<l.length;u+=1)l[u].l(n);e=De()},m(n,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(n,u);v(n,e,u),r=!0},p(n,u){if(u&1){a=ze(n[7]);let s;for(s=0;s<a.length;s+=1){const f=Se(n,a,s);l[s]?(l[s].p(f,u),z(l[s],1)):(l[s]=je(f),l[s].c(),z(l[s],1),l[s].m(e.parentNode,e))}for(He(),s=a.length;s<l.length;s+=1)o(s);Me()}},i(n){if(!r){for(let u=0;u<a.length;u+=1)z(l[u]);r=!0}},o(n){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)C(l[u]);r=!1},d(n){n&&d(e),Ae(l,n)}}}function je(t){let e,r,a=ue(t[8].id)+"",l,o,n,u;return o=new Oe({props:{product:{id:t[8].id,name:t[8].name,img:t[8].image}}}),{c(){e=h("li"),r=new pe(!1),l=y(),Q(o.$$.fragment),n=y(),this.h()},l(s){e=p(s,"LI",{class:!0});var f=b(e);r=$e(f,!1),l=I(f),W(o.$$.fragment,f),n=I(f),f.forEach(d),this.h()},h(){r.a=l,i(e,"class","my-2 relative")},m(s,f){v(s,e,f),r.m(a,e),_(e,l),X(o,e,null),_(e,n),u=!0},p(s,f){(!u||f&1)&&a!==(a=ue(s[8].id)+"")&&r.p(a);const $={};f&1&&($.product={id:s[8].id,name:s[8].name,img:s[8].image}),o.$set($)},i(s){u||(z(o.$$.fragment,s),u=!0)},o(s){C(o.$$.fragment,s),u=!1},d(s){s&&d(e),Y(o)}}}function Xe(t){let e,r,a,l;return r=new Fe({}),{c(){e=h("div"),Q(r.$$.fragment),a=Z(`
                Loading similar Products ...`),this.h()},l(o){e=p(o,"DIV",{class:!0});var n=b(e);W(r.$$.fragment,n),a=x(n,`
                Loading similar Products ...`),n.forEach(d),this.h()},h(){i(e,"class","loading")},m(o,n){v(o,e,n),X(r,e,null),_(e,a),l=!0},p:V,i(o){l||(z(r.$$.fragment,o),l=!0)},o(o){C(r.$$.fragment,o),l=!1},d(o){o&&d(e),Y(r)}}}function Ye(t){let e,r,a=ue(t[4])+"",l,o,n,u,s,f,$,P,g,S,T,F,G,ee,fe,O,D,A,q,de,B,L,le,me,H,M,re,_e,J,se,j,U,ve="Ã„hnliche Produkte:",ge,R,ne,k;$=new oe({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Re]},$$scope:{ctx:t}}}),q=new oe({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Ne]},$$scope:{ctx:t}}}),L=new oe({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[Je]},$$scope:{ctx:t}}}),M=new oe({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[Ke]},$$scope:{ctx:t}}});let w={ctx:t,current:null,token:null,hasCatch:!1,pending:Xe,then:We,catch:Qe,value:7,blocks:[,,,]};return Ve(ne=t[0].streamed.similarProducts,w),{c(){e=h("div"),r=new pe(!1),l=y(),o=h("img"),u=y(),s=h("div"),f=h("a"),Q($.$$.fragment),P=y(),g=h("div"),S=h("h2"),T=Z(t[5]),F=y(),G=h("div"),ee=new pe(!1),fe=y(),O=h("div"),D=h("div"),A=h("a"),Q(q.$$.fragment),de=y(),B=h("a"),Q(L.$$.fragment),me=y(),H=h("a"),Q(M.$$.fragment),_e=y(),J=h("div"),se=y(),j=h("div"),U=h("div"),U.textContent=ve,ge=y(),R=h("ul"),w.block.c(),this.h()},l(m){e=p(m,"DIV",{class:!0});var c=b(e);r=$e(c,!1),l=I(c),o=p(c,"IMG",{class:!0,width:!0,alt:!0,src:!0}),c.forEach(d),u=I(m),s=p(m,"DIV",{class:!0});var N=b(s);f=p(N,"A",{href:!0,target:!0});var te=b(f);W($.$$.fragment,te),te.forEach(d),N.forEach(d),P=I(m),g=p(m,"DIV",{class:!0});var E=b(g);S=p(E,"H2",{class:!0});var ae=b(S);T=x(ae,t[5]),ae.forEach(d),F=I(E),G=p(E,"DIV",{id:!0,class:!0});var we=b(G);ee=$e(we,!1),we.forEach(d),fe=I(E),O=p(E,"DIV",{id:!0,class:!0});var ke=b(O);D=p(ke,"DIV",{class:!0});var K=b(D);A=p(K,"A",{href:!0,target:!0});var ye=b(A);W(q.$$.fragment,ye),ye.forEach(d),de=I(K),B=p(K,"A",{href:!0,target:!0});var Ie=b(B);W(L.$$.fragment,Ie),Ie.forEach(d),me=I(K),H=p(K,"A",{href:!0,target:!0});var Ee=b(H);W(M.$$.fragment,Ee),Ee.forEach(d),K.forEach(d),ke.forEach(d),_e=I(E),J=p(E,"DIV",{id:!0,class:!0}),b(J).forEach(d),E.forEach(d),se=I(m),j=p(m,"DIV",{class:!0});var ie=b(j);U=p(ie,"DIV",{class:!0,"data-svelte-h":!0}),Te(U)!=="svelte-g4vgml"&&(U.textContent=ve),ge=I(ie),R=p(ie,"UL",{class:!0});var Pe=b(R);w.block.l(Pe),Pe.forEach(d),ie.forEach(d),this.h()},h(){r.a=l,i(o,"class","py-10"),i(o,"width","400"),i(o,"alt",t[5]),ce(o.src,n=t[6])||i(o,"src",n),i(e,"class","w-full flex flex-row bg-gray-100 justify-center relative"),i(f,"href",t[2]),i(f,"target","_blank"),i(s,"class","my-5 pb-10 flex flex-col items-center top-0 sticky z-10"),i(S,"class","bg-yellow-300 p-2"),ee.a=null,i(G,"id","desc"),i(G,"class","p-5"),i(A,"href",t[2]),i(A,"target","_blank"),i(B,"href",le="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+t[1]),i(B,"target","_blank"),i(H,"href",re="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+t[1]+"&_sacat=0"),i(H,"target","_blank"),i(D,"class","my-5 pb-10 flex flex-col items-center space-y-5"),i(O,"id","links"),i(O,"class","w-5/6 m-auto bg-zinc-50 border-zinc-200 border-2 p-5"),i(J,"id","abstand"),i(J,"class","h-5"),i(g,"class","bg-yellow-100"),i(U,"class","w-full my-5 bg-lime-300 p-3 text-lg font-bold text-center"),i(R,"class","grid grid-cols-2 md:grid-cols-3"),i(j,"class","bg-lime-100")},m(m,c){v(m,e,c),r.m(a,e),_(e,l),_(e,o),v(m,u,c),v(m,s,c),_(s,f),X($,f,null),v(m,P,c),v(m,g,c),_(g,S),_(S,T),_(g,F),_(g,G),ee.m(t[3],G),_(g,fe),_(g,O),_(O,D),_(D,A),X(q,A,null),_(D,de),_(D,B),X(L,B,null),_(D,me),_(D,H),X(M,H,null),_(g,_e),_(g,J),v(m,se,c),v(m,j,c),_(j,U),_(j,ge),_(j,R),w.block.m(R,w.anchor=null),w.mount=()=>R,w.anchor=null,k=!0},p(m,[c]){t=m,(!k||c&16)&&a!==(a=ue(t[4])+"")&&r.p(a),(!k||c&32)&&i(o,"alt",t[5]),(!k||c&64&&!ce(o.src,n=t[6]))&&i(o,"src",n);const N={};c&2080&&(N.$$scope={dirty:c,ctx:t}),$.$set(N),(!k||c&4)&&i(f,"href",t[2]),(!k||c&32)&&be(T,t[5]),(!k||c&8)&&ee.p(t[3]);const te={};c&2080&&(te.$$scope={dirty:c,ctx:t}),q.$set(te),(!k||c&4)&&i(A,"href",t[2]);const E={};c&2048&&(E.$$scope={dirty:c,ctx:t}),L.$set(E),(!k||c&2&&le!==(le="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+t[1]))&&i(B,"href",le);const ae={};c&2048&&(ae.$$scope={dirty:c,ctx:t}),M.$set(ae),(!k||c&2&&re!==(re="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+t[1]+"&_sacat=0"))&&i(H,"href",re),w.ctx=t,c&1&&ne!==(ne=t[0].streamed.similarProducts)&&Ve(ne,w)||qe(w,t,c)},i(m){k||(z($.$$.fragment,m),z(q.$$.fragment,m),z(L.$$.fragment,m),z(M.$$.fragment,m),z(w.block),k=!0)},o(m){C($.$$.fragment,m),C(q.$$.fragment,m),C(L.$$.fragment,m),C(M.$$.fragment,m);for(let c=0;c<3;c+=1){const N=w.blocks[c];C(N)}k=!1},d(m){m&&(d(e),d(u),d(s),d(P),d(g),d(se),d(j)),Y($),Y(q),Y(L),Y(M),w.block.d(),w.token=null,w=null}}}function Ze(t,e,r){let a,l,o,n,u,s,{data:f}=e;return t.$$set=$=>{"data"in $&&r(0,f=$.data)},t.$$.update=()=>{t.$$.dirty&1&&r(6,a=Ge(f.data.image)),t.$$.dirty&1&&r(5,l=f.data.name),t.$$.dirty&1&&r(4,o=f.data.id),t.$$.dirty&1&&r(3,n=f.data.description),t.$$.dirty&1&&r(2,u=f.data.link),t.$$.dirty&1&&r(1,s=f.searchterm)},[f,s,u,n,o,l,a]}class ot extends Be{constructor(e){super(),Le(this,e,Ze,Ye,Ce,{data:0})}}export{ot as component,it as universal};
