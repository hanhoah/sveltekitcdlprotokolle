import{s as M}from"../chunks/supabaseClient.CCJhsT86.js";import{s as x,e as w,t as C,a as A,q as V,c as I,b as E,d as D,f as h,g as B,m as N,i as b,h as k,j,u as X,H as Y,v as Z,p as ee}from"../chunks/scheduler.B5GabeQc.js";import{S as te,i as le,t as H,c as re,a as K,b as ae,d as oe,m as ne,e as se,g as ie}from"../chunks/index.DAEnPYVd.js";import{e as L}from"../chunks/each.D6YF6ztN.js";import{g as O,P as ce}from"../chunks/shops.BBtOUehW.js";async function fe(a){console.log("getCategoryNameById: ",a);const{data:e,error:r}=await M.from("categories").select("name").eq("id",a).single();return e==null?void 0:e.name}async function ue(a){const{data:e,error:r}=await M.from("categories").select("description").eq("id",a).single();try{return e&&e.description?e.description:null}catch{return null}}const de="false";async function _e({params:a}){const e=a.catid;console.log("Lade Cat Parameter ...",e);const r=await fe(parseInt(e)),t=await ue(parseInt(e));console.log("desc",t);const{data:l,error:n}=await M.from("productswithcategory").select().eq("category_id",e).order("name"),o=l==null?void 0:l.length;return{catid:e,length:o,category:r,description:t,products:l}}const we=Object.freeze(Object.defineProperty({__proto__:null,load:_e,prerender:de},Symbol.toStringTag,{value:"Module"}));function U(a,e,r){const t=a.slice();return t[10]=e[r],t}function F(a,e,r){const t=a.slice();return t[13]=e[r],t}function G(a){let e,r;return{c(){e=w("div"),r=new Y(!1),this.h()},l(t){e=I(t,"DIV",{class:!0});var l=E(e);r=Z(l,!1),l.forEach(h),this.h()},h(){r.a=null,N(e,"class","border-2 p-2 bg-slate-100")},m(t,l){b(t,e,l),r.m(a[4],e)},p(t,l){l&16&&r.p(t[4])},d(t){t&&h(e)}}}function J(a){let e,r,t,l=O(a[13].id)+"",n,o,_,i;return o=new ce({props:{product:{id:a[13].id,name:a[13].name,img:a[13].image}}}),{c(){e=w("div"),r=w("li"),t=new Y(!1),n=A(),ae(o.$$.fragment),_=A(),this.h()},l(u){e=I(u,"DIV",{class:!0});var p=E(e);r=I(p,"LI",{class:!0});var v=E(r);t=Z(v,!1),n=B(v),oe(o.$$.fragment,v),v.forEach(h),_=B(p),p.forEach(h),this.h()},h(){t.a=n,N(r,"class","my-2 relative"),N(e,"class","lazy-load")},m(u,p){b(u,e,p),k(e,r),t.m(l,r),k(r,n),ne(o,r,null),k(e,_),i=!0},p(u,p){(!i||p&4)&&l!==(l=O(u[13].id)+"")&&t.p(l);const v={};p&4&&(v.product={id:u[13].id,name:u[13].name,img:u[13].image}),o.$set(v)},i(u){i||(H(o.$$.fragment,u),i=!0)},o(u){K(o.$$.fragment,u),i=!1},d(u){u&&h(e),se(o)}}}function Q(a){let e,r=L(Array.from({length:a[3]()}).map(W)),t=[];for(let l=0;l<r.length;l+=1)t[l]=R(U(a,r,l));return{c(){e=w("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=I(l,"DIV",{class:!0});var n=E(e);for(let o=0;o<t.length;o+=1)t[o].l(n);n.forEach(h),this.h()},h(){N(e,"class","page-selector svelte-ra8vou")},m(l,n){b(l,e,n);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(l,n){if(n&74){r=L(Array.from({length:l[3]()}).map(W));let o;for(o=0;o<r.length;o+=1){const _=U(l,r,o);t[o]?t[o].p(_,n):(t[o]=R(_),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=r.length}},d(l){l&&h(e),X(t,l)}}}function he(a){let e,r=a[10]+"",t,l,n;function o(){return a[8](a[10])}return{c(){e=w("a"),t=C(r),this.h()},l(_){e=I(_,"A",{class:!0});var i=E(e);t=D(i,r),i.forEach(h),this.h()},h(){N(e,"class","page-number svelte-ra8vou")},m(_,i){b(_,e,i),k(e,t),l||(n=ee(e,"click",o),l=!0)},p(_,i){a=_,i&8&&r!==(r=a[10]+"")&&j(t,r)},d(_){_&&h(e),l=!1,n()}}}function me(a){let e,r=a[10]+"",t;return{c(){e=w("span"),t=C(r),this.h()},l(l){e=I(l,"SPAN",{class:!0});var n=E(e);t=D(n,r),n.forEach(h),this.h()},h(){N(e,"class","page-number current-page svelte-ra8vou")},m(l,n){b(l,e,n),k(e,t)},p(l,n){n&8&&r!==(r=l[10]+"")&&j(t,r)},d(l){l&&h(e)}}}function R(a){let e;function r(n,o){return n[10]==n[1]?me:he}let t=r(a),l=t(a);return{c(){l.c(),e=V()},l(n){l.l(n),e=V()},m(n,o){l.m(n,o),b(n,e,o)},p(n,o){t===(t=r(n))&&l?l.p(n,o):(l.d(1),l=t(n),l&&(l.c(),l.m(e.parentNode,e)))},d(n){n&&h(e),l.d(n)}}}function pe(a){let e,r,t,l,n,o,_,i,u,p,v=a[3]()>1,q,y,m=a[4]&&G(a),P=L(a[2]),d=[];for(let s=0;s<P.length;s+=1)d[s]=J(F(a,P,s));const $=s=>K(d[s],1,1,()=>{d[s]=null});let g=v&&Q(a);return{c(){e=w("div"),r=w("h2"),t=C(a[0]),l=C(" Produkte in der Kategorie "),n=C(a[5]),o=C(" gefunden."),_=A(),m&&m.c(),i=A(),u=w("ul");for(let s=0;s<d.length;s+=1)d[s].c();p=A(),g&&g.c(),q=V(),this.h()},l(s){e=I(s,"DIV",{class:!0});var c=E(e);r=I(c,"H2",{class:!0});var f=E(r);t=D(f,a[0]),l=D(f," Produkte in der Kategorie "),n=D(f,a[5]),o=D(f," gefunden."),f.forEach(h),c.forEach(h),_=B(s),m&&m.l(s),i=B(s),u=I(s,"UL",{class:!0});var S=E(u);for(let T=0;T<d.length;T+=1)d[T].l(S);S.forEach(h),p=B(s),g&&g.l(s),q=V(),this.h()},h(){N(r,"class","text-center my-5 p-2"),N(e,"class","w-full"),N(u,"class","grid grid-cols-2 md:grid-cols-3")},m(s,c){b(s,e,c),k(e,r),k(r,t),k(r,l),k(r,n),k(r,o),b(s,_,c),m&&m.m(s,c),b(s,i,c),b(s,u,c);for(let f=0;f<d.length;f+=1)d[f]&&d[f].m(u,null);b(s,p,c),g&&g.m(s,c),b(s,q,c),y=!0},p(s,[c]){if((!y||c&1)&&j(t,s[0]),(!y||c&32)&&j(n,s[5]),s[4]?m?m.p(s,c):(m=G(s),m.c(),m.m(i.parentNode,i)):m&&(m.d(1),m=null),c&4){P=L(s[2]);let f;for(f=0;f<P.length;f+=1){const S=F(s,P,f);d[f]?(d[f].p(S,c),H(d[f],1)):(d[f]=J(S),d[f].c(),H(d[f],1),d[f].m(u,null))}for(ie(),f=P.length;f<d.length;f+=1)$(f);re()}c&8&&(v=s[3]()>1),v?g?g.p(s,c):(g=Q(s),g.c(),g.m(q.parentNode,q)):g&&(g.d(1),g=null)},i(s){if(!y){for(let c=0;c<P.length;c+=1)H(d[c]);y=!0}},o(s){d=d.filter(Boolean);for(let c=0;c<d.length;c+=1)K(d[c]);y=!1},d(s){s&&(h(e),h(_),h(i),h(u),h(p),h(q)),m&&m.d(s),X(d,s),g&&g.d(s)}}}const z=50,W=(a,e)=>e+1;function ge(a,e,r){let t,l,n,o,_,{data:i}=e;console.log("catid: ",i.catid);function u(){return r(2,t=i.products.slice(0,10)),t}t=u();let p=1;async function v(y){r(1,p=y);const m=(p-1)*z,P=m+z;return r(2,t=await i.products.slice(m,P)),t}t=v(1);const q=y=>v(y);return a.$$set=y=>{"data"in y&&r(7,i=y.data)},a.$$.update=()=>{a.$$.dirty&128&&r(2,t=i.products.slice(0,10)),a.$$.dirty&128&&r(0,l=i.products.length),a.$$.dirty&128&&r(5,n=i.category),a.$$.dirty&128&&r(4,o=i.description),a.$$.dirty&1&&r(3,_=()=>Math.ceil(l/z))},[l,p,t,_,o,n,v,i,q]}class Ie extends te{constructor(e){super(),le(this,e,ge,pe,x,{data:7})}}export{Ie as component,we as universal};
