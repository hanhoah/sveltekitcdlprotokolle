import{s as C}from"../chunks/supabaseClient.CD4MZNEJ.js";import{s as A,e as b,t as P,a as B,c as k,b as y,d as $,f,g as K,l as w,i as _,h as v,j as N,n as m,m as S,o as O}from"../chunks/scheduler.MvcK4Jfn.js";import{h as E,u as z}from"../chunks/await_block.DbglkfJ3.js";import{e as L}from"../chunks/each.D6YF6ztN.js";import{S as D,i as H,t as h,a as I,g as M,c as T,b as U,d as V,m as G,e as J}from"../chunks/index.kA7WmQLO.js";import{P as Q}from"../chunks/product.PPEkn7lc.js";async function R(o){console.log("getProductIdsFromCatid, ",o);let t=[];const{data:a,error:n}=await C.from("products_categories").select("product_id").eq("category_id",o);return n?console.log("Fehler beim Abrufen der ProductIds(catId)"):(console.log("Keine Fehler"),t=[...new Set(a.map(e=>e.product_id))],console.log("catProductIds ",t)),t}function W(){return[{id:5,name:"Ayurveda"},{id:6,name:"Aphrodisiaka"}]}async function X(o){console.log("funktion call getCategoryNameById");const{data:t}=await C.from("categories").select("name").eq("id",o);return console.log("data ",t),t[0].name}async function Y(o){const{data:t,error:a}=await C.from("products").select().in("id",o);return a?null:t}async function Z({params:o}){const t=o.catid,a=await R(parseInt(t)),n=await X(parseInt(t)),e=W();return{data:{catid:t,catname:n,productcategories:e},streamed:{products:Y(a)}}}const de=Object.freeze(Object.defineProperty({__proto__:null,load:Z},Symbol.toStringTag,{value:"Module"}));function j(o,t,a){const n=o.slice();return n[3]=t[a],n}function x(o){return{c:m,l:m,m,p:m,i:m,o:m,d:m}}function ee(o){let t,a,n=L(o[2]),e=[];for(let r=0;r<n.length;r+=1)e[r]=q(j(o,n,r));const i=r=>I(e[r],1,1,()=>{e[r]=null});return{c(){for(let r=0;r<e.length;r+=1)e[r].c();t=S()},l(r){for(let c=0;c<e.length;c+=1)e[c].l(r);t=S()},m(r,c){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(r,c);_(r,t,c),a=!0},p(r,c){if(c&1){n=L(r[2]);let l;for(l=0;l<n.length;l+=1){const p=j(r,n,l);e[l]?(e[l].p(p,c),h(e[l],1)):(e[l]=q(p),e[l].c(),h(e[l],1),e[l].m(t.parentNode,t))}for(M(),l=n.length;l<e.length;l+=1)i(l);T()}},i(r){if(!a){for(let c=0;c<n.length;c+=1)h(e[c]);a=!0}},o(r){e=e.filter(Boolean);for(let c=0;c<e.length;c+=1)I(e[c]);a=!1},d(r){r&&f(t),O(e,r)}}}function q(o){let t,a,n;return a=new Q({props:{product:{id:o[3].id,name:o[3].name,img:o[3].image}}}),{c(){t=b("li"),U(a.$$.fragment),this.h()},l(e){t=k(e,"LI",{class:!0});var i=y(t);V(a.$$.fragment,i),i.forEach(f),this.h()},h(){w(t,"class","my-2")},m(e,i){_(e,t,i),G(a,t,null),n=!0},p(e,i){const r={};i&1&&(r.product={id:e[3].id,name:e[3].name,img:e[3].image}),a.$set(r)},i(e){n||(h(a.$$.fragment,e),n=!0)},o(e){I(a.$$.fragment,e),n=!1},d(e){e&&f(t),J(a)}}}function te(o){let t;return{c(){t=P("Loading Products ...")},l(a){t=$(a,"Loading Products ...")},m(a,n){_(a,t,n)},p:m,i:m,o:m,d(a){a&&f(t)}}}function ae(o){let t,a,n,e=o[0].data.catname+"",i,r,c,l,p,s={ctx:o,current:null,token:null,hasCatch:!1,pending:te,then:ee,catch:x,value:2,blocks:[,,,]};return E(l=o[0].streamed.products,s),{c(){t=b("div"),a=b("h2"),n=P("Produkte der Kategorie  "),i=P(e),r=B(),c=b("ul"),s.block.c(),this.h()},l(u){t=k(u,"DIV",{class:!0});var d=y(t);a=k(d,"H2",{});var g=y(a);n=$(g,"Produkte der Kategorie  "),i=$(g,e),g.forEach(f),d.forEach(f),r=K(u),c=k(u,"UL",{class:!0});var F=y(c);s.block.l(F),F.forEach(f),this.h()},h(){w(t,"class","px-2 m-2 border-2 "),w(c,"class","grid grid-cols-2 md:grid-cols-3")},m(u,d){_(u,t,d),v(t,a),v(a,n),v(a,i),_(u,r,d),_(u,c,d),s.block.m(c,s.anchor=null),s.mount=()=>c,s.anchor=null,p=!0},p(u,[d]){o=u,(!p||d&1)&&e!==(e=o[0].data.catname+"")&&N(i,e),s.ctx=o,d&1&&l!==(l=o[0].streamed.products)&&E(l,s)||z(s,o,d)},i(u){p||(h(s.block),p=!0)},o(u){for(let d=0;d<3;d+=1){const g=s.blocks[d];I(g)}p=!1},d(u){u&&(f(t),f(r),f(c)),s.block.d(),s.token=null,s=null}}}function oe(o,t,a){let{data:n}=t;return o.$$set=e=>{"data"in e&&a(0,n=e.data)},o.$$.update=()=>{o.$$.dirty&1&&n.data.catid},[n]}class ue extends D{constructor(t){super(),H(this,t,oe,ae,A,{data:0})}}export{ue as component,de as universal};
