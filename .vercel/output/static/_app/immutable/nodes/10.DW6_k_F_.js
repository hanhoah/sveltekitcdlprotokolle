import{s as ge}from"../chunks/supabaseClient.CD4MZNEJ.js";import{s as Ce,e as h,H as Ie,a as P,t as Z,c as p,b as $,q as Ee,g as D,f as u,d as x,p as Te,l as n,O as ce,i as b,h as g,j as he,n as V,m as Pe,o as Ae}from"../chunks/scheduler.DBuKuVba.js";import{h as De,u as qe}from"../chunks/await_block.CtqnqUU4.js";import{e as Ve}from"../chunks/each.D6YF6ztN.js";import{S as Be,i as Le,b as Q,d as W,m as X,t as S,a as C,e as Y,g as He,c as Me}from"../chunks/index.CsvtYcO8.js";import{B as ie}from"../chunks/Button.DKXMUUqO.js";import{S as Fe}from"../chunks/Spinner.BpP10mi9.js";import{g as Se,a as Ge,P as Oe}from"../chunks/shops.BgBrHpI7.js";async function Ue({params:a}){let e=a.productid,l="id, name, image, description, link, products_categories(category_id)",{data:r}=await ge.from("products").select(l).eq("id",e).limit(1).single(),t=r.name;async function i(I){let _=I.split(" ");return _=_.slice(0,3),_.join(" ")}let s=await i(t),d=r.products_categories[0].category_id;async function c(I,_){let{data:j}=await ge.from("products_categories").select("product_id").eq("category_id",I).range(0,9),T=j.map(F=>F.product_id);return T=T.filter(F=>F!=_),T}async function m(I){let{data:_}=await ge.from("products").select().in("id",I);return _}let w=await c(d,e);return{data:r,searchterm:s,streamed:{similarProducts:m(w)}}}const ot=Object.freeze(Object.defineProperty({__proto__:null,load:Ue},Symbol.toStringTag,{value:"Module"}));function je(a,e,l){const r=a.slice();return r[8]=e[l],r}function Re(a){let e,l;return{c(){e=Z(a[5]),l=Z(" ðŸ›’")},l(r){e=x(r,a[5]),l=x(r," ðŸ›’")},m(r,t){b(r,e,t),b(r,l,t)},p(r,t){t&32&&he(e,r[5])},d(r){r&&(u(e),u(l))}}}function Ne(a){let e,l;return{c(){e=Z(a[5]),l=Z(" ðŸ›’")},l(r){e=x(r,a[5]),l=x(r," ðŸ›’")},m(r,t){b(r,e,t),b(r,l,t)},p(r,t){t&32&&he(e,r[5])},d(r){r&&(u(e),u(l))}}}function Je(a){let e,l;return{c(){e=h("img"),this.h()},l(r){e=p(r,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){n(e,"alt","amazon logo"),n(e,"width","100"),ce(e.src,l="/images/logos/Amazon.de-Logo.svg.png")||n(e,"src",l)},m(r,t){b(r,e,t)},p:V,d(r){r&&u(e)}}}function Ke(a){let e,l;return{c(){e=h("img"),this.h()},l(r){e=p(r,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){n(e,"alt","ebay logo"),n(e,"width","100"),ce(e.src,l="/images/logos/EBay_logo.png")||n(e,"src",l)},m(r,t){b(r,e,t)},p:V,d(r){r&&u(e)}}}function Qe(a){return{c:V,l:V,m:V,p:V,i:V,o:V,d:V}}function We(a){let e,l,r=Ve(a[7]),t=[];for(let s=0;s<r.length;s+=1)t[s]=ze(je(a,r,s));const i=s=>C(t[s],1,1,()=>{t[s]=null});return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=Pe()},l(s){for(let d=0;d<t.length;d+=1)t[d].l(s);e=Pe()},m(s,d){for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(s,d);b(s,e,d),l=!0},p(s,d){if(d&1){r=Ve(s[7]);let c;for(c=0;c<r.length;c+=1){const m=je(s,r,c);t[c]?(t[c].p(m,d),S(t[c],1)):(t[c]=ze(m),t[c].c(),S(t[c],1),t[c].m(e.parentNode,e))}for(He(),c=r.length;c<t.length;c+=1)i(c);Me()}},i(s){if(!l){for(let d=0;d<r.length;d+=1)S(t[d]);l=!0}},o(s){t=t.filter(Boolean);for(let d=0;d<t.length;d+=1)C(t[d]);l=!1},d(s){s&&u(e),Ae(t,s)}}}function ze(a){let e,l,r;return l=new Oe({props:{product:{id:a[8].id,name:a[8].name,img:a[8].image}}}),{c(){e=h("li"),Q(l.$$.fragment),this.h()},l(t){e=p(t,"LI",{class:!0});var i=$(e);W(l.$$.fragment,i),i.forEach(u),this.h()},h(){n(e,"class","my-2")},m(t,i){b(t,e,i),X(l,e,null),r=!0},p(t,i){const s={};i&1&&(s.product={id:t[8].id,name:t[8].name,img:t[8].image}),l.$set(s)},i(t){r||(S(l.$$.fragment,t),r=!0)},o(t){C(l.$$.fragment,t),r=!1},d(t){t&&u(e),Y(l)}}}function Xe(a){let e,l,r,t;return l=new Fe({}),{c(){e=h("div"),Q(l.$$.fragment),r=Z(`
                Loading similar Products ...`),this.h()},l(i){e=p(i,"DIV",{class:!0});var s=$(e);W(l.$$.fragment,s),r=x(s,`
                Loading similar Products ...`),s.forEach(u),this.h()},h(){n(e,"class","loading")},m(i,s){b(i,e,s),X(l,e,null),g(e,r),t=!0},p:V,i(i){t||(S(l.$$.fragment,i),t=!0)},o(i){C(l.$$.fragment,i),t=!1},d(i){i&&u(e),Y(l)}}}function Ye(a){let e,l,r=Se(a[4])+"",t,i,s,d,c,m,w,I,_,j,T,F,G,ee,ue,O,E,A,q,fe,B,L,re,de,H,M,le,me,J,se,z,U,pe="Ã„hnliche Produkte:",_e,R,ne,k;w=new ie({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Re]},$$scope:{ctx:a}}}),q=new ie({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Ne]},$$scope:{ctx:a}}}),L=new ie({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[Je]},$$scope:{ctx:a}}}),M=new ie({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[Ke]},$$scope:{ctx:a}}});let v={ctx:a,current:null,token:null,hasCatch:!1,pending:Xe,then:We,catch:Qe,value:7,blocks:[,,,]};return De(ne=a[0].streamed.similarProducts,v),{c(){e=h("div"),l=new Ie(!1),t=P(),i=h("img"),d=P(),c=h("div"),m=h("a"),Q(w.$$.fragment),I=P(),_=h("div"),j=h("h2"),T=Z(a[5]),F=P(),G=h("div"),ee=new Ie(!1),ue=P(),O=h("div"),E=h("div"),A=h("a"),Q(q.$$.fragment),fe=P(),B=h("a"),Q(L.$$.fragment),de=P(),H=h("a"),Q(M.$$.fragment),me=P(),J=h("div"),se=P(),z=h("div"),U=h("div"),U.textContent=pe,_e=P(),R=h("ul"),v.block.c(),this.h()},l(f){e=p(f,"DIV",{class:!0});var o=$(e);l=Ee(o,!1),t=D(o),i=p(o,"IMG",{class:!0,width:!0,alt:!0,src:!0}),o.forEach(u),d=D(f),c=p(f,"DIV",{class:!0});var N=$(c);m=p(N,"A",{href:!0,target:!0});var te=$(m);W(w.$$.fragment,te),te.forEach(u),N.forEach(u),I=D(f),_=p(f,"DIV",{class:!0});var y=$(_);j=p(y,"H2",{class:!0});var ae=$(j);T=x(ae,a[5]),ae.forEach(u),F=D(y),G=p(y,"DIV",{id:!0,class:!0});var $e=$(G);ee=Ee($e,!1),$e.forEach(u),ue=D(y),O=p(y,"DIV",{id:!0,class:!0});var be=$(O);E=p(be,"DIV",{class:!0});var K=$(E);A=p(K,"A",{href:!0,target:!0});var ve=$(A);W(q.$$.fragment,ve),ve.forEach(u),fe=D(K),B=p(K,"A",{href:!0,target:!0});var we=$(B);W(L.$$.fragment,we),we.forEach(u),de=D(K),H=p(K,"A",{href:!0,target:!0});var ke=$(H);W(M.$$.fragment,ke),ke.forEach(u),K.forEach(u),be.forEach(u),me=D(y),J=p(y,"DIV",{id:!0,class:!0}),$(J).forEach(u),y.forEach(u),se=D(f),z=p(f,"DIV",{class:!0});var oe=$(z);U=p(oe,"DIV",{class:!0,"data-svelte-h":!0}),Te(U)!=="svelte-g4vgml"&&(U.textContent=pe),_e=D(oe),R=p(oe,"UL",{class:!0});var ye=$(R);v.block.l(ye),ye.forEach(u),oe.forEach(u),this.h()},h(){l.a=t,n(i,"class","py-10"),n(i,"width","400"),n(i,"alt",a[5]),ce(i.src,s=a[6])||n(i,"src",s),n(e,"class","w-full flex flex-row bg-gray-100 justify-center relative"),n(m,"href",a[2]),n(m,"target","_blank"),n(c,"class","my-5 pb-10 flex flex-col items-center top-0 sticky "),n(j,"class","bg-yellow-300 p-2"),ee.a=null,n(G,"id","desc"),n(G,"class","p-5"),n(A,"href",a[2]),n(A,"target","_blank"),n(B,"href",re="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+a[1]),n(B,"target","_blank"),n(H,"href",le="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+a[1]+"&_sacat=0"),n(H,"target","_blank"),n(E,"class","my-5 pb-10 flex flex-col items-center space-y-5"),n(O,"id","links"),n(O,"class","w-5/6 m-auto bg-zinc-50 border-zinc-200 border-2 p-5"),n(J,"id","abstand"),n(J,"class","h-5"),n(_,"class","bg-yellow-100"),n(U,"class","w-full my-5 bg-lime-300 p-3 text-lg font-bold text-center"),n(R,"class","grid grid-cols-2 md:grid-cols-3"),n(z,"class","bg-lime-100")},m(f,o){b(f,e,o),l.m(r,e),g(e,t),g(e,i),b(f,d,o),b(f,c,o),g(c,m),X(w,m,null),b(f,I,o),b(f,_,o),g(_,j),g(j,T),g(_,F),g(_,G),ee.m(a[3],G),g(_,ue),g(_,O),g(O,E),g(E,A),X(q,A,null),g(E,fe),g(E,B),X(L,B,null),g(E,de),g(E,H),X(M,H,null),g(_,me),g(_,J),b(f,se,o),b(f,z,o),g(z,U),g(z,_e),g(z,R),v.block.m(R,v.anchor=null),v.mount=()=>R,v.anchor=null,k=!0},p(f,[o]){a=f,(!k||o&16)&&r!==(r=Se(a[4])+"")&&l.p(r),(!k||o&32)&&n(i,"alt",a[5]),(!k||o&64&&!ce(i.src,s=a[6]))&&n(i,"src",s);const N={};o&2080&&(N.$$scope={dirty:o,ctx:a}),w.$set(N),(!k||o&4)&&n(m,"href",a[2]),(!k||o&32)&&he(T,a[5]),(!k||o&8)&&ee.p(a[3]);const te={};o&2080&&(te.$$scope={dirty:o,ctx:a}),q.$set(te),(!k||o&4)&&n(A,"href",a[2]);const y={};o&2048&&(y.$$scope={dirty:o,ctx:a}),L.$set(y),(!k||o&2&&re!==(re="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+a[1]))&&n(B,"href",re);const ae={};o&2048&&(ae.$$scope={dirty:o,ctx:a}),M.$set(ae),(!k||o&2&&le!==(le="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+a[1]+"&_sacat=0"))&&n(H,"href",le),v.ctx=a,o&1&&ne!==(ne=a[0].streamed.similarProducts)&&De(ne,v)||qe(v,a,o)},i(f){k||(S(w.$$.fragment,f),S(q.$$.fragment,f),S(L.$$.fragment,f),S(M.$$.fragment,f),S(v.block),k=!0)},o(f){C(w.$$.fragment,f),C(q.$$.fragment,f),C(L.$$.fragment,f),C(M.$$.fragment,f);for(let o=0;o<3;o+=1){const N=v.blocks[o];C(N)}k=!1},d(f){f&&(u(e),u(d),u(c),u(I),u(_),u(se),u(z)),Y(w),Y(q),Y(L),Y(M),v.block.d(),v.token=null,v=null}}}function Ze(a,e,l){let r,t,i,s,d,c,{data:m}=e;return a.$$set=w=>{"data"in w&&l(0,m=w.data)},a.$$.update=()=>{a.$$.dirty&1&&l(6,r=Ge(m.data.image)),a.$$.dirty&1&&l(5,t=m.data.name),a.$$.dirty&1&&l(4,i=m.data.id),a.$$.dirty&1&&l(3,s=m.data.description),a.$$.dirty&1&&l(2,d=m.data.link),a.$$.dirty&1&&l(1,c=m.searchterm)},[m,c,d,s,i,t,r]}class it extends Be{constructor(e){super(),Le(this,e,Ze,Ye,Ce,{data:0})}}export{it as component,ot as universal};
