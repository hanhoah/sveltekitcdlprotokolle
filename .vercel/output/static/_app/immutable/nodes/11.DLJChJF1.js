import{s as C}from"../chunks/supabaseClient.DvHc7uqV.js";import{s as O,e as k,t as v,a as z,c as y,b as $,d as P,f as m,g as D,l as w,i as _,h as I,j as H,n as p,m as F,o as M}from"../chunks/scheduler.MvcK4Jfn.js";import{h as E,u as T}from"../chunks/await_block.DbglkfJ3.js";import{e as L}from"../chunks/each.D6YF6ztN.js";import{S as U,i as V,t as g,a as b,g as G,c as J,b as A,d as B,m as K,e as N}from"../chunks/index.kA7WmQLO.js";import{P as Q}from"../chunks/product.PPEkn7lc.js";import{S as R}from"../chunks/Spinner.BHdm9wUT.js";async function W(o){console.log("getProductIdsFromCatid, ",o);let t=[];const{data:a,error:r}=await C.from("products_categories").select("product_id").eq("category_id",o);return r?console.log("Fehler beim Abrufen der ProductIds(catId)"):(console.log("Keine Fehler"),t=[...new Set(a.map(e=>e.product_id))],console.log("catProductIds ",t)),t}function X(){return[{id:5,name:"Ayurveda"},{id:6,name:"Aphrodisiaka"}]}async function Y(o){console.log("funktion call getCategoryNameById");const{data:t}=await C.from("categories").select("name").eq("id",o);return console.log("data ",t),t[0].name}async function Z(o){const{data:t,error:a}=await C.from("products").select().in("id",o);return a?null:t}async function x({params:o}){const t=o.catid,a=await W(parseInt(t)),r=await Y(parseInt(t)),e=X();return{data:{catid:t,catname:r,productcategories:e},streamed:{products:Z(a)}}}const me=Object.freeze(Object.defineProperty({__proto__:null,load:x},Symbol.toStringTag,{value:"Module"}));function j(o,t,a){const r=o.slice();return r[3]=t[a],r}function ee(o){return{c:p,l:p,m:p,p,i:p,o:p,d:p}}function te(o){let t,a,r=L(o[2]),e=[];for(let n=0;n<r.length;n+=1)e[n]=q(j(o,r,n));const s=n=>b(e[n],1,1,()=>{e[n]=null});return{c(){for(let n=0;n<e.length;n+=1)e[n].c();t=F()},l(n){for(let c=0;c<e.length;c+=1)e[c].l(n);t=F()},m(n,c){for(let l=0;l<e.length;l+=1)e[l]&&e[l].m(n,c);_(n,t,c),a=!0},p(n,c){if(c&1){r=L(n[2]);let l;for(l=0;l<r.length;l+=1){const f=j(n,r,l);e[l]?(e[l].p(f,c),g(e[l],1)):(e[l]=q(f),e[l].c(),g(e[l],1),e[l].m(t.parentNode,t))}for(G(),l=r.length;l<e.length;l+=1)s(l);J()}},i(n){if(!a){for(let c=0;c<r.length;c+=1)g(e[c]);a=!0}},o(n){e=e.filter(Boolean);for(let c=0;c<e.length;c+=1)b(e[c]);a=!1},d(n){n&&m(t),M(e,n)}}}function q(o){let t,a,r;return a=new Q({props:{product:{id:o[3].id,name:o[3].name,img:o[3].image}}}),{c(){t=k("li"),A(a.$$.fragment),this.h()},l(e){t=y(e,"LI",{class:!0});var s=$(t);B(a.$$.fragment,s),s.forEach(m),this.h()},h(){w(t,"class","my-2")},m(e,s){_(e,t,s),K(a,t,null),r=!0},p(e,s){const n={};s&1&&(n.product={id:e[3].id,name:e[3].name,img:e[3].image}),a.$set(n)},i(e){r||(g(a.$$.fragment,e),r=!0)},o(e){b(a.$$.fragment,e),r=!1},d(e){e&&m(t),N(a)}}}function ae(o){let t,a,r;return t=new R({}),{c(){A(t.$$.fragment),a=v(`
          Lade Produkte ...`)},l(e){B(t.$$.fragment,e),a=P(e,`
          Lade Produkte ...`)},m(e,s){K(t,e,s),_(e,a,s),r=!0},p,i(e){r||(g(t.$$.fragment,e),r=!0)},o(e){b(t.$$.fragment,e),r=!1},d(e){e&&m(a),N(t,e)}}}function oe(o){let t,a,r,e=o[0].data.catname+"",s,n,c,l,f,i={ctx:o,current:null,token:null,hasCatch:!1,pending:ae,then:te,catch:ee,value:2,blocks:[,,,]};return E(l=o[0].streamed.products,i),{c(){t=k("div"),a=k("h2"),r=v("Produkte der Kategorie  "),s=v(e),n=z(),c=k("ul"),i.block.c(),this.h()},l(u){t=y(u,"DIV",{class:!0});var d=$(t);a=y(d,"H2",{});var h=$(a);r=P(h,"Produkte der Kategorie  "),s=P(h,e),h.forEach(m),d.forEach(m),n=D(u),c=y(u,"UL",{class:!0});var S=$(c);i.block.l(S),S.forEach(m),this.h()},h(){w(t,"class","px-2 m-2 border-2 "),w(c,"class","grid grid-cols-2 md:grid-cols-3")},m(u,d){_(u,t,d),I(t,a),I(a,r),I(a,s),_(u,n,d),_(u,c,d),i.block.m(c,i.anchor=null),i.mount=()=>c,i.anchor=null,f=!0},p(u,[d]){o=u,(!f||d&1)&&e!==(e=o[0].data.catname+"")&&H(s,e),i.ctx=o,d&1&&l!==(l=o[0].streamed.products)&&E(l,i)||T(i,o,d)},i(u){f||(g(i.block),f=!0)},o(u){for(let d=0;d<3;d+=1){const h=i.blocks[d];b(h)}f=!1},d(u){u&&(m(t),m(n),m(c)),i.block.d(),i.token=null,i=null}}}function re(o,t,a){let{data:r}=t;return o.$$set=e=>{"data"in e&&a(0,r=e.data)},o.$$.update=()=>{o.$$.dirty&1&&r.data.catid},[r]}class fe extends U{constructor(t){super(),V(this,t,re,oe,O,{data:0})}}export{fe as component,me as universal};
