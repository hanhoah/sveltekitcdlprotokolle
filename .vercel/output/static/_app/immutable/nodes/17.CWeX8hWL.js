import{s as be}from"../chunks/supabaseClient.CCJhsT86.js";import{s as Me,e as h,a as y,H as we,t as ee,o as He,c as g,f as u,g as P,b as v,r as ke,d as te,l as Fe,m as n,T as de,h as _,i as $,j as Ee,n as z,p as je,q as Ge}from"../chunks/scheduler.DeroNCAe.js";import{h as Ae,u as Ue}from"../chunks/await_block.aeA-sEYK.js";import{e as Ce}from"../chunks/each.D6YF6ztN.js";import{S as Oe,i as Re,c as X,a as Y,m as Z,t as j,b as q,d as x,g as Ne,e as Je}from"../chunks/index.B-He30dL.js";import{B as fe}from"../chunks/Button.BY3CSdr8.js";import{S as Ke}from"../chunks/Spinner.CGR2q5cp.js";import{g as me,a as Qe,P as We}from"../chunks/shops.CiANs2K1.js";async function Xe({params:e}){let t=e.productid,r="id, name, image, description, link, products_categories(category_id)",{data:a}=await be.from("products").select(r).eq("id",t).limit(1).single(),l=a.name;console.log("product: ",l,"id: ",t),a.description;async function m(b){let w=b.split(" ");return w=w.slice(0,3),w.join(" ")}let s=await m(l),f=a.products_categories[0].category_id;async function c(b,w){let{data:D}=await be.from("products_categories").select("product_id").eq("category_id",b).range(0,9),V=D.map(B=>B.product_id);return V=V.filter(B=>B!=w),V}async function o(b){let{data:w}=await be.from("products").select().in("id",b);return w}let p=await c(f,t);return{data:a,searchterm:s,streamed:{similarProducts:o(p)}}}const _t=Object.freeze(Object.defineProperty({__proto__:null,load:Xe},Symbol.toStringTag,{value:"Module"}));function qe(e){return e===null||e===""?!1:(e=e.toString(),e.replace(/(<([^>]+)>)/ig,""))}function Be(e,t,r){const a=e.slice();return a[8]=t[r],a}function Ye(e){let t,r;return{c(){t=ee(e[5]),r=ee(" ðŸ›’")},l(a){t=te(a,e[5]),r=te(a," ðŸ›’")},m(a,l){$(a,t,l),$(a,r,l)},p(a,l){l&32&&Ee(t,a[5])},d(a){a&&(u(t),u(r))}}}function Ze(e){let t,r;return{c(){t=ee(e[5]),r=ee(" ðŸ›’")},l(a){t=te(a,e[5]),r=te(a," ðŸ›’")},m(a,l){$(a,t,l),$(a,r,l)},p(a,l){l&32&&Ee(t,a[5])},d(a){a&&(u(t),u(r))}}}function xe(e){let t,r;return{c(){t=h("img"),this.h()},l(a){t=g(a,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){n(t,"alt","amazon logo"),n(t,"width","100"),de(t.src,r="/images/logos/Amazon.de-Logo.svg.png")||n(t,"src",r)},m(a,l){$(a,t,l)},p:z,d(a){a&&u(t)}}}function et(e){let t,r;return{c(){t=h("img"),this.h()},l(a){t=g(a,"IMG",{alt:!0,width:!0,src:!0}),this.h()},h(){n(t,"alt","ebay logo"),n(t,"width","100"),de(t.src,r="/images/logos/EBay_logo.png")||n(t,"src",r)},m(a,l){$(a,t,l)},p:z,d(a){a&&u(t)}}}function tt(e){return{c:z,l:z,m:z,p:z,i:z,o:z,d:z}}function at(e){let t,r,a=Ce(e[7]),l=[];for(let s=0;s<a.length;s+=1)l[s]=Le(Be(e,a,s));const m=s=>q(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();t=je()},l(s){for(let f=0;f<l.length;f+=1)l[f].l(s);t=je()},m(s,f){for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(s,f);$(s,t,f),r=!0},p(s,f){if(f&1){a=Ce(s[7]);let c;for(c=0;c<a.length;c+=1){const o=Be(s,a,c);l[c]?(l[c].p(o,f),j(l[c],1)):(l[c]=Le(o),l[c].c(),j(l[c],1),l[c].m(t.parentNode,t))}for(Ne(),c=a.length;c<l.length;c+=1)m(c);Je()}},i(s){if(!r){for(let f=0;f<a.length;f+=1)j(l[f]);r=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)q(l[f]);r=!1},d(s){s&&u(t),Ge(l,s)}}}function Le(e){let t,r,a,l=me(e[8].id)+"",m,s,f,c;return s=new We({props:{product:{id:e[8].id,name:e[8].name,img:e[8].image,price:e[8].price}}}),{c(){t=h("li"),r=h("div"),a=new we(!1),m=y(),X(s.$$.fragment),f=y(),this.h()},l(o){t=g(o,"LI",{class:!0});var p=v(t);r=g(p,"DIV",{class:!0});var b=v(r);a=ke(b,!1),b.forEach(u),m=P(p),Y(s.$$.fragment,p),f=P(p),p.forEach(u),this.h()},h(){a.a=null,n(r,"class","absolute right-10"),n(t,"class","my-2 relative ")},m(o,p){$(o,t,p),_(t,r),a.m(l,r),_(t,m),Z(s,t,null),_(t,f),c=!0},p(o,p){(!c||p&1)&&l!==(l=me(o[8].id)+"")&&a.p(l);const b={};p&1&&(b.product={id:o[8].id,name:o[8].name,img:o[8].image,price:o[8].price}),s.$set(b)},i(o){c||(j(s.$$.fragment,o),c=!0)},o(o){q(s.$$.fragment,o),c=!1},d(o){o&&u(t),x(s)}}}function lt(e){let t,r,a,l;return r=new Ke({}),{c(){t=h("div"),X(r.$$.fragment),a=ee(`
                Loading similar Products ...`),this.h()},l(m){t=g(m,"DIV",{class:!0});var s=v(t);Y(r.$$.fragment,s),a=te(s,`
                Loading similar Products ...`),s.forEach(u),this.h()},h(){n(t,"class","loading")},m(m,s){$(m,t,s),Z(r,t,null),_(t,a),l=!0},p:z,i(m){l||(j(r.$$.fragment,m),l=!0)},o(m){q(r.$$.fragment,m),l=!1},d(m){m&&u(t),x(r)}}}function rt(e){let t,r,a,l,m,s,f=me(e[4])+"",c,o,p,b,w,D,V,B,I,K,se,_e,O,ae,he,R,T,L,M,ge,H,F,ne,pe,G,U,oe,ve,Q,ie,A,N,Ie="Ã„hnliche Produkte:",$e,J,ce,k;document.title=t=e[5],V=new fe({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Ye]},$$scope:{ctx:e}}}),M=new fe({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Ze]},$$scope:{ctx:e}}}),F=new fe({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[xe]},$$scope:{ctx:e}}}),U=new fe({props:{class:"text-lg mt-3",color:"light",$$slots:{default:[et]},$$scope:{ctx:e}}});let E={ctx:e,current:null,token:null,hasCatch:!1,pending:lt,then:at,catch:tt,value:7,blocks:[,,,]};return Ae(ce=e[0].streamed.similarProducts,E),{c(){r=h("meta"),l=y(),m=h("div"),s=new we(!1),c=y(),o=h("img"),b=y(),w=h("div"),D=h("a"),X(V.$$.fragment),B=y(),I=h("div"),K=h("h2"),se=ee(e[5]),_e=y(),O=h("div"),ae=new we(!1),he=y(),R=h("div"),T=h("div"),L=h("a"),X(M.$$.fragment),ge=y(),H=h("a"),X(F.$$.fragment),pe=y(),G=h("a"),X(U.$$.fragment),ve=y(),Q=h("div"),ie=y(),A=h("div"),N=h("div"),N.textContent=Ie,$e=y(),J=h("ul"),E.block.c(),this.h()},l(d){const i=He("svelte-wubmel",document.head);r=g(i,"META",{name:!0,content:!0}),i.forEach(u),l=P(d),m=g(d,"DIV",{class:!0});var C=v(m);s=ke(C,!1),c=P(C),o=g(C,"IMG",{class:!0,width:!0,alt:!0,src:!0}),C.forEach(u),b=P(d),w=g(d,"DIV",{class:!0});var le=v(w);D=g(le,"A",{href:!0,target:!0});var re=v(D);Y(V.$$.fragment,re),re.forEach(u),le.forEach(u),B=P(d),I=g(d,"DIV",{class:!0});var S=v(I);K=g(S,"H2",{class:!0});var ye=v(K);se=te(ye,e[5]),ye.forEach(u),_e=P(S),O=g(S,"DIV",{id:!0,class:!0});var Pe=v(O);ae=ke(Pe,!1),Pe.forEach(u),he=P(S),R=g(S,"DIV",{id:!0,class:!0});var Ve=v(R);T=g(Ve,"DIV",{class:!0});var W=v(T);L=g(W,"A",{href:!0,target:!0});var De=v(L);Y(M.$$.fragment,De),De.forEach(u),ge=P(W),H=g(W,"A",{href:!0,target:!0});var Se=v(H);Y(F.$$.fragment,Se),Se.forEach(u),pe=P(W),G=g(W,"A",{href:!0,target:!0});var Te=v(G);Y(U.$$.fragment,Te),Te.forEach(u),W.forEach(u),Ve.forEach(u),ve=P(S),Q=g(S,"DIV",{id:!0,class:!0}),v(Q).forEach(u),S.forEach(u),ie=P(d),A=g(d,"DIV",{class:!0});var ue=v(A);N=g(ue,"DIV",{class:!0,"data-svelte-h":!0}),Fe(N)!=="svelte-g4vgml"&&(N.textContent=Ie),$e=P(ue),J=g(ue,"UL",{class:!0});var ze=v(J);E.block.l(ze),ze.forEach(u),ue.forEach(u),this.h()},h(){n(r,"name","description"),n(r,"content",a=qe(e[3])),s.a=c,n(o,"class","py-10"),n(o,"width","400"),n(o,"alt",e[5]),de(o.src,p=e[6])||n(o,"src",p),n(m,"class","w-full flex flex-row bg-gray-100 justify-center relative"),n(D,"href",e[2]),n(D,"target","_blank"),n(w,"class","my-5 pb-10 flex flex-col items-center top-0 sticky z-10"),n(K,"class","bg-yellow-300 p-2"),ae.a=null,n(O,"id","desc"),n(O,"class","p-5"),n(L,"href",e[2]),n(L,"target","_blank"),n(H,"href",ne="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+e[1]),n(H,"target","_blank"),n(G,"href",oe="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+e[1]+"&_sacat=0"),n(G,"target","_blank"),n(T,"class","my-5 pb-10 flex flex-col items-center space-y-5"),n(R,"id","links"),n(R,"class","w-5/6 m-auto bg-zinc-50 border-zinc-200 border-2 p-5"),n(Q,"id","abstand"),n(Q,"class","h-5"),n(I,"class","bg-yellow-100"),n(N,"class","w-full my-5 bg-lime-300 p-3 text-lg font-bold text-center"),n(J,"class","grid grid-cols-2 md:grid-cols-3 px-5 pb-20"),n(A,"class","bg-lime-100 h-full ")},m(d,i){_(document.head,r),$(d,l,i),$(d,m,i),s.m(f,m),_(m,c),_(m,o),$(d,b,i),$(d,w,i),_(w,D),Z(V,D,null),$(d,B,i),$(d,I,i),_(I,K),_(K,se),_(I,_e),_(I,O),ae.m(e[3],O),_(I,he),_(I,R),_(R,T),_(T,L),Z(M,L,null),_(T,ge),_(T,H),Z(F,H,null),_(T,pe),_(T,G),Z(U,G,null),_(I,ve),_(I,Q),$(d,ie,i),$(d,A,i),_(A,N),_(A,$e),_(A,J),E.block.m(J,E.anchor=null),E.mount=()=>J,E.anchor=null,k=!0},p(d,[i]){e=d,(!k||i&32)&&t!==(t=e[5])&&(document.title=t),(!k||i&8&&a!==(a=qe(e[3])))&&n(r,"content",a),(!k||i&16)&&f!==(f=me(e[4])+"")&&s.p(f),(!k||i&32)&&n(o,"alt",e[5]),(!k||i&64&&!de(o.src,p=e[6]))&&n(o,"src",p);const C={};i&2080&&(C.$$scope={dirty:i,ctx:e}),V.$set(C),(!k||i&4)&&n(D,"href",e[2]),(!k||i&32)&&Ee(se,e[5]),(!k||i&8)&&ae.p(e[3]);const le={};i&2080&&(le.$$scope={dirty:i,ctx:e}),M.$set(le),(!k||i&4)&&n(L,"href",e[2]);const re={};i&2048&&(re.$$scope={dirty:i,ctx:e}),F.$set(re),(!k||i&2&&ne!==(ne="https://www.amazon.de/gp/search?ie=UTF8&tag=jumex_online-21&linkCode=ur2&linkId=470bf27aa1feb315de9cb5f18b114f2f&camp=1638&creative=6742&index=books&keywords="+e[1]))&&n(H,"href",ne);const S={};i&2048&&(S.$$scope={dirty:i,ctx:e}),U.$set(S),(!k||i&2&&oe!==(oe="https://www.ebay.de/sch/i.html?_from=R40&_trksid=p4432023.m570.l1313&_nkw="+e[1]+"&_sacat=0"))&&n(G,"href",oe),E.ctx=e,i&1&&ce!==(ce=e[0].streamed.similarProducts)&&Ae(ce,E)||Ue(E,e,i)},i(d){k||(j(V.$$.fragment,d),j(M.$$.fragment,d),j(F.$$.fragment,d),j(U.$$.fragment,d),j(E.block),k=!0)},o(d){q(V.$$.fragment,d),q(M.$$.fragment,d),q(F.$$.fragment,d),q(U.$$.fragment,d);for(let i=0;i<3;i+=1){const C=E.blocks[i];q(C)}k=!1},d(d){d&&(u(l),u(m),u(b),u(w),u(B),u(I),u(ie),u(A)),u(r),x(V),x(M),x(F),x(U),E.block.d(),E.token=null,E=null}}}function st(e,t,r){let a,l,m,s,f,c,{data:o}=t;return e.$$set=p=>{"data"in p&&r(0,o=p.data)},e.$$.update=()=>{e.$$.dirty&1&&r(6,a=Qe(o.data.image)),e.$$.dirty&1&&r(5,l=o.data.name),e.$$.dirty&1&&r(4,m=o.data.id),e.$$.dirty&1&&r(3,s=o.data.description),e.$$.dirty&1&&r(2,f=o.data.link),e.$$.dirty&1&&r(1,c=o.searchterm)},[o,c,f,s,m,l,a]}class ht extends Oe{constructor(t){super(),Re(this,t,st,rt,Me,{data:0})}}export{ht as component,_t as universal};
