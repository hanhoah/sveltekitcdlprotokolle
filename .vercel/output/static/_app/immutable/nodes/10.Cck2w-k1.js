import{s as Y}from"../chunks/supabaseClient.DvHc7uqV.js";import{s as fe,e as g,a as M,t as A,N as me,c as p,b as $,f as u,g as O,d as N,O as _e,p as ge,l as f,M as se,i as h,h as v,j as Z,n as E,m as oe,o as pe}from"../chunks/scheduler.MvcK4Jfn.js";import{h as ne,u as he}from"../chunks/await_block.DbglkfJ3.js";import{e as ie}from"../chunks/each.D6YF6ztN.js";import{S as ve,i as $e,b as J,d as K,m as Q,t as D,a as L,e as R,g as be,c as ke}from"../chunks/index.kA7WmQLO.js";import{B as ce}from"../chunks/Button.BqdHp8pG.js";import{S as ye}from"../chunks/Spinner.BHdm9wUT.js";import{g as we,P as Pe}from"../chunks/product.PPEkn7lc.js";async function Ie({params:r}){let t=r.productid,l="name, image, description, link, products_categories(category_id)",{data:a}=await Y.from("products").select(l).eq("id",t).limit(1).single(),e=a.products_categories[0].category_id;async function i(n,m){let{data:y}=await Y.from("products_categories").select("product_id").eq("category_id",n).range(0,9),w=y.map(V=>V.product_id);return w=w.filter(V=>V!=m),w}async function s(n){let{data:m}=await Y.from("products").select().in("id",n);return m}let o=await i(e,t);return{data:a,streamed:{similarProducts:s(o)}}}const Fe=Object.freeze(Object.defineProperty({__proto__:null,load:Ie},Symbol.toStringTag,{value:"Module"}));function ue(r,t,l){const a=r.slice();return a[6]=t[l],a}function Ee(r){let t,l;return{c(){t=A(r[3]),l=A(" ðŸ›’")},l(a){t=N(a,r[3]),l=N(a," ðŸ›’")},m(a,e){h(a,t,e),h(a,l,e)},p(a,e){e&8&&Z(t,a[3])},d(a){a&&(u(t),u(l))}}}function De(r){let t,l;return{c(){t=A(r[3]),l=A(" ðŸ›’")},l(a){t=N(a,r[3]),l=N(a," ðŸ›’")},m(a,e){h(a,t,e),h(a,l,e)},p(a,e){e&8&&Z(t,a[3])},d(a){a&&(u(t),u(l))}}}function Ve(r){return{c:E,l:E,m:E,p:E,i:E,o:E,d:E}}function Se(r){let t,l,a=ie(r[5]),e=[];for(let s=0;s<a.length;s+=1)e[s]=de(ue(r,a,s));const i=s=>L(e[s],1,1,()=>{e[s]=null});return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=oe()},l(s){for(let o=0;o<e.length;o+=1)e[o].l(s);t=oe()},m(s,o){for(let n=0;n<e.length;n+=1)e[n]&&e[n].m(s,o);h(s,t,o),l=!0},p(s,o){if(o&1){a=ie(s[5]);let n;for(n=0;n<a.length;n+=1){const m=ue(s,a,n);e[n]?(e[n].p(m,o),D(e[n],1)):(e[n]=de(m),e[n].c(),D(e[n],1),e[n].m(t.parentNode,t))}for(be(),n=a.length;n<e.length;n+=1)i(n);ke()}},i(s){if(!l){for(let o=0;o<a.length;o+=1)D(e[o]);l=!0}},o(s){e=e.filter(Boolean);for(let o=0;o<e.length;o+=1)L(e[o]);l=!1},d(s){s&&u(t),pe(e,s)}}}function de(r){let t,l,a;return l=new Pe({props:{product:{id:r[6].id,name:r[6].name,img:r[6].image}}}),{c(){t=g("li"),J(l.$$.fragment),this.h()},l(e){t=p(e,"LI",{class:!0});var i=$(t);K(l.$$.fragment,i),i.forEach(u),this.h()},h(){f(t,"class","my-2")},m(e,i){h(e,t,i),Q(l,t,null),a=!0},p(e,i){const s={};i&1&&(s.product={id:e[6].id,name:e[6].name,img:e[6].image}),l.$set(s)},i(e){a||(D(l.$$.fragment,e),a=!0)},o(e){L(l.$$.fragment,e),a=!1},d(e){e&&u(t),R(l)}}}function Ce(r){let t,l,a,e;return l=new ye({}),{c(){t=g("div"),J(l.$$.fragment),a=A(`
                Loading similar Products ...`),this.h()},l(i){t=p(i,"DIV",{class:!0});var s=$(t);K(l.$$.fragment,s),a=N(s,`
                Loading similar Products ...`),s.forEach(u),this.h()},h(){f(t,"class","loading")},m(i,s){h(i,t,s),Q(l,t,null),v(t,a),e=!0},p:E,i(i){e||(D(l.$$.fragment,i),e=!0)},o(i){L(l.$$.fragment,i),e=!1},d(i){i&&u(t),R(l)}}}function je(r){let t,l,a,e,i,s,o,n,m,y,w,V,S,T,W,B,P,I,F,b,C,x="Ã„hnliche Produkte:",X,j,G,k;o=new ce({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[Ee]},$$scope:{ctx:r}}}),I=new ce({props:{class:"text-lg mt-3",color:"green",$$slots:{default:[De]},$$scope:{ctx:r}}});let _={ctx:r,current:null,token:null,hasCatch:!1,pending:Ce,then:Se,catch:Ve,value:5,blocks:[,,,]};return ne(G=r[0].streamed.similarProducts,_),{c(){t=g("div"),l=g("img"),e=M(),i=g("div"),s=g("a"),J(o.$$.fragment),n=M(),m=g("div"),y=g("h2"),w=A(r[3]),V=M(),S=g("div"),T=new me(!1),W=M(),B=g("div"),P=g("a"),J(I.$$.fragment),F=M(),b=g("div"),C=g("div"),C.textContent=x,X=M(),j=g("ul"),_.block.c(),this.h()},l(d){t=p(d,"DIV",{class:!0});var c=$(t);l=p(c,"IMG",{class:!0,width:!0,alt:!0,src:!0}),c.forEach(u),e=O(d),i=p(d,"DIV",{class:!0});var q=$(i);s=p(q,"A",{href:!0,target:!0});var z=$(s);K(o.$$.fragment,z),z.forEach(u),q.forEach(u),n=O(d),m=p(d,"DIV",{class:!0});var H=$(m);y=p(H,"H2",{class:!0});var ee=$(y);w=N(ee,r[3]),ee.forEach(u),V=O(H),S=p(H,"DIV",{id:!0,class:!0});var te=$(S);T=_e(te,!1),te.forEach(u),W=O(H),B=p(H,"DIV",{class:!0});var le=$(B);P=p(le,"A",{href:!0,target:!0});var ae=$(P);K(I.$$.fragment,ae),ae.forEach(u),le.forEach(u),H.forEach(u),F=O(d),b=p(d,"DIV",{class:!0});var U=$(b);C=p(U,"DIV",{class:!0,"data-svelte-h":!0}),ge(C)!=="svelte-g4vgml"&&(C.textContent=x),X=O(U),j=p(U,"UL",{class:!0});var re=$(j);_.block.l(re),re.forEach(u),U.forEach(u),this.h()},h(){f(l,"class","py-10"),f(l,"width","400"),f(l,"alt",qe),se(l.src,a=r[4])||f(l,"src",a),f(t,"class","w-full flex flex-row bg-gray-100 justify-center"),f(s,"href",r[1]),f(s,"target","_blank"),f(i,"class","my-5 pb-10 flex flex-col items-center top-0 sticky "),f(y,"class","bg-yellow-300 p-2"),T.a=null,f(S,"id","desc"),f(S,"class","p-5"),f(P,"href",r[1]),f(P,"target","_blank"),f(B,"class","my-5 pb-10 flex flex-col items-center "),f(m,"class","bg-yellow-100"),f(C,"class","w-full my-5 bg-lime-300 p-3 text-lg font-bold text-center"),f(j,"class","grid grid-cols-2 md:grid-cols-3"),f(b,"class","bg-lime-100")},m(d,c){h(d,t,c),v(t,l),h(d,e,c),h(d,i,c),v(i,s),Q(o,s,null),h(d,n,c),h(d,m,c),v(m,y),v(y,w),v(m,V),v(m,S),T.m(r[2],S),v(m,W),v(m,B),v(B,P),Q(I,P,null),h(d,F,c),h(d,b,c),v(b,C),v(b,X),v(b,j),_.block.m(j,_.anchor=null),_.mount=()=>j,_.anchor=null,k=!0},p(d,[c]){r=d,(!k||c&16&&!se(l.src,a=r[4]))&&f(l,"src",a);const q={};c&520&&(q.$$scope={dirty:c,ctx:r}),o.$set(q),(!k||c&2)&&f(s,"href",r[1]),(!k||c&8)&&Z(w,r[3]),(!k||c&4)&&T.p(r[2]);const z={};c&520&&(z.$$scope={dirty:c,ctx:r}),I.$set(z),(!k||c&2)&&f(P,"href",r[1]),_.ctx=r,c&1&&G!==(G=r[0].streamed.similarProducts)&&ne(G,_)||he(_,r,c)},i(d){k||(D(o.$$.fragment,d),D(I.$$.fragment,d),D(_.block),k=!0)},o(d){L(o.$$.fragment,d),L(I.$$.fragment,d);for(let c=0;c<3;c+=1){const q=_.blocks[c];L(q)}k=!1},d(d){d&&(u(t),u(e),u(i),u(n),u(m),u(F),u(b)),R(o),R(I),_.block.d(),_.token=null,_=null}}}let qe="test";function Le(r,t,l){let a,e,i,s,{data:o}=t;return console.log("***************"),r.$$set=n=>{"data"in n&&l(0,o=n.data)},r.$$.update=()=>{r.$$.dirty&1&&l(4,a=we(o.data.image)),r.$$.dirty&1&&l(3,e=o.data.name),r.$$.dirty&1&&l(2,i=o.data.description),r.$$.dirty&1&&l(1,s=o.data.link)},[o,s,i,e,a]}class Ge extends ve{constructor(t){super(),$e(this,t,Le,je,fe,{data:0})}}export{Ge as component,Fe as universal};
